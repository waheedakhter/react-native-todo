cd868e59ff19bccb4f5b92a747765398
"use strict";

var aStackPool = [];
var bStackPool = [];
/**
 * Checks if two values are equal. Values may be primitives, arrays, or objects.
 * Returns true if both arguments have the same keys and values.
 *
 * @see http://underscorejs.org
 * @copyright 2009-2013 Jeremy Ashkenas, DocumentCloud Inc.
 * @license MIT
 */

function areEqual(a, b) {
  var aStack = aStackPool.length ? aStackPool.pop() : [];
  var bStack = bStackPool.length ? bStackPool.pop() : [];
  var result = eq(a, b, aStack, bStack);
  aStack.length = 0;
  bStack.length = 0;
  aStackPool.push(aStack);
  bStackPool.push(bStack);
  return result;
}

function eq(a, b, aStack, bStack) {
  if (a === b) {
    return a !== 0 || 1 / a == 1 / b;
  }

  if (a == null || b == null) {
    return false;
  }

  if (typeof a != 'object' || typeof b != 'object') {
    return false;
  }

  var objToStr = Object.prototype.toString;
  var className = objToStr.call(a);

  if (className != objToStr.call(b)) {
    return false;
  }

  switch (className) {
    case '[object String]':
      return a == String(b);

    case '[object Number]':
      return isNaN(a) || isNaN(b) ? false : a == Number(b);

    case '[object Date]':
    case '[object Boolean]':
      return +a == +b;

    case '[object RegExp]':
      return a.source == b.source && a.global == b.global && a.multiline == b.multiline && a.ignoreCase == b.ignoreCase;
  }

  var length = aStack.length;

  while (length--) {
    if (aStack[length] == a) {
      return bStack[length] == b;
    }
  }

  aStack.push(a);
  bStack.push(b);
  var size = 0;

  if (className === '[object Array]') {
    size = a.length;

    if (size !== b.length) {
      return false;
    }

    while (size--) {
      if (!eq(a[size], b[size], aStack, bStack)) {
        return false;
      }
    }
  } else {
    if (a.constructor !== b.constructor) {
      return false;
    }

    if (a.hasOwnProperty('valueOf') && b.hasOwnProperty('valueOf')) {
      return a.valueOf() == b.valueOf();
    }

    var keys = Object.keys(a);

    if (keys.length != Object.keys(b).length) {
      return false;
    }

    for (var i = 0; i < keys.length; i++) {
      if (!eq(a[keys[i]], b[keys[i]], aStack, bStack)) {
        return false;
      }
    }
  }

  aStack.pop();
  bStack.pop();
  return true;
}

module.exports = areEqual;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFyZUVxdWFsLmpzIl0sIm5hbWVzIjpbImFTdGFja1Bvb2wiLCJiU3RhY2tQb29sIiwiYXJlRXF1YWwiLCJhIiwiYiIsImFTdGFjayIsImxlbmd0aCIsInBvcCIsImJTdGFjayIsInJlc3VsdCIsImVxIiwicHVzaCIsIm9ialRvU3RyIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjbGFzc05hbWUiLCJjYWxsIiwiU3RyaW5nIiwiaXNOYU4iLCJOdW1iZXIiLCJzb3VyY2UiLCJnbG9iYWwiLCJtdWx0aWxpbmUiLCJpZ25vcmVDYXNlIiwic2l6ZSIsImNvbnN0cnVjdG9yIiwiaGFzT3duUHJvcGVydHkiLCJ2YWx1ZU9mIiwia2V5cyIsImkiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFVQSxJQUFJQSxVQUFVLEdBQUcsRUFBakI7QUFDQSxJQUFJQyxVQUFVLEdBQUcsRUFBakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVNDLFFBQVQsQ0FBa0JDLENBQWxCLEVBQXFCQyxDQUFyQixFQUF3QjtBQUN0QixNQUFJQyxNQUFNLEdBQUdMLFVBQVUsQ0FBQ00sTUFBWCxHQUFvQk4sVUFBVSxDQUFDTyxHQUFYLEVBQXBCLEdBQXVDLEVBQXBEO0FBQ0EsTUFBSUMsTUFBTSxHQUFHUCxVQUFVLENBQUNLLE1BQVgsR0FBb0JMLFVBQVUsQ0FBQ00sR0FBWCxFQUFwQixHQUF1QyxFQUFwRDtBQUNBLE1BQUlFLE1BQU0sR0FBR0MsRUFBRSxDQUFDUCxDQUFELEVBQUlDLENBQUosRUFBT0MsTUFBUCxFQUFlRyxNQUFmLENBQWY7QUFDQUgsRUFBQUEsTUFBTSxDQUFDQyxNQUFQLEdBQWdCLENBQWhCO0FBQ0FFLEVBQUFBLE1BQU0sQ0FBQ0YsTUFBUCxHQUFnQixDQUFoQjtBQUNBTixFQUFBQSxVQUFVLENBQUNXLElBQVgsQ0FBZ0JOLE1BQWhCO0FBQ0FKLEVBQUFBLFVBQVUsQ0FBQ1UsSUFB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QnZCLENBQUMsQ0FBQ3VCLGNBQUYsQ0FBaUIsU0FBakIsQ0FBbkMsRUFBZ0U7QUFDOUQsYUFBT3hCLENBQUMsQ0FBQ3lCLE9BQUYsTUFBZXhCLENBQUMsQ0FBQ3dCLE9BQUYsRUFBdEI7QUFDRDs7QUFFRCxRQUFJQyxJQUFJLEdBQUdoQixNQUFNLENBQUNnQixJQUFQLENBQVkxQixDQUFaLENBQVg7O0FBRUEsUUFBSTBCLElBQUksQ0FBQ3ZCLE1BQUwsSUFBZU8sTUFBTSxDQUFDZ0IsSUFBUCxDQUFZekIsQ0FBWixFQUFlRSxNQUFsQyxFQUEwQztBQUN4QyxhQUFPLEtBQVA7QUFDRDs7QUFFRCxTQUFLLElBQUl3QixDQUFDLEdBQUcsQ0FBYixFQUFnQkEsQ0FBQyxHQUFHRCxJQUFJLENBQUN2QixNQUF6QixFQUFpQ3dCLENBQUMsRUFBbEMsRUFBc0M7QUFDcEMsVUFBSSxDQUFDcEIsRUFBRSxDQUFDUCxDQUFDLENBQUMwQixJQUFJLENBQUNDLENBQUQsQ0FBTCxDQUFGLEVBQWExQixDQUFDLENBQUN5QixJQUFJLENBQUNDLENBQUQsQ0FBTCxDQUFkLEVBQXlCekIsTUFBekIsRUFBaUNHLE1BQWpDLENBQVAsRUFBaUQ7QUFDL0MsZUFBTyxLQUFQO0FBQ0Q7QUFDRjtBQUNGOztBQUVESCxFQUFBQSxNQUFNLENBQUNFLEdBQVA7QUFDQUMsRUFBQUEsTUFBTSxDQUFDRCxHQUFQO0FBQ0EsU0FBTyxJQUFQO0FBQ0Q7O0FBRUR3QixNQUFNLENBQUNDLE9BQVAsR0FBaUI5QixRQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIENvcHlyaWdodCAoYykgMjAxMy1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIFxuICovXG52YXIgYVN0YWNrUG9vbCA9IFtdO1xudmFyIGJTdGFja1Bvb2wgPSBbXTtcbi8qKlxuICogQ2hlY2tzIGlmIHR3byB2YWx1ZXMgYXJlIGVxdWFsLiBWYWx1ZXMgbWF5IGJlIHByaW1pdGl2ZXMsIGFycmF5cywgb3Igb2JqZWN0cy5cbiAqIFJldHVybnMgdHJ1ZSBpZiBib3RoIGFyZ3VtZW50cyBoYXZlIHRoZSBzYW1lIGtleXMgYW5kIHZhbHVlcy5cbiAqXG4gKiBAc2VlIGh0dHA6Ly91bmRlcnNjb3JlanMub3JnXG4gKiBAY29weXJpZ2h0IDIwMDktMjAxMyBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgSW5jLlxuICogQGxpY2Vuc2UgTUlUXG4gKi9cblxuZnVuY3Rpb24gYXJlRXF1YWwoYSwgYikge1xuICB2YXIgYVN0YWNrID0gYVN0YWNrUG9vbC5sZW5ndGggPyBhU3RhY2tQb29sLnBvcCgpIDogW107XG4gIHZhciBiU3RhY2sgPSBiU3RhY2tQb29sLmxlbmd0aCA/IGJTdGFja1Bvb2wucG9wKCkgOiBbXTtcbiAgdmFyIHJlc3VsdCA9IGVxKGEsIGIsIGFTdGFjaywgYlN0YWNrKTtcbiAgYVN0YWNrLmxlbmd0aCA9IDA7XG4gIGJTdGFjay5sZW5ndGggPSAwO1xuICBhU3RhY2tQb29sLnB1c2goYVN0YWNrKTtcbiAgYlN0YWNrUG9vbC5wdXNoKGJTdGFjayk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGVxKGEsIGIsIGFTdGFjaywgYlN0YWNrKSB7XG4gIGlmIChhID09PSBiKSB7XG4gICAgLy8gSWRlbnRpY2FsIG9iamVjdHMgYXJlIGVxdWFsLiBgMCA9PT0gLTBgLCBidXQgdGhleSBhcmVuJ3QgaWRlbnRpY2FsLlxuICAgIHJldHVybiBhICE9PSAwIHx8IDEgLyBhID09IDEgLyBiO1xuICB9XG5cbiAgaWYgKGEgPT0gbnVsbCB8fCBiID09IG51bGwpIHtcbiAgICAvLyBhIG9yIGIgY2FuIGJlIGBudWxsYCBvciBgdW5kZWZpbmVkYFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgYSAhPSAnb2JqZWN0JyB8fCB0eXBlb2YgYiAhPSAnb2JqZWN0Jykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBvYmpUb1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG4gIHZhciBjbGFzc05hbWUgPSBvYmpUb1N0ci5jYWxsKGEpO1xuXG4gIGlmIChjbGFzc05hbWUgIT0gb2JqVG9TdHIuY2FsbChiKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN3aXRjaCAoY2xhc3NOYW1lKSB7XG4gICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcbiAgICAgIHJldHVybiBhID09IFN0cmluZyhiKTtcblxuICAgIGNhc2UgJ1tvYmplY3QgTnVtYmVyXSc6XG4gICAgICByZXR1cm4gaXNOYU4oYSkgfHwgaXNOYU4oYikgPyBmYWxzZSA6IGEgPT0gTnVtYmVyKGIpO1xuXG4gICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XG4gICAgY2FzZSAnW29iamVjdCBCb29sZWFuXSc6XG4gICAgICByZXR1cm4gK2EgPT0gK2I7XG5cbiAgICBjYXNlICdbb2JqZWN0IFJlZ0V4cF0nOlxuICAgICAgcmV0dXJuIGEuc291cmNlID09IGIuc291cmNlICYmIGEuZ2xvYmFsID09IGIuZ2xvYmFsICYmIGEubXVsdGlsaW5lID09IGIubXVsdGlsaW5lICYmIGEuaWdub3JlQ2FzZSA9PSBiLmlnbm9yZUNhc2U7XG4gIH0gLy8gQXNzdW1lIGVxdWFsaXR5IGZvciBjeWNsaWMgc3RydWN0dXJlcy5cblxuXG4gIHZhciBsZW5ndGggPSBhU3RhY2subGVuZ3RoO1xuXG4gIHdoaWxlIChsZW5ndGgtLSkge1xuICAgIGlmIChhU3RhY2tbbGVuZ3RoXSA9PSBhKSB7XG4gICAgICByZXR1cm4gYlN0YWNrW2xlbmd0aF0gPT0gYjtcbiAgICB9XG4gIH1cblxuICBhU3RhY2sucHVzaChhKTtcbiAgYlN0YWNrLnB1c2goYik7XG4gIHZhciBzaXplID0gMDsgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIGFuZCBhcnJheXMuXG5cbiAgaWYgKGNsYXNzTmFtZSA9PT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgIHNpemUgPSBhLmxlbmd0aDtcblxuICAgIGlmIChzaXplICE9PSBiLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gLy8gRGVlcCBjb21wYXJlIHRoZSBjb250ZW50cywgaWdub3Jpbmcgbm9uLW51bWVyaWMgcHJvcGVydGllcy5cblxuXG4gICAgd2hpbGUgKHNpemUtLSkge1xuICAgICAgaWYgKCFlcShhW3NpemVdLCBiW3NpemVdLCBhU3RhY2ssIGJTdGFjaykpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoYS5jb25zdHJ1Y3RvciAhPT0gYi5jb25zdHJ1Y3Rvcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChhLmhhc093blByb3BlcnR5KCd2YWx1ZU9mJykgJiYgYi5oYXNPd25Qcm9wZXJ0eSgndmFsdWVPZicpKSB7XG4gICAgICByZXR1cm4gYS52YWx1ZU9mKCkgPT0gYi52YWx1ZU9mKCk7XG4gICAgfVxuXG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhhKTtcblxuICAgIGlmIChrZXlzLmxlbmd0aCAhPSBPYmplY3Qua2V5cyhiKS5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghZXEoYVtrZXlzW2ldXSwgYltrZXlzW2ldXSwgYVN0YWNrLCBiU3RhY2spKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhU3RhY2sucG9wKCk7XG4gIGJTdGFjay5wb3AoKTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXJlRXF1YWw7Il19