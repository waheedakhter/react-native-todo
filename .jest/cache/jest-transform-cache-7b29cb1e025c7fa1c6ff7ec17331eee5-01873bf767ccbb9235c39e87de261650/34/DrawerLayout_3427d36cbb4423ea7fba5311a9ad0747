a9eb46e543ea278e3078a22b49fe1088
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault2(require("@babel/runtime/helpers/extends"));

var _classCallCheck2 = _interopRequireDefault2(require("@babel/runtime/helpers/classCallCheck"));

var _createClass2 = _interopRequireDefault2(require("@babel/runtime/helpers/createClass"));

var _assertThisInitialized2 = _interopRequireDefault2(require("@babel/runtime/helpers/assertThisInitialized"));

var _inherits2 = _interopRequireDefault2(require("@babel/runtime/helpers/inherits"));

var _possibleConstructorReturn2 = _interopRequireDefault2(require("@babel/runtime/helpers/possibleConstructorReturn"));

var _getPrototypeOf2 = _interopRequireDefault2(require("@babel/runtime/helpers/getPrototypeOf"));

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var React = _interopRequireWildcard(require("react"));

var _invariant = _interopRequireDefault(require("invariant"));

var _reactNative = require("react-native");

var _gestureHandlers = require("../handlers/gestureHandlers");

var _State = require("../State");

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    default: obj
  };
}

function _getRequireWildcardCache() {
  if (typeof WeakMap !== "function") return null;
  var cache = new WeakMap();

  _getRequireWildcardCache = function _getRequireWildcardCache() {
    return cache;
  };

  return cache;
}

function _interopRequireWildcard(obj) {
  if (obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || typeof obj !== "object" && typeof obj !== "function") {
    return {
      default: obj
    };
  }

  var cache = _getRequireWildcardCache();

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj.default = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
}

var DRAG_TOSS = 0.05;
var IDLE = 'Idle';
var DRAGGING = 'Dragging';
var SETTLING = 'Settling';

var DrawerLayout = function (_React$Component) {
  (0, _inherits2.default)(DrawerLayout, _React$Component);

  var _super = _createSuper(DrawerLayout);

  function DrawerLayout(_props) {
    var _this;

    (0, _classCallCheck2.default)(this, DrawerLayout);
    _this = _super.call(this, _props);

    _defineProperty((0, _assertThisInitialized2.default)(_this), "openValue", void 0);

    _defineProperty((0, _assertThisInitialized2.default)(_this), "onGestureEvent", void 0);

    _defineProperty((0, _assertThisInitialized2.default)(_this), "accessibilityIsModalView", React.createRef());

    _defineProperty((0, _assertThisInitialized2.default)(_this), "pointerEventsView", React.createRef());

    _defineProperty((0, _assertThisInitialized2.default)(_this), "panGestureHandler", React.createRef());

    _defineProperty((0, _assertThisInitialized2.default)(_this), "drawerShown", false);

    _defineProperty((0, _assertThisInitialized2.default)(_this), "updateAnimatedEvent", function (props, state) {
      var drawerPosition = props.drawerPosition,
          drawerWidth = props.drawerWidth,
          drawerType = props.drawerType;
      var dragXValue = state.dragX,
          touchXValue = state.touchX,
          drawerTranslation = state.drawerTranslation,
          containerWidth = state.containerWidth;
      var dragX = dragXValue;
      var touchX = touchXValue;

      if (drawerPosition !== 'left') {
        dragX = _reactNative.Animated.multiply(new _reactNative.Animated.Value(-1), dragXValue);
        touchX = _reactNative.Animated.add(new _reactNative.Animated.Value(containerWidth), _reactNative.Animated.multiply(new _reactNative.Animated.Value(-1), touchXValue));
        touchXValue.setValue(containerWidth);
      } else {
        touchXValue.setValue(0);
      }

      var translationX = dragX;

      if (drawerType === 'front') {
        var startPositionX = _reactNative.Animated.add(touchX, _reactNative.Animated.multiply(new _reactNative.Animated.Value(-1), dragX));

        var dragOffsetFromOnStartPosition = startPositionX.interpolate({
          inputRange: [drawerWidth - 1, drawerWidth, drawerWidth + 1],
          outputRange: [0, 0, 1]
        });
        translationX = _reactNative.Animated.add(dragX, dragOffsetFromOnStartPosition);
      }

      _this.openValue = _reactNative.Animated.add(translationX, drawerTranslation).interpolate({
        inputRange: [0, drawerWidth],
        outputRange: [0, 1],
        extrapolate: 'clamp'
      });
      var gestureOptions = {
        useNativeDriver: props.useNativeAnimations
      };

      if (_this.props.onDrawerSlide) {
        gestureOptions.listener = function (ev) {
          var _this$props$onDrawerS, _this$props;

          var translationX = Math.floor(Math.abs(ev.nativeEvent.translationX));
          var position = translationX / _this.state.containerWidth;
          (_this$props$onDrawerS = (_this$props = _this.props).onDrawerSlide) === null || _this$props$onDrawerS === void 0 ? void 0 : _this$props$onDrawerS.call(_this$props, position);
        };
      }

      _this.onGestureEvent = _reactNative.Animated.event([{
        nativeEvent: {
          translationX: dragXValue,
          x: touchXValue
        }
      }], gestureOptions);
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "handleContainerLayout", function (_ref) {
      var nativeEvent = _ref.nativeEvent;

      _this.setState({
        containerWidth: nativeEvent.layout.width
      });
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "emitStateChanged", function (newState, drawerWillShow) {
      var _this$props$onDrawerS2, _this$props2;

      (_this$props$onDrawerS2 = (_this$props2 = _this.props).onDrawerStateChanged) === null || _this$props$onDrawerS2 === void 0 ? void 0 : _this$props$onDrawerS2.call(_this$props2, newState, drawerWillShow);
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "openingHandlerStateChange", function (_ref2) {
      var nativeEvent = _ref2.nativeEvent;

      if (nativeEvent.oldState === _State.State.ACTIVE) {
        _this.handleRelease({
          nativeEvent: nativeEvent
        });
      } else if (nativeEvent.state === _State.State.ACTIVE) {
        _this.emitStateChanged(DRAGGING, false);

        if (_this.props.keyboardDismissMode === 'on-drag') {
          _reactNative.Keyboard.dismiss();
        }

        if (_this.props.hideStatusBar) {
          _reactNative.StatusBar.setHidden(true, _this.props.statusBarAnimation || 'slide');
        }
      }
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "onTapHandlerStateChange", function (_ref3) {
      var nativeEvent = _ref3.nativeEvent;

      if (_this.drawerShown && nativeEvent.oldState === _State.State.ACTIVE && _this.props.drawerLockMode !== 'locked-open') {
        _this.closeDrawer();
      }
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "handleRelease", function (_ref4) {
      var nativeEvent = _ref4.nativeEvent;
      var _this$props6 = _this.props,
          drawerWidth = _this$props6.drawerWidth,
          drawerPosition = _this$props6.drawerPosition,
          drawerType = _this$props6.drawerType;
      var containerWidth = _this.state.containerWidth;
      var dragX = nativeEvent.translationX,
          velocityX = nativeEvent.velocityX,
          touchX = nativeEvent.x;

      if (drawerPosition !== 'left') {
        dragX = -dragX;
        touchX = containerWidth - touchX;
        velocityX = -velocityX;
      }

      var gestureStartX = touchX - dragX;
      var dragOffsetBasedOnStart = 0;

      if (drawerType === 'front') {
        dragOffsetBasedOnStart = gestureStartX > drawerWidth ? gestureStartX - drawerWidth : 0;
      }

      var startOffsetX = dragX + dragOffsetBasedOnStart + (_this.drawerShown ? drawerWidth : 0);
      var projOffsetX = startOffsetX + DRAG_TOSS * velocityX;
      var shouldOpen = projOffsetX > drawerWidth / 2;

      if (shouldOpen) {
        _this.animateDrawer(startOffsetX, drawerWidth, velocityX);
      } else {
        _this.animateDrawer(startOffsetX, 0, velocityX);
      }
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "updateShowing", function (showing) {
      var _this$accessibilityIs, _this$pointerEventsVi, _this$panGestureHandl;

      _this.drawerShown = showing;
      (_this$accessibilityIs = _this.accessibilityIsModalView.current) === null || _this$accessibilityIs === void 0 ? void 0 : _this$accessibilityIs.setNativeProps({
        accessibilityViewIsModal: showing
      });
      (_this$pointerEventsVi = _this.pointerEventsView.current) === null || _this$pointerEventsVi === void 0 ? void 0 : _this$pointerEventsVi.setNativeProps({
        pointerEvents: showing ? 'auto' : 'none'
      });
      var _this$props7 = _this.props,
          drawerPosition = _this$props7.drawerPosition,
          minSwipeDistance = _this$props7.minSwipeDistance,
          edgeWidth = _this$props7.edgeWidth;
      var fromLeft = drawerPosition === 'left';
      var gestureOrientation = (fromLeft ? 1 : -1) * (_this.drawerShown ? -1 : 1);
      var hitSlop = fromLeft ? {
        left: 0,
        width: showing ? undefined : edgeWidth
      } : {
        right: 0,
        width: showing ? undefined : edgeWidth
      };
      (_this$panGestureHandl = _this.panGestureHandler.current) === null || _this$panGestureHandl === void 0 ? void 0 : _this$panGestureHandl.setNativeProps({
        hitSlop: hitSlop,
        activeOffsetX: gestureOrientation * minSwipeDistance
      });
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "animateDrawer", function (fromValue, toValue, velocity, speed) {
      _this.state.dragX.setValue(0);

      _this.state.touchX.setValue(_this.props.drawerPosition === 'left' ? 0 : _this.state.containerWidth);

      if (fromValue != null) {
        var nextFramePosition = fromValue;

        if (_this.props.useNativeAnimations) {
          if (fromValue < toValue && velocity > 0) {
            nextFramePosition = Math.min(fromValue + velocity / 60.0, toValue);
          } else if (fromValue > toValue && velocity < 0) {
            nextFramePosition = Math.max(fromValue + velocity / 60.0, toValue);
          }
        }

        _this.state.drawerTranslation.setValue(nextFramePosition);
      }

      var willShow = toValue !== 0;

      _this.updateShowing(willShow);

      _this.emitStateChanged(SETTLING, willShow);

      if (_this.props.hideStatusBar) {
        _reactNative.StatusBar.setHidden(willShow, _this.props.statusBarAnimation || 'slide');
      }

      _reactNative.Animated.spring(_this.state.drawerTranslation, {
        velocity: velocity,
        bounciness: 0,
        toValue: toValue,
        useNativeDriver: _this.props.useNativeAnimations,
        speed: speed !== null && speed !== void 0 ? speed : undefined
      }).start(function (_ref5) {
        var finished = _ref5.finished;

        if (finished) {
          _this.emitStateChanged(IDLE, willShow);

          if (willShow) {
            var _this$props$onDrawerO, _this$props3;

            (_this$props$onDrawerO = (_this$props3 = _this.props).onDrawerOpen) === null || _this$props$onDrawerO === void 0 ? void 0 : _this$props$onDrawerO.call(_this$props3);
          } else {
            var _this$props$onDrawerC, _this$props4;

            (_this$props$onDrawerC = (_this$props4 = _this.props).onDrawerClose) === null || _this$props$onDrawerC === void 0 ? void 0 : _this$props$onDrawerC.call(_this$props4);
          }
        }
      });
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "openDrawer", function () {
      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      _this.animateDrawer(undefined, _this.props.drawerWidth, options.velocity ? options.velocity : 0);

      _this.forceUpdate();
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "closeDrawer", function () {
      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

      _this.animateDrawer(undefined, 0, options.velocity ? options.velocity : 0);

      _this.forceUpdate();
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "renderOverlay", function () {
      (0, _invariant.default)(_this.openValue, 'should be set');

      var overlayOpacity = _this.openValue.interpolate({
        inputRange: [0, 1],
        outputRange: [0, 1],
        extrapolate: 'clamp'
      });

      var dynamicOverlayStyles = {
        opacity: overlayOpacity,
        backgroundColor: _this.props.overlayColor
      };
      return React.createElement(_gestureHandlers.TapGestureHandler, {
        onHandlerStateChange: _this.onTapHandlerStateChange
      }, React.createElement(_reactNative.Animated.View, {
        pointerEvents: _this.drawerShown ? 'auto' : 'none',
        ref: _this.pointerEventsView,
        style: [styles.overlay, dynamicOverlayStyles]
      }));
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "renderDrawer", function () {
      var _this$props8 = _this.props,
          drawerBackgroundColor = _this$props8.drawerBackgroundColor,
          drawerWidth = _this$props8.drawerWidth,
          drawerPosition = _this$props8.drawerPosition,
          drawerType = _this$props8.drawerType,
          drawerContainerStyle = _this$props8.drawerContainerStyle,
          contentContainerStyle = _this$props8.contentContainerStyle;
      var fromLeft = drawerPosition === 'left';
      var drawerSlide = drawerType !== 'back';
      var containerSlide = drawerType !== 'front';
      var reverseContentDirection = _reactNative.I18nManager.isRTL ? fromLeft : !fromLeft;
      var dynamicDrawerStyles = {
        backgroundColor: drawerBackgroundColor,
        width: drawerWidth
      };
      var openValue = _this.openValue;
      (0, _invariant.default)(openValue, 'should be set');
      var containerStyles;

      if (containerSlide) {
        var containerTranslateX = openValue.interpolate({
          inputRange: [0, 1],
          outputRange: fromLeft ? [0, drawerWidth] : [0, -drawerWidth],
          extrapolate: 'clamp'
        });
        containerStyles = {
          transform: [{
            translateX: containerTranslateX
          }]
        };
      }

      var drawerTranslateX = 0;

      if (drawerSlide) {
        var closedDrawerOffset = fromLeft ? -drawerWidth : drawerWidth;
        drawerTranslateX = openValue.interpolate({
          inputRange: [0, 1],
          outputRange: [closedDrawerOffset, 0],
          extrapolate: 'clamp'
        });
      }

      var drawerStyles = {
        transform: [{
          translateX: drawerTranslateX
        }],
        flexDirection: reverseContentDirection ? 'row-reverse' : 'row'
      };
      return React.createElement(_reactNative.Animated.View, {
        style: styles.main,
        onLayout: _this.handleContainerLayout
      }, React.createElement(_reactNative.Animated.View, {
        style: [drawerType === 'front' ? styles.containerOnBack : styles.containerInFront, containerStyles, contentContainerStyle],
        importantForAccessibility: _this.drawerShown ? 'no-hide-descendants' : 'yes'
      }, typeof _this.props.children === 'function' ? _this.props.children(_this.openValue) : _this.props.children, _this.renderOverlay()), React.createElement(_reactNative.Animated.View, {
        pointerEvents: "box-none",
        ref: _this.accessibilityIsModalView,
        accessibilityViewIsModal: _this.drawerShown,
        style: [styles.drawerContainer, drawerStyles, drawerContainerStyle]
      }, React.createElement(_reactNative.View, {
        style: dynamicDrawerStyles
      }, _this.props.renderNavigationView(_this.openValue))));
    });

    _defineProperty((0, _assertThisInitialized2.default)(_this), "setPanGestureRef", function (ref) {
      var _this$props$onGesture, _this$props5;

      _this.panGestureHandler.current = ref;
      (_this$props$onGesture = (_this$props5 = _this.props).onGestureRef) === null || _this$props$onGesture === void 0 ? void 0 : _this$props$onGesture.call(_this$props5, ref);
    });

    var _dragX = new _reactNative.Animated.Value(0);

    var _touchX = new _reactNative.Animated.Value(0);

    var _drawerTranslation = new _reactNative.Animated.Value(0);

    _this.state = {
      dragX: _dragX,
      touchX: _touchX,
      drawerTranslation: _drawerTranslation,
      containerWidth: 0
    };

    _this.updateAnimatedEvent(_props, _this.state);

    return _this;
  }

  (0, _createClass2.default)(DrawerLayout, [{
    key: "UNSAFE_componentWillUpdate",
    value: function UNSAFE_componentWillUpdate(props, state) {
      if (this.props.drawerPosition !== props.drawerPosition || this.props.drawerWidth !== props.drawerWidth || this.props.drawerType !== props.drawerType || this.state.containerWidth !== state.containerWidth) {
        this.updateAnimatedEvent(props, state);
      }
    }
  }, {
    key: "render",
    value: function render() {
      var _this$props9 = this.props,
          drawerPosition = _this$props9.drawerPosition,
          drawerLockMode = _this$props9.drawerLockMode,
          edgeWidth = _this$props9.edgeWidth,
          minSwipeDistance = _this$props9.minSwipeDistance;
      var fromLeft = drawerPosition === 'left';
      var gestureOrientation = (fromLeft ? 1 : -1) * (this.drawerShown ? -1 : 1);
      var hitSlop = fromLeft ? {
        left: 0,
        width: this.drawerShown ? undefined : edgeWidth
      } : {
        right: 0,
        width: this.drawerShown ? undefined : edgeWidth
      };
      return React.createElement(_gestureHandlers.PanGestureHandler, {
        ref: this.setPanGestureRef,
        hitSlop: hitSlop,
        activeOffsetX: gestureOrientation * minSwipeDistance,
        failOffsetY: [-15, 15],
        onGestureEvent: this.onGestureEvent,
        onHandlerStateChange: this.openingHandlerStateChange,
        enableTrackpadTwoFingerGesture: this.props.enableTrackpadTwoFingerGesture,
        enabled: drawerLockMode !== 'locked-closed' && drawerLockMode !== 'locked-open'
      }, this.renderDrawer());
    }
  }]);
  return DrawerLayout;
}(React.Component);

exports.default = DrawerLayout;

_defineProperty(DrawerLayout, "defaultProps", {
  drawerWidth: 200,
  drawerPosition: 'left',
  useNativeAnimations: true,
  drawerType: 'front',
  edgeWidth: 20,
  minSwipeDistance: 3,
  overlayColor: 'rgba(0, 0, 0, 0.7)',
  drawerLockMode: 'unlocked',
  enableTrackpadTwoFingerGesture: false
});

_defineProperty(DrawerLayout, "positions", {
  Left: 'left',
  Right: 'right'
});

var styles = _reactNative.StyleSheet.create({
  drawerContainer: (0, _extends2.default)({}, _reactNative.StyleSheet.absoluteFillObject, {
    zIndex: 1001,
    flexDirection: 'row'
  }),
  containerInFront: (0, _extends2.default)({}, _reactNative.StyleSheet.absoluteFillObject, {
    zIndex: 1002
  }),
  containerOnBack: (0, _extends2.default)({}, _reactNative.StyleSheet.absoluteFillObject),
  main: {
    flex: 1,
    zIndex: 0,
    overflow: 'hidden'
  },
  overlay: (0, _extends2.default)({}, _reactNative.StyleSheet.absoluteFillObject, {
    zIndex: 1000
  })
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkRyYXdlckxheW91dC50c3giXSwibmFtZXMiOlsiRFJBR19UT1NTIiwiSURMRSIsIkRSQUdHSU5HIiwiU0VUVExJTkciLCJEcmF3ZXJMYXlvdXQiLCJDb21wb25lbnQiLCJkcmF3ZXJXaWR0aCIsImRyYXdlclBvc2l0aW9uIiwidXNlTmF0aXZlQW5pbWF0aW9ucyIsImRyYXdlclR5cGUiLCJlZGdlV2lkdGgiLCJtaW5Td2lwZURpc3RhbmNlIiwib3ZlcmxheUNvbG9yIiwiZHJhd2VyTG9ja01vZGUiLCJlbmFibGVUcmFja3BhZFR3b0Zpbmdlckdlc3R1cmUiLCJjb25zdHJ1Y3RvciIsImRyYWdYIiwiQW5pbWF0ZWQiLCJ0b3VjaFgiLCJkcmF3ZXJUcmFuc2xhdGlvbiIsImNvbnRhaW5lcldpZHRoIiwiVU5TQUZFX2NvbXBvbmVudFdpbGxVcGRhdGUiLCJwcm9wcyIsInN0YXRlIiwiUmVhY3QiLCJMZWZ0IiwiUmlnaHQiLCJ0b3VjaFhWYWx1ZSIsInRyYW5zbGF0aW9uWCIsInN0YXJ0UG9zaXRpb25YIiwiZHJhZ09mZnNldEZyb21PblN0YXJ0UG9zaXRpb24iLCJpbnB1dFJhbmdlIiwib3V0cHV0UmFuZ2UiLCJleHRyYXBvbGF0ZSIsImdlc3R1cmVPcHRpb25zIiwidXNlTmF0aXZlRHJpdmVyIiwiZXYiLCJNYXRoIiwicG9zaXRpb24iLCJuYXRpdmVFdmVudCIsIngiLCJ3aWR0aCIsIlN0YXRlIiwiS2V5Ym9hcmQiLCJTdGF0dXNCYXIiLCJ2ZWxvY2l0eVgiLCJnZXN0dXJlU3RhcnRYIiwiZHJhZ09mZnNldEJhc2VkT25TdGFydCIsInN0YXJ0T2Zmc2V0WCIsInByb2pPZmZzZXRYIiwic2hvdWxkT3BlbiIsInNob3dpbmciLCJhY2Nlc3NpYmlsaXR5Vmlld0lzTW9kYWwiLCJwb2ludGVyRXZlbnRzIiwiZnJvbUxlZnQiLCJnZXN0dXJlT3JpZW50YXRpb24iLCJoaXRTbG9wIiwibGVmdCIsInJpZ2h0IiwiYWN0aXZlT2Zmc2V0WCIsImZyb21WYWx1ZSIsIm5leHRGcmFtZVBvc2l0aW9uIiwidmVsb2NpdHkiLCJ3aWxsU2hvdyIsInRvVmFsdWUiLCJib3VuY2luZXNzIiwic3BlZWQiLCJ1bmRlZmluZWQiLCJmaW5pc2hlZCIsIm9wdGlvbnMiLCJvdmVybGF5T3BhY2l0eSIsImR5bmFtaWNPdmVybGF5U3R5bGVzIiwib3BhY2l0eSIsImJhY2tncm91bmRDb2xvciIsIm9uVGFwSGFuZGxlclN0YXRlQ2hhbmdlIiwic3R5bGVzIiwiY29udGVudENvbnRhaW5lclN0eWxlIiwiZHJhd2VyU2xpZGUiLCJjb250YWluZXJTbGlkZSIsInJldmVyc2VDb250ZW50RGlyZWN0aW9uIiwiSTE4bk1hbmFnZXIiLCJkeW5hbWljRHJhd2VyU3R5bGVzIiwib3BlblZhbHVlIiwiY29udGFpbmVyVHJhbnNsYXRlWCIsImNvbnRhaW5lclN0eWxlcyIsInRyYW5zZm9ybSIsInRyYW5zbGF0ZVgiLCJkcmF3ZXJUcmFuc2xhdGVYIiwiY2xvc2VkRHJhd2VyT2Zmc2V0IiwiZHJhd2VyU3R5bGVzIiwiZmxleERpcmVjdGlvbiIsImhhbmRsZUNvbnRhaW5lckxheW91dCIsInJlZiIsInJlbmRlciIsImRyYXdlckNvbnRhaW5lciIsIlN0eWxlU2hlZXQiLCJ6SW5kZXgiLCJjb250YWluZXJJbkZyb250IiwiY29udGFpbmVyT25CYWNrIiwiYWJzb2x1dGVGaWxsT2JqZWN0IiwibWFpbiIsImZsZXgiLCJvdmVyZmxvdyIsIm92ZXJsYXkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVFBLElBQUEsS0FBQSxHQUFBLHVCQUFBLENBQUEsT0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBOztBQUVBLElBQUEsVUFBQSxHQUFBLHNCQUFBLENBQUEsT0FBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBOztBQUNBLElBQUEsWUFBQSxHQUFBLE9BQUEsQ0FBQSxjQUFBLENBQUE7O0FBY0EsSUFBQSxnQkFBQSxHQUFBLE9BQUEsQ0FBQSw2QkFBQSxDQUFBOztBQVFBLElBQUEsTUFBQSxHQUFB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O0FBRUxDLElBQUFBLE1BQU0sRUFBRTtBQUZIO0FBbEJ3QixDQUFsQixDQUFmIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhpcyBjb21wb25lbnQgaXMgYmFzZWQgb24gUk4ncyBEcmF3ZXJMYXlvdXRBbmRyb2lkIEFQSVxuLy9cbi8vIEl0IHBlcmhhcHMgZGVzZXJ2ZXMgdG8gYmUgcHV0IGluIGEgc2VwYXJhdGUgcmVwbywgYnV0IHNpbmNlIGl0IHJlbGllc1xuLy8gb24gcmVhY3QtbmF0aXZlLWdlc3R1cmUtaGFuZGxlciBsaWJyYXJ5IHdoaWNoIGlzbid0IHZlcnkgcG9wdWxhciBhdCB0aGVcbi8vIG1vbWVudCBJIGRlY2lkZWQgdG8ga2VlcCBpdCBoZXJlIGZvciB0aGUgdGltZSBiZWluZy4gSXQgd2lsbCBhbGxvdyB1c1xuLy8gdG8gbW92ZSBmYXN0ZXIgYW5kIGZpeCBpc3N1ZXMgdGhhdCBtYXkgYXJpc2UgaW4gZ2VzdHVyZSBoYW5kbGVyIGxpYnJhcnlcbi8vIHRoYXQgY291bGQgYmUgZm91bmQgd2hlbiB1c2luZyB0aGUgZHJhd2VyIGNvbXBvbmVudFxuXG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5pbXBvcnQge1xuICBBbmltYXRlZCxcbiAgU3R5bGVTaGVldCxcbiAgVmlldyxcbiAgS2V5Ym9hcmQsXG4gIFN0YXR1c0JhcixcbiAgSTE4bk1hbmFnZXIsXG4gIFN0YXR1c0JhckFuaW1hdGlvbixcbiAgU3R5bGVQcm9wLFxuICBWaWV3U3R5bGUsXG4gIExheW91dENoYW5nZUV2ZW50LFxuICBOYXRpdmVTeW50aGV0aWNFdmVudCxcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcblxuaW1wb3J0IHtcbiAgR2VzdHVyZUV2ZW50LFxuICBQYW5HZXN0dXJlSGFuZGxlcixcbiAgUGFuR2VzdHVyZUhhbmRsZXJFdmVudFBheWxvYWQsXG4gIFRhcEdlc3R1cmVIYW5kbGVyLFxuICBIYW5kbGVyU3RhdGVDaGFuZ2VFdmVudCxcbiAgVGFwR2VzdHVyZUhhbmRsZXJFdmVudFBheWxvYWQsXG59IGZyb20gJy4uL2hhbmRsZXJzL2dlc3R1cmVIYW5kbGVycyc7XG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gJy4uL1N0YXRlJztcblxuY29uc3QgRFJBR19UT1NTID0gMC4wNTtcblxuY29uc3QgSURMRTogRHJhd2VyU3RhdGUgPSAnSWRsZSc7XG5jb25zdCBEUkFHR0lORzogRHJhd2VyU3RhdGUgPSAnRHJhZ2dpbmcnO1xuY29uc3QgU0VUVExJTkc6IERyYXdlclN0YXRlID0gJ1NldHRsaW5nJztcblxuZXhwb3J0IHR5cGUgRHJhd2VyUG9zaXRpb24gPSAnbGVmdCcgfCAncmlnaHQnO1xuXG5leHBvcnQgdHlwZSBEcmF3ZXJTdGF0ZSA9ICdJZGxlJyB8ICdEcmFnZ2luZycgfCAnU2V0dGxpbmcnO1xuXG5leHBvcnQgdHlwZSBEcmF3ZXJUeXBlID0gJ2Zyb250JyB8ICdiYWNrJyB8ICdzbGlkZSc7XG5cbmV4cG9ydCB0eXBlIERyYXdlckxvY2tNb2RlID0gJ3VubG9ja2VkJyB8ICdsb2NrZWQtY2xvc2VkJyB8ICdsb2NrZWQtb3Blbic7XG5cbmV4cG9ydCB0eXBlIERyYXdlcktleWJvYXJkRGlzbWlzc01vZGUgPSAnbm9uZScgfCAnb24tZHJhZyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHJhd2VyTGF5b3V0UHJvcHMge1xuICByZW5kZXJOYXZpZ2F0aW9uVmlldzogKFxuICAgIHByb2dyZXNzQW5pbWF0ZWRWYWx1ZTogQW5pbWF0ZWQuVmFsdWVcbiAgKSA9PiBSZWFjdC5SZWFjdE5vZGU7XG4gIGRyYXdlclBvc2l0aW9uPzogRHJhd2VyUG9zaXRpb247XG4gIGRyYXdlcldpZHRoPzogbnVtYmVyO1xuICBkcmF3ZXJCYWNrZ3JvdW5kQ29sb3I/OiBzdHJpbmc7XG4gIGRyYXdlckxvY2tNb2RlPzogRHJhd2VyTG9ja01vZGU7XG4gIGtleWJvYXJkRGlzbWlzc01vZGU/OiBEcmF3ZXJLZXlib2FyZERpc21pc3NNb2RlO1xuICBvbkRyYXdlckNsb3NlPzogKCkgPT4gdm9pZDtcbiAgb25EcmF3ZXJPcGVuPzogKCkgPT4gdm9pZDtcbiAgb25EcmF3ZXJTdGF0ZUNoYW5nZWQ/OiAoXG4gICAgbmV3U3RhdGU6IERyYXdlclN0YXRlLFxuICAgIGRyYXdlcldpbGxTaG93OiBib29sZWFuXG4gICkgPT4gdm9pZDtcbiAgdXNlTmF0aXZlQW5pbWF0aW9ucz86IGJvb2xlYW47XG5cbiAgZHJhd2VyVHlwZT86IERyYXdlclR5cGU7XG4gIGVkZ2VXaWR0aD86IG51bWJlcjtcbiAgbWluU3dpcGVEaXN0YW5jZT86IG51bWJlcjtcbiAgaGlkZVN0YXR1c0Jhcj86IGJvb2xlYW47XG4gIHN0YXR1c0JhckFuaW1hdGlvbj86IFN0YXR1c0JhckFuaW1hdGlvbjtcbiAgb3ZlcmxheUNvbG9yPzogc3RyaW5nO1xuICBjb250ZW50Q29udGFpbmVyU3R5bGU/OiBTdHlsZVByb3A8Vmlld1N0eWxlPjtcbiAgZHJhd2VyQ29udGFpbmVyU3R5bGU/OiBTdHlsZVByb3A8Vmlld1N0eWxlPjtcbiAgZW5hYmxlVHJhY2twYWRUd29GaW5nZXJHZXN0dXJlPzogYm9vbGVhbjtcbiAgb25EcmF3ZXJTbGlkZT86IChwb3NpdGlvbjogbnVtYmVyKSA9PiB2b2lkO1xuICBvbkdlc3R1cmVSZWY/OiAocmVmOiBQYW5HZXN0dXJlSGFuZGxlcikgPT4gdm9pZDtcbn1cblxuZXhwb3J0IHR5cGUgRHJhd2VyTGF5b3V0U3RhdGUgPSB7XG4gIGRyYWdYOiBBbmltYXRlZC5WYWx1ZTtcbiAgdG91Y2hYOiBBbmltYXRlZC5WYWx1ZTtcbiAgZHJhd2VyVHJhbnNsYXRpb246IEFuaW1hdGVkLlZhbHVlO1xuICBjb250YWluZXJXaWR0aDogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgRHJhd2VyTW92ZW1lbnRPcHRpb24gPSB7XG4gIHZlbG9jaXR5PzogbnVtYmVyO1xuICBzcGVlZD86IG51bWJlcjtcbn07XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEcmF3ZXJMYXlvdXQgZXh0ZW5kcyBDb21wb25lbnQ8XG4gIERyYXdlckxheW91dFByb3BzLFxuICBEcmF3ZXJMYXlvdXRTdGF0ZVxuPiB7XG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgZHJhd2VyV2lkdGg6IDIwMCxcbiAgICBkcmF3ZXJQb3NpdGlvbjogJ2xlZnQnLFxuICAgIHVzZU5hdGl2ZUFuaW1hdGlvbnM6IHRydWUsXG4gICAgZHJhd2VyVHlwZTogJ2Zyb250JyxcbiAgICBlZGdlV2lkdGg6IDIwLFxuICAgIG1pblN3aXBlRGlzdGFuY2U6IDMsXG4gICAgb3ZlcmxheUNvbG9yOiAncmdiYSgwLCAwLCAwLCAwLjcpJyxcbiAgICBkcmF3ZXJMb2NrTW9kZTogJ3VubG9ja2VkJyxcbiAgICBlbmFibGVUcmFja3BhZFR3b0Zpbmdlckdlc3R1cmU6IGZhbHNlLFxuICB9O1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBEcmF3ZXJMYXlvdXRQcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcblxuICAgIGNvbnN0IGRyYWdYID0gbmV3IEFuaW1hdGVkLlZhbHVlKDApO1xuICAgIGNvbnN0IHRvdWNoWCA9IG5ldyBBbmltYXRlZC5WYWx1ZSgwKTtcbiAgICBjb25zdCBkcmF3ZXJUcmFuc2xhdGlvbiA9IG5ldyBBbmltYXRlZC5WYWx1ZSgwKTtcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBkcmFnWCxcbiAgICAgIHRvdWNoWCxcbiAgICAgIGRyYXdlclRyYW5zbGF0aW9uLFxuICAgICAgY29udGFpbmVyV2lkdGg6IDAsXG4gICAgfTtcblxuICAgIHRoaXMudXBkYXRlQW5pbWF0ZWRFdmVudChwcm9wcywgdGhpcy5zdGF0ZSk7XG4gIH1cblxuICBVTlNBRkVfY29tcG9uZW50V2lsbFVwZGF0ZShcbiAgICBwcm9wczogRHJhd2VyTGF5b3V0UHJvcHMsXG4gICAgc3RhdGU6IERyYXdlckxheW91dFN0YXRlXG4gICkge1xuICAgIGlmIChcbiAgICAgIHRoaXMucHJvcHMuZHJhd2VyUG9zaXRpb24gIT09IHByb3BzLmRyYXdlclBvc2l0aW9uIHx8XG4gICAgICB0aGlzLnByb3BzLmRyYXdlcldpZHRoICE9PSBwcm9wcy5kcmF3ZXJXaWR0aCB8fFxuICAgICAgdGhpcy5wcm9wcy5kcmF3ZXJUeXBlICE9PSBwcm9wcy5kcmF3ZXJUeXBlIHx8XG4gICAgICB0aGlzLnN0YXRlLmNvbnRhaW5lcldpZHRoICE9PSBzdGF0ZS5jb250YWluZXJXaWR0aFxuICAgICkge1xuICAgICAgdGhpcy51cGRhdGVBbmltYXRlZEV2ZW50KHByb3BzLCBzdGF0ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvcGVuVmFsdWU/OiBBbmltYXRlZC5BbmltYXRlZEludGVycG9sYXRpb247XG4gIHByaXZhdGUgb25HZXN0dXJlRXZlbnQ/OiAoXG4gICAgZXZlbnQ6IEdlc3R1cmVFdmVudDxQYW5HZXN0dXJlSGFuZGxlckV2ZW50UGF5bG9hZD5cbiAgKSA9PiB2b2lkO1xuICBwcml2YXRlIGFjY2Vzc2liaWxpdHlJc01vZGFsVmlldyA9IFJlYWN0LmNyZWF0ZVJlZjxWaWV3PigpO1xuICBwcml2YXRlIHBvaW50ZXJFdmVudHNWaWV3ID0gUmVhY3QuY3JlYXRlUmVmPFZpZXc+KCk7XG4gIHByaXZhdGUgcGFuR2VzdHVyZUhhbmRsZXIgPSBSZWFjdC5jcmVhdGVSZWY8UGFuR2VzdHVyZUhhbmRsZXIgfCBudWxsPigpO1xuICBwcml2YXRlIGRyYXdlclNob3duID0gZmFsc2U7XG5cbiAgc3RhdGljIHBvc2l0aW9ucyA9IHtcbiAgICBMZWZ0OiAnbGVmdCcsXG4gICAgUmlnaHQ6ICdyaWdodCcsXG4gIH07XG5cbiAgcHJpdmF0ZSB1cGRhdGVBbmltYXRlZEV2ZW50ID0gKFxuICAgIHByb3BzOiBEcmF3ZXJMYXlvdXRQcm9wcyxcbiAgICBzdGF0ZTogRHJhd2VyTGF5b3V0U3RhdGVcbiAgKSA9PiB7XG4gICAgLy8gRXZlbnQgZGVmaW5pdGlvbiBpcyBiYXNlZCBvblxuICAgIGNvbnN0IHsgZHJhd2VyUG9zaXRpb24sIGRyYXdlcldpZHRoLCBkcmF3ZXJUeXBlIH0gPSBwcm9wcztcbiAgICBjb25zdCB7XG4gICAgICBkcmFnWDogZHJhZ1hWYWx1ZSxcbiAgICAgIHRvdWNoWDogdG91Y2hYVmFsdWUsXG4gICAgICBkcmF3ZXJUcmFuc2xhdGlvbixcbiAgICAgIGNvbnRhaW5lcldpZHRoLFxuICAgIH0gPSBzdGF0ZTtcblxuICAgIGxldCBkcmFnWCA9IGRyYWdYVmFsdWU7XG4gICAgbGV0IHRvdWNoWCA9IHRvdWNoWFZhbHVlO1xuXG4gICAgaWYgKGRyYXdlclBvc2l0aW9uICE9PSAnbGVmdCcpIHtcbiAgICAgIC8vIE1vc3Qgb2YgdGhlIGNvZGUgaXMgd3JpdHRlbiBpbiBhIHdheSB0byBoYW5kbGUgbGVmdC1zaWRlIGRyYXdlci5cbiAgICAgIC8vIEluIG9yZGVyIHRvIGhhbmRsZSByaWdodC1zaWRlIGRyYXdlciB0aGUgb25seSB0aGluZyB3ZSBuZWVkIHRvXG4gICAgICAvLyBkbyBpcyB0byByZXZlcnNlIGV2ZW50cyBjb21pbmcgZnJvbSBnZXN0dXJlIGhhbmRsZXIgaW4gYSB3YXkgdGhleVxuICAgICAgLy8gZW11bGF0ZSBsZWZ0LXNpZGUgZHJhd2VyIGdlc3R1cmVzLiBFLmcuIGRyYWdYIGlzIHNpbXBseSAtZHJhZ1gsIGFuZFxuICAgICAgLy8gdG91Y2hYIGlzIGNhbHVsY2F0ZWQgYnkgc3VidHJhY2luZyByZWFsIHRvdWNoWCBmcm9tIHRoZSB3aWR0aCBvZiB0aGVcbiAgICAgIC8vIGNvbnRhaW5lciAoc3VjaCB0aGF0IHdoZW4gdG91Y2ggaGFwcGVucyBhdCB0aGUgcmlnaHQgZWRnZSB0aGUgdmFsdWVcbiAgICAgIC8vIGlzIHNpbXBseSAwKVxuICAgICAgZHJhZ1ggPSBBbmltYXRlZC5tdWx0aXBseShcbiAgICAgICAgbmV3IEFuaW1hdGVkLlZhbHVlKC0xKSxcbiAgICAgICAgZHJhZ1hWYWx1ZVxuICAgICAgKSBhcyBBbmltYXRlZC5WYWx1ZTsgLy8gVE9ETyhUUyk6IChmb3IgYWxsIFwiYXNcIiBpbiB0aGlzIGZpbGUpIG1ha2Ugc3VyZSB3ZSBjYW4gbWFwIHRoaXNcbiAgICAgIHRvdWNoWCA9IEFuaW1hdGVkLmFkZChcbiAgICAgICAgbmV3IEFuaW1hdGVkLlZhbHVlKGNvbnRhaW5lcldpZHRoKSxcbiAgICAgICAgQW5pbWF0ZWQubXVsdGlwbHkobmV3IEFuaW1hdGVkLlZhbHVlKC0xKSwgdG91Y2hYVmFsdWUpXG4gICAgICApIGFzIEFuaW1hdGVkLlZhbHVlOyAvLyBUT0RPKFRTKTogbWFrZSBzdXJlIHdlIGNhbiBtYXAgdGhpcztcbiAgICAgIHRvdWNoWFZhbHVlLnNldFZhbHVlKGNvbnRhaW5lcldpZHRoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdG91Y2hYVmFsdWUuc2V0VmFsdWUoMCk7XG4gICAgfVxuXG4gICAgLy8gV2hpbGUgY2xvc2luZyB0aGUgZHJhd2VyIHdoZW4gdXNlciBzdGFydHMgZ2VzdHVyZSBvdXRzaWRlIG9mIGl0cyBhcmVhIChpbiBncmV5ZWRcbiAgICAvLyBvdXQgcGFydCBvZiB0aGUgd2luZG93KSwgd2Ugd2FudCB0aGUgZHJhd2VyIHRvIGZvbGxvdyBvbmx5IG9uY2UgZmluZ2VyIHJlYWNoZXMgdGhlXG4gICAgLy8gZWRnZSBvZiB0aGUgZHJhd2VyLlxuICAgIC8vIEUuZy4gb24gdGhlIGRpYWdyYW0gYmVsb3cgZHJhd2VyIGlzIGlsbHVzdHJhdGUgYnkgWCBzaWducyBhbmQgdGhlIGdyZXllZCBvdXQgYXJlYSBieVxuICAgIC8vIGRvdHMuIFRoZSB0b3VjaCBnZXN0dXJlIHN0YXJ0cyBhdCAnKicgYW5kIG1vdmVzIGxlZnQsIHRvdWNoIHBhdGggaXMgaW5kaWNhdGVkIGJ5XG4gICAgLy8gYW4gYXJyb3cgcG9pbnRpbmcgbGVmdFxuICAgIC8vIDEpICstLS0tLS0tLS0tLS0tLS0rIDIpICstLS0tLS0tLS0tLS0tLS0rIDMpICstLS0tLS0tLS0tLS0tLS0rIDQpICstLS0tLS0tLS0tLS0tLS0rXG4gICAgLy8gICAgfFhYWFhYWFhYfC4uLi4uLnwgICAgfFhYWFhYWFhYfC4uLi4uLnwgICAgfFhYWFhYWFhYfC4uLi4uLnwgICAgfFhYWFhYfC4uLi4uLi4uLnxcbiAgICAvLyAgICB8WFhYWFhYWFh8Li4uLi4ufCAgICB8WFhYWFhYWFh8Li4uLi4ufCAgICB8WFhYWFhYWFh8Li4uLi4ufCAgICB8WFhYWFh8Li4uLi4uLi4ufFxuICAgIC8vICAgIHxYWFhYWFhYWHwuLi4uLi58ICAgIHxYWFhYWFhYWHwuLi4uLi58ICAgIHxYWFhYWFhYWHwuLi4uLi58ICAgIHxYWFhYWHwuLi4uLi4uLi58XG4gICAgLy8gICAgfFhYWFhYWFhYfC4uLi4uLnwgICAgfFhYWFhYWFhYfC48LSouLnwgICAgfFhYWFhYWFhYfDwtLSouLnwgICAgfFhYWFhYfDwtLS0tLSouLnxcbiAgICAvLyAgICB8WFhYWFhYWFh8Li4uLi4ufCAgICB8WFhYWFhYWFh8Li4uLi4ufCAgICB8WFhYWFhYWFh8Li4uLi4ufCAgICB8WFhYWFh8Li4uLi4uLi4ufFxuICAgIC8vICAgIHxYWFhYWFhYWHwuLi4uLi58ICAgIHxYWFhYWFhYWHwuLi4uLi58ICAgIHxYWFhYWFhYWHwuLi4uLi58ICAgIHxYWFhYWHwuLi4uLi4uLi58XG4gICAgLy8gICAgfFhYWFhYWFhYfC4uLi4uLnwgICAgfFhYWFhYWFhYfC4uLi4uLnwgICAgfFhYWFhYWFhYfC4uLi4uLnwgICAgfFhYWFhYfC4uLi4uLi4uLnxcbiAgICAvLyAgICArLS0tLS0tLS0tLS0tLS0tKyAgICArLS0tLS0tLS0tLS0tLS0tKyAgICArLS0tLS0tLS0tLS0tLS0tKyAgICArLS0tLS0tLS0tLS0tLS0tK1xuICAgIC8vXG4gICAgLy8gRm9yIHRoZSBhYm92ZSB0byB3b3JrIHByb3Blcmx5IHdlIGRlZmluZSBhbmltYXRlZCB2YWx1ZSB0aGF0IHdpbGwga2VlcCBzdGFydCBwb3NpdGlvblxuICAgIC8vIG9mIHRoZSBnZXN0dXJlLiBUaGVuIHdlIHVzZSB0aGF0IHZhbHVlIHRvIGNhbGN1bGF0ZSBob3cgbXVjaCB3ZSBuZWVkIHRvIHN1YnRyYWN0IGZyb21cbiAgICAvLyB0aGUgZHJhZ1guIElmIHRoZSBnZXN0dXJlIHN0YXJ0ZWQgb24gdGhlIGdyZXllZCBvdXQgYXJlYSB3ZSB0YWtlIHRoZSBkaXN0YW5jZSBmcm9tIHRoZVxuICAgIC8vIGVkZ2Ugb2YgdGhlIGRyYXdlciB0byB0aGUgc3RhcnQgcG9zaXRpb24uIE90aGVyd2lzZSB3ZSBkb24ndCBzdWJ0cmFjdCBhdCBhbGwgYW5kIHRoZVxuICAgIC8vIGRyYXdlciBiZSBwdWxsZWQgYmFjayBhcyBzb29uIGFzIHlvdSBzdGFydCB0aGUgcGFuLlxuICAgIC8vXG4gICAgLy8gVGhpcyBpcyB1c2VkIG9ubHkgd2hlbiBkcmF3ZXJUeXBlIGlzIFwiZnJvbnRcIlxuICAgIC8vXG4gICAgbGV0IHRyYW5zbGF0aW9uWCA9IGRyYWdYO1xuICAgIGlmIChkcmF3ZXJUeXBlID09PSAnZnJvbnQnKSB7XG4gICAgICBjb25zdCBzdGFydFBvc2l0aW9uWCA9IEFuaW1hdGVkLmFkZChcbiAgICAgICAgdG91Y2hYLFxuICAgICAgICBBbmltYXRlZC5tdWx0aXBseShuZXcgQW5pbWF0ZWQuVmFsdWUoLTEpLCBkcmFnWClcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGRyYWdPZmZzZXRGcm9tT25TdGFydFBvc2l0aW9uID0gc3RhcnRQb3NpdGlvblguaW50ZXJwb2xhdGUoe1xuICAgICAgICBpbnB1dFJhbmdlOiBbZHJhd2VyV2lkdGghIC0gMSwgZHJhd2VyV2lkdGghLCBkcmF3ZXJXaWR0aCEgKyAxXSxcbiAgICAgICAgb3V0cHV0UmFuZ2U6IFswLCAwLCAxXSxcbiAgICAgIH0pO1xuICAgICAgdHJhbnNsYXRpb25YID0gQW5pbWF0ZWQuYWRkKFxuICAgICAgICBkcmFnWCxcbiAgICAgICAgZHJhZ09mZnNldEZyb21PblN0YXJ0UG9zaXRpb25cbiAgICAgICkgYXMgQW5pbWF0ZWQuVmFsdWU7IC8vIFRPRE86IGFzIGFib3ZlXG4gICAgfVxuXG4gICAgdGhpcy5vcGVuVmFsdWUgPSBBbmltYXRlZC5hZGQodHJhbnNsYXRpb25YLCBkcmF3ZXJUcmFuc2xhdGlvbikuaW50ZXJwb2xhdGUoe1xuICAgICAgaW5wdXRSYW5nZTogWzAsIGRyYXdlcldpZHRoIV0sXG4gICAgICBvdXRwdXRSYW5nZTogWzAsIDFdLFxuICAgICAgZXh0cmFwb2xhdGU6ICdjbGFtcCcsXG4gICAgfSk7XG5cbiAgICBjb25zdCBnZXN0dXJlT3B0aW9uczoge1xuICAgICAgdXNlTmF0aXZlRHJpdmVyOiBib29sZWFuO1xuICAgICAgLy8gVE9ETzogbWFrZSBzdXJlIGl0IGlzIGNvcnJlY3RcbiAgICAgIGxpc3RlbmVyPzogKFxuICAgICAgICBldjogTmF0aXZlU3ludGhldGljRXZlbnQ8UGFuR2VzdHVyZUhhbmRsZXJFdmVudFBheWxvYWQ+XG4gICAgICApID0+IHZvaWQ7XG4gICAgfSA9IHtcbiAgICAgIHVzZU5hdGl2ZURyaXZlcjogcHJvcHMudXNlTmF0aXZlQW5pbWF0aW9ucyEsXG4gICAgfTtcblxuICAgIGlmICh0aGlzLnByb3BzLm9uRHJhd2VyU2xpZGUpIHtcbiAgICAgIGdlc3R1cmVPcHRpb25zLmxpc3RlbmVyID0gKGV2KSA9PiB7XG4gICAgICAgIGNvbnN0IHRyYW5zbGF0aW9uWCA9IE1hdGguZmxvb3IoTWF0aC5hYnMoZXYubmF0aXZlRXZlbnQudHJhbnNsYXRpb25YKSk7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9uID0gdHJhbnNsYXRpb25YIC8gdGhpcy5zdGF0ZS5jb250YWluZXJXaWR0aDtcblxuICAgICAgICB0aGlzLnByb3BzLm9uRHJhd2VyU2xpZGU/Lihwb3NpdGlvbik7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMub25HZXN0dXJlRXZlbnQgPSBBbmltYXRlZC5ldmVudChcbiAgICAgIFt7IG5hdGl2ZUV2ZW50OiB7IHRyYW5zbGF0aW9uWDogZHJhZ1hWYWx1ZSwgeDogdG91Y2hYVmFsdWUgfSB9XSxcbiAgICAgIGdlc3R1cmVPcHRpb25zXG4gICAgKTtcbiAgfTtcblxuICBwcml2YXRlIGhhbmRsZUNvbnRhaW5lckxheW91dCA9ICh7IG5hdGl2ZUV2ZW50IH06IExheW91dENoYW5nZUV2ZW50KSA9PiB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGNvbnRhaW5lcldpZHRoOiBuYXRpdmVFdmVudC5sYXlvdXQud2lkdGggfSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBlbWl0U3RhdGVDaGFuZ2VkID0gKFxuICAgIG5ld1N0YXRlOiBEcmF3ZXJTdGF0ZSxcbiAgICBkcmF3ZXJXaWxsU2hvdzogYm9vbGVhblxuICApID0+IHtcbiAgICB0aGlzLnByb3BzLm9uRHJhd2VyU3RhdGVDaGFuZ2VkPy4obmV3U3RhdGUsIGRyYXdlcldpbGxTaG93KTtcbiAgfTtcblxuICBwcml2YXRlIG9wZW5pbmdIYW5kbGVyU3RhdGVDaGFuZ2UgPSAoe1xuICAgIG5hdGl2ZUV2ZW50LFxuICB9OiBIYW5kbGVyU3RhdGVDaGFuZ2VFdmVudDxQYW5HZXN0dXJlSGFuZGxlckV2ZW50UGF5bG9hZD4pID0+IHtcbiAgICBpZiAobmF0aXZlRXZlbnQub2xkU3RhdGUgPT09IFN0YXRlLkFDVElWRSkge1xuICAgICAgdGhpcy5oYW5kbGVSZWxlYXNlKHsgbmF0aXZlRXZlbnQgfSk7XG4gICAgfSBlbHNlIGlmIChuYXRpdmVFdmVudC5zdGF0ZSA9PT0gU3RhdGUuQUNUSVZFKSB7XG4gICAgICB0aGlzLmVtaXRTdGF0ZUNoYW5nZWQoRFJBR0dJTkcsIGZhbHNlKTtcbiAgICAgIGlmICh0aGlzLnByb3BzLmtleWJvYXJkRGlzbWlzc01vZGUgPT09ICdvbi1kcmFnJykge1xuICAgICAgICBLZXlib2FyZC5kaXNtaXNzKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5wcm9wcy5oaWRlU3RhdHVzQmFyKSB7XG4gICAgICAgIFN0YXR1c0Jhci5zZXRIaWRkZW4odHJ1ZSwgdGhpcy5wcm9wcy5zdGF0dXNCYXJBbmltYXRpb24gfHwgJ3NsaWRlJyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgb25UYXBIYW5kbGVyU3RhdGVDaGFuZ2UgPSAoe1xuICAgIG5hdGl2ZUV2ZW50LFxuICB9OiBIYW5kbGVyU3RhdGVDaGFuZ2VFdmVudDxUYXBHZXN0dXJlSGFuZGxlckV2ZW50UGF5bG9hZD4pID0+IHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmRyYXdlclNob3duICYmXG4gICAgICBuYXRpdmVFdmVudC5vbGRTdGF0ZSA9PT0gU3RhdGUuQUNUSVZFICYmXG4gICAgICB0aGlzLnByb3BzLmRyYXdlckxvY2tNb2RlICE9PSAnbG9ja2VkLW9wZW4nXG4gICAgKSB7XG4gICAgICB0aGlzLmNsb3NlRHJhd2VyKCk7XG4gICAgfVxuICB9O1xuXG4gIHByaXZhdGUgaGFuZGxlUmVsZWFzZSA9ICh7XG4gICAgbmF0aXZlRXZlbnQsXG4gIH06IEhhbmRsZXJTdGF0ZUNoYW5nZUV2ZW50PFBhbkdlc3R1cmVIYW5kbGVyRXZlbnRQYXlsb2FkPikgPT4ge1xuICAgIGNvbnN0IHsgZHJhd2VyV2lkdGgsIGRyYXdlclBvc2l0aW9uLCBkcmF3ZXJUeXBlIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHsgY29udGFpbmVyV2lkdGggfSA9IHRoaXMuc3RhdGU7XG4gICAgbGV0IHsgdHJhbnNsYXRpb25YOiBkcmFnWCwgdmVsb2NpdHlYLCB4OiB0b3VjaFggfSA9IG5hdGl2ZUV2ZW50O1xuXG4gICAgaWYgKGRyYXdlclBvc2l0aW9uICE9PSAnbGVmdCcpIHtcbiAgICAgIC8vIFNlZSBkZXNjcmlwdGlvbiBpbiBfdXBkYXRlQW5pbWF0ZWRFdmVudCBhYm91dCB3aHkgZXZlbnRzIGFyZSBmbGlwcGVkXG4gICAgICAvLyBmb3IgcmlnaHQtc2lkZSBkcmF3ZXJcbiAgICAgIGRyYWdYID0gLWRyYWdYO1xuICAgICAgdG91Y2hYID0gY29udGFpbmVyV2lkdGggLSB0b3VjaFg7XG4gICAgICB2ZWxvY2l0eVggPSAtdmVsb2NpdHlYO1xuICAgIH1cblxuICAgIGNvbnN0IGdlc3R1cmVTdGFydFggPSB0b3VjaFggLSBkcmFnWDtcbiAgICBsZXQgZHJhZ09mZnNldEJhc2VkT25TdGFydCA9IDA7XG5cbiAgICBpZiAoZHJhd2VyVHlwZSA9PT0gJ2Zyb250Jykge1xuICAgICAgZHJhZ09mZnNldEJhc2VkT25TdGFydCA9XG4gICAgICAgIGdlc3R1cmVTdGFydFggPiBkcmF3ZXJXaWR0aCEgPyBnZXN0dXJlU3RhcnRYIC0gZHJhd2VyV2lkdGghIDogMDtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydE9mZnNldFggPVxuICAgICAgZHJhZ1ggKyBkcmFnT2Zmc2V0QmFzZWRPblN0YXJ0ICsgKHRoaXMuZHJhd2VyU2hvd24gPyBkcmF3ZXJXaWR0aCEgOiAwKTtcbiAgICBjb25zdCBwcm9qT2Zmc2V0WCA9IHN0YXJ0T2Zmc2V0WCArIERSQUdfVE9TUyAqIHZlbG9jaXR5WDtcblxuICAgIGNvbnN0IHNob3VsZE9wZW4gPSBwcm9qT2Zmc2V0WCA+IGRyYXdlcldpZHRoISAvIDI7XG5cbiAgICBpZiAoc2hvdWxkT3Blbikge1xuICAgICAgdGhpcy5hbmltYXRlRHJhd2VyKHN0YXJ0T2Zmc2V0WCwgZHJhd2VyV2lkdGghLCB2ZWxvY2l0eVgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFuaW1hdGVEcmF3ZXIoc3RhcnRPZmZzZXRYLCAwLCB2ZWxvY2l0eVgpO1xuICAgIH1cbiAgfTtcblxuICBwcml2YXRlIHVwZGF0ZVNob3dpbmcgPSAoc2hvd2luZzogYm9vbGVhbikgPT4ge1xuICAgIHRoaXMuZHJhd2VyU2hvd24gPSBzaG93aW5nO1xuICAgIHRoaXMuYWNjZXNzaWJpbGl0eUlzTW9kYWxWaWV3LmN1cnJlbnQ/LnNldE5hdGl2ZVByb3BzKHtcbiAgICAgIGFjY2Vzc2liaWxpdHlWaWV3SXNNb2RhbDogc2hvd2luZyxcbiAgICB9KTtcbiAgICB0aGlzLnBvaW50ZXJFdmVudHNWaWV3LmN1cnJlbnQ/LnNldE5hdGl2ZVByb3BzKHtcbiAgICAgIHBvaW50ZXJFdmVudHM6IHNob3dpbmcgPyAnYXV0bycgOiAnbm9uZScsXG4gICAgfSk7XG4gICAgY29uc3QgeyBkcmF3ZXJQb3NpdGlvbiwgbWluU3dpcGVEaXN0YW5jZSwgZWRnZVdpZHRoIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGZyb21MZWZ0ID0gZHJhd2VyUG9zaXRpb24gPT09ICdsZWZ0JztcbiAgICAvLyBnZXN0dXJlT3JpZW50YXRpb24gaXMgMSBpZiB0aGUgZXhwZWN0ZWQgZ2VzdHVyZSBpcyBmcm9tIGxlZnQgdG8gcmlnaHQgYW5kIC0xIG90aGVyd2lzZVxuICAgIC8vIGUuZy4gd2hlbiBkcmF3ZXIgaXMgb24gdGhlIGxlZnQgYW5kIGlzIGNsb3NlZCB3ZSBleHBlY3QgbGVmdCB0byByaWdodCBnZXN0dXJlLCB0aHVzXG4gICAgLy8gb3JpZW50YXRpb24gd2lsbCBiZSAxLlxuICAgIGNvbnN0IGdlc3R1cmVPcmllbnRhdGlvbiA9XG4gICAgICAoZnJvbUxlZnQgPyAxIDogLTEpICogKHRoaXMuZHJhd2VyU2hvd24gPyAtMSA6IDEpO1xuICAgIC8vIFdoZW4gZHJhd2VyIGlzIGNsb3NlZCB3ZSB3YW50IHRoZSBoaXRTbG9wIHRvIGJlIGhvcml6b250YWxseSBzaG9ydGVyXG4gICAgLy8gdGhhbiB0aGUgY29udGFpbmVyIHNpemUgYnkgdGhlIHZhbHVlIG9mIFNMT1AuIFRoaXMgd2lsbCBtYWtlIGl0IG9ubHlcbiAgICAvLyBhY3RpdmF0ZSB3aGVuIGdlc3R1cmUgaGFwcGVucyBub3QgZnVydGhlciB0aGFuIFNMT1AgYXdheSBmcm9tIHRoZSBlZGdlXG4gICAgY29uc3QgaGl0U2xvcCA9IGZyb21MZWZ0XG4gICAgICA/IHsgbGVmdDogMCwgd2lkdGg6IHNob3dpbmcgPyB1bmRlZmluZWQgOiBlZGdlV2lkdGggfVxuICAgICAgOiB7IHJpZ2h0OiAwLCB3aWR0aDogc2hvd2luZyA/IHVuZGVmaW5lZCA6IGVkZ2VXaWR0aCB9O1xuICAgIC8vIEB0cy1pZ25vcmUgaW50ZXJuYWwgQVBJLCBtYXliZSBjb3VsZCBiZSBmaXhlZCBpbiBoYW5kbGVyIHR5cGVzXG4gICAgdGhpcy5wYW5HZXN0dXJlSGFuZGxlci5jdXJyZW50Py5zZXROYXRpdmVQcm9wcyh7XG4gICAgICBoaXRTbG9wLFxuICAgICAgYWN0aXZlT2Zmc2V0WDogZ2VzdHVyZU9yaWVudGF0aW9uICogbWluU3dpcGVEaXN0YW5jZSEsXG4gICAgfSk7XG4gIH07XG5cbiAgcHJpdmF0ZSBhbmltYXRlRHJhd2VyID0gKFxuICAgIGZyb21WYWx1ZTogbnVtYmVyIHwgbnVsbCB8IHVuZGVmaW5lZCxcbiAgICB0b1ZhbHVlOiBudW1iZXIsXG4gICAgdmVsb2NpdHk6IG51bWJlcixcbiAgICBzcGVlZD86IG51bWJlclxuICApID0+IHtcbiAgICB0aGlzLnN0YXRlLmRyYWdYLnNldFZhbHVlKDApO1xuICAgIHRoaXMuc3RhdGUudG91Y2hYLnNldFZhbHVlKFxuICAgICAgdGhpcy5wcm9wcy5kcmF3ZXJQb3NpdGlvbiA9PT0gJ2xlZnQnID8gMCA6IHRoaXMuc3RhdGUuY29udGFpbmVyV2lkdGhcbiAgICApO1xuXG4gICAgaWYgKGZyb21WYWx1ZSAhPSBudWxsKSB7XG4gICAgICBsZXQgbmV4dEZyYW1lUG9zaXRpb24gPSBmcm9tVmFsdWU7XG4gICAgICBpZiAodGhpcy5wcm9wcy51c2VOYXRpdmVBbmltYXRpb25zKSB7XG4gICAgICAgIC8vIFdoZW4gdXNpbmcgbmF0aXZlIGRyaXZlciwgd2UgcHJlZGljdCB0aGUgbmV4dCBwb3NpdGlvbiBvZiB0aGUgYW5pbWF0aW9uXG4gICAgICAgIC8vIGJlY2F1c2UgaXQgdGFrZXMgb25lIGZyYW1lIG9mIGEgcm91bmR0cmlwIHRvIHBhc3MgUkVMRUFTRSBldmVudCBmcm9tXG4gICAgICAgIC8vIG5hdGl2ZSBkcml2ZXIgdG8gSlMgYmVmb3JlIHdlIGNhbiBzdGFydCBhbmltYXRpbmcuIFdpdGhvdXQgaXQsIGl0IGlzIG1vcmVcbiAgICAgICAgLy8gbm90aWNhYmxlIHRoYXQgdGhlIGZyYW1lIGlzIGRyb3BwZWQuXG4gICAgICAgIGlmIChmcm9tVmFsdWUgPCB0b1ZhbHVlICYmIHZlbG9jaXR5ID4gMCkge1xuICAgICAgICAgIG5leHRGcmFtZVBvc2l0aW9uID0gTWF0aC5taW4oZnJvbVZhbHVlICsgdmVsb2NpdHkgLyA2MC4wLCB0b1ZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmIChmcm9tVmFsdWUgPiB0b1ZhbHVlICYmIHZlbG9jaXR5IDwgMCkge1xuICAgICAgICAgIG5leHRGcmFtZVBvc2l0aW9uID0gTWF0aC5tYXgoZnJvbVZhbHVlICsgdmVsb2NpdHkgLyA2MC4wLCB0b1ZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5zdGF0ZS5kcmF3ZXJUcmFuc2xhdGlvbi5zZXRWYWx1ZShuZXh0RnJhbWVQb3NpdGlvbik7XG4gICAgfVxuXG4gICAgY29uc3Qgd2lsbFNob3cgPSB0b1ZhbHVlICE9PSAwO1xuICAgIHRoaXMudXBkYXRlU2hvd2luZyh3aWxsU2hvdyk7XG4gICAgdGhpcy5lbWl0U3RhdGVDaGFuZ2VkKFNFVFRMSU5HLCB3aWxsU2hvdyk7XG4gICAgaWYgKHRoaXMucHJvcHMuaGlkZVN0YXR1c0Jhcikge1xuICAgICAgU3RhdHVzQmFyLnNldEhpZGRlbih3aWxsU2hvdywgdGhpcy5wcm9wcy5zdGF0dXNCYXJBbmltYXRpb24gfHwgJ3NsaWRlJyk7XG4gICAgfVxuICAgIEFuaW1hdGVkLnNwcmluZyh0aGlzLnN0YXRlLmRyYXdlclRyYW5zbGF0aW9uLCB7XG4gICAgICB2ZWxvY2l0eSxcbiAgICAgIGJvdW5jaW5lc3M6IDAsXG4gICAgICB0b1ZhbHVlLFxuICAgICAgdXNlTmF0aXZlRHJpdmVyOiB0aGlzLnByb3BzLnVzZU5hdGl2ZUFuaW1hdGlvbnMhLFxuICAgICAgc3BlZWQ6IHNwZWVkID8/IHVuZGVmaW5lZCxcbiAgICB9KS5zdGFydCgoeyBmaW5pc2hlZCB9KSA9PiB7XG4gICAgICBpZiAoZmluaXNoZWQpIHtcbiAgICAgICAgdGhpcy5lbWl0U3RhdGVDaGFuZ2VkKElETEUsIHdpbGxTaG93KTtcbiAgICAgICAgaWYgKHdpbGxTaG93KSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vbkRyYXdlck9wZW4/LigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucHJvcHMub25EcmF3ZXJDbG9zZT8uKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBvcGVuRHJhd2VyID0gKG9wdGlvbnM6IERyYXdlck1vdmVtZW50T3B0aW9uID0ge30pID0+IHtcbiAgICB0aGlzLmFuaW1hdGVEcmF3ZXIoXG4gICAgICAvLyBUT0RPOiBkZWNpZGUgaWYgaXQgc2hvdWxkIGJlIG51bGwgb3IgdW5kZWZpbmVkIGlzIHRoZSBwcm9wZXIgdmFsdWVcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHRoaXMucHJvcHMuZHJhd2VyV2lkdGghLFxuICAgICAgb3B0aW9ucy52ZWxvY2l0eSA/IG9wdGlvbnMudmVsb2NpdHkgOiAwXG4gICAgKTtcblxuICAgIC8vIFdlIG5lZWQgdG8gZm9yY2UgdGhlIHVwZGF0ZSwgb3RoZXJ3aXNlIHRoZSBvdmVybGF5IGlzIG5vdCByZXJlbmRlcmVkIGFuZCBpdCB3b3VsZCBub3QgYmUgY2xpY2thYmxlXG4gICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICB9O1xuXG4gIGNsb3NlRHJhd2VyID0gKG9wdGlvbnM6IERyYXdlck1vdmVtZW50T3B0aW9uID0ge30pID0+IHtcbiAgICAvLyBUT0RPOiBkZWNpZGUgaWYgaXQgc2hvdWxkIGJlIG51bGwgb3IgdW5kZWZpbmVkIGlzIHRoZSBwcm9wZXIgdmFsdWVcbiAgICB0aGlzLmFuaW1hdGVEcmF3ZXIodW5kZWZpbmVkLCAwLCBvcHRpb25zLnZlbG9jaXR5ID8gb3B0aW9ucy52ZWxvY2l0eSA6IDApO1xuXG4gICAgLy8gV2UgbmVlZCB0byBmb3JjZSB0aGUgdXBkYXRlLCBvdGhlcndpc2UgdGhlIG92ZXJsYXkgaXMgbm90IHJlcmVuZGVyZWQgYW5kIGl0IHdvdWxkIGJlIHN0aWxsIGNsaWNrYWJsZVxuICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgfTtcblxuICBwcml2YXRlIHJlbmRlck92ZXJsYXkgPSAoKSA9PiB7XG4gICAgLyogT3ZlcmxheSBzdHlsZXMgKi9cbiAgICBpbnZhcmlhbnQodGhpcy5vcGVuVmFsdWUsICdzaG91bGQgYmUgc2V0Jyk7XG4gICAgY29uc3Qgb3ZlcmxheU9wYWNpdHkgPSB0aGlzLm9wZW5WYWx1ZS5pbnRlcnBvbGF0ZSh7XG4gICAgICBpbnB1dFJhbmdlOiBbMCwgMV0sXG4gICAgICBvdXRwdXRSYW5nZTogWzAsIDFdLFxuICAgICAgZXh0cmFwb2xhdGU6ICdjbGFtcCcsXG4gICAgfSk7XG4gICAgY29uc3QgZHluYW1pY092ZXJsYXlTdHlsZXMgPSB7XG4gICAgICBvcGFjaXR5OiBvdmVybGF5T3BhY2l0eSxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5wcm9wcy5vdmVybGF5Q29sb3IsXG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8VGFwR2VzdHVyZUhhbmRsZXIgb25IYW5kbGVyU3RhdGVDaGFuZ2U9e3RoaXMub25UYXBIYW5kbGVyU3RhdGVDaGFuZ2V9PlxuICAgICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICAgIHBvaW50ZXJFdmVudHM9e3RoaXMuZHJhd2VyU2hvd24gPyAnYXV0bycgOiAnbm9uZSd9XG4gICAgICAgICAgcmVmPXt0aGlzLnBvaW50ZXJFdmVudHNWaWV3fVxuICAgICAgICAgIHN0eWxlPXtbc3R5bGVzLm92ZXJsYXksIGR5bmFtaWNPdmVybGF5U3R5bGVzXX1cbiAgICAgICAgLz5cbiAgICAgIDwvVGFwR2VzdHVyZUhhbmRsZXI+XG4gICAgKTtcbiAgfTtcblxuICBwcml2YXRlIHJlbmRlckRyYXdlciA9ICgpID0+IHtcbiAgICBjb25zdCB7XG4gICAgICBkcmF3ZXJCYWNrZ3JvdW5kQ29sb3IsXG4gICAgICBkcmF3ZXJXaWR0aCxcbiAgICAgIGRyYXdlclBvc2l0aW9uLFxuICAgICAgZHJhd2VyVHlwZSxcbiAgICAgIGRyYXdlckNvbnRhaW5lclN0eWxlLFxuICAgICAgY29udGVudENvbnRhaW5lclN0eWxlLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuXG4gICAgY29uc3QgZnJvbUxlZnQgPSBkcmF3ZXJQb3NpdGlvbiA9PT0gJ2xlZnQnO1xuICAgIGNvbnN0IGRyYXdlclNsaWRlID0gZHJhd2VyVHlwZSAhPT0gJ2JhY2snO1xuICAgIGNvbnN0IGNvbnRhaW5lclNsaWRlID0gZHJhd2VyVHlwZSAhPT0gJ2Zyb250JztcblxuICAgIC8vIHdlIHJlbHkgb24gcm93IGFuZCByb3ctcmV2ZXJzZSBmbGV4IGRpcmVjdGlvbnMgdG8gcG9zaXRpb24gdGhlIGRyYXdlclxuICAgIC8vIHByb3Blcmx5LiBBcHBhcmVudGx5IGZvciBSVEwgdGhlc2UgYXJlIGZsaXBwZWQgd2hpY2ggcmVxdWlyZXMgdXMgdG8gdXNlXG4gICAgLy8gdGhlIG9wcG9zaXRlIHNldHRpbmcgZm9yIHRoZSBkcmF3ZXIgdG8gYXBwZWFyIGZyb20gbGVmdCBvciByaWdodCBhY2NvcmRpbmdcbiAgICAvLyB0byB0aGUgZHJhd2VyUG9zaXRpb24gcHJvcFxuICAgIGNvbnN0IHJldmVyc2VDb250ZW50RGlyZWN0aW9uID0gSTE4bk1hbmFnZXIuaXNSVEwgPyBmcm9tTGVmdCA6ICFmcm9tTGVmdDtcblxuICAgIGNvbnN0IGR5bmFtaWNEcmF3ZXJTdHlsZXMgPSB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IGRyYXdlckJhY2tncm91bmRDb2xvcixcbiAgICAgIHdpZHRoOiBkcmF3ZXJXaWR0aCxcbiAgICB9O1xuICAgIGNvbnN0IG9wZW5WYWx1ZSA9IHRoaXMub3BlblZhbHVlO1xuICAgIGludmFyaWFudChvcGVuVmFsdWUsICdzaG91bGQgYmUgc2V0Jyk7XG5cbiAgICBsZXQgY29udGFpbmVyU3R5bGVzO1xuICAgIGlmIChjb250YWluZXJTbGlkZSkge1xuICAgICAgY29uc3QgY29udGFpbmVyVHJhbnNsYXRlWCA9IG9wZW5WYWx1ZS5pbnRlcnBvbGF0ZSh7XG4gICAgICAgIGlucHV0UmFuZ2U6IFswLCAxXSxcbiAgICAgICAgb3V0cHV0UmFuZ2U6IGZyb21MZWZ0ID8gWzAsIGRyYXdlcldpZHRoIV0gOiBbMCwgLWRyYXdlcldpZHRoIV0sXG4gICAgICAgIGV4dHJhcG9sYXRlOiAnY2xhbXAnLFxuICAgICAgfSk7XG4gICAgICBjb250YWluZXJTdHlsZXMgPSB7XG4gICAgICAgIHRyYW5zZm9ybTogW3sgdHJhbnNsYXRlWDogY29udGFpbmVyVHJhbnNsYXRlWCB9XSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgbGV0IGRyYXdlclRyYW5zbGF0ZVg6IG51bWJlciB8IEFuaW1hdGVkLkFuaW1hdGVkSW50ZXJwb2xhdGlvbiA9IDA7XG4gICAgaWYgKGRyYXdlclNsaWRlKSB7XG4gICAgICBjb25zdCBjbG9zZWREcmF3ZXJPZmZzZXQgPSBmcm9tTGVmdCA/IC1kcmF3ZXJXaWR0aCEgOiBkcmF3ZXJXaWR0aCE7XG4gICAgICBkcmF3ZXJUcmFuc2xhdGVYID0gb3BlblZhbHVlLmludGVycG9sYXRlKHtcbiAgICAgICAgaW5wdXRSYW5nZTogWzAsIDFdLFxuICAgICAgICBvdXRwdXRSYW5nZTogW2Nsb3NlZERyYXdlck9mZnNldCwgMF0sXG4gICAgICAgIGV4dHJhcG9sYXRlOiAnY2xhbXAnLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGRyYXdlclN0eWxlczoge1xuICAgICAgdHJhbnNmb3JtOiB7IHRyYW5zbGF0ZVg6IG51bWJlciB8IEFuaW1hdGVkLkFuaW1hdGVkSW50ZXJwb2xhdGlvbiB9W107XG4gICAgICBmbGV4RGlyZWN0aW9uOiAncm93LXJldmVyc2UnIHwgJ3Jvdyc7XG4gICAgfSA9IHtcbiAgICAgIHRyYW5zZm9ybTogW3sgdHJhbnNsYXRlWDogZHJhd2VyVHJhbnNsYXRlWCB9XSxcbiAgICAgIGZsZXhEaXJlY3Rpb246IHJldmVyc2VDb250ZW50RGlyZWN0aW9uID8gJ3Jvdy1yZXZlcnNlJyA6ICdyb3cnLFxuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgPEFuaW1hdGVkLlZpZXcgc3R5bGU9e3N0eWxlcy5tYWlufSBvbkxheW91dD17dGhpcy5oYW5kbGVDb250YWluZXJMYXlvdXR9PlxuICAgICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICBkcmF3ZXJUeXBlID09PSAnZnJvbnQnXG4gICAgICAgICAgICAgID8gc3R5bGVzLmNvbnRhaW5lck9uQmFja1xuICAgICAgICAgICAgICA6IHN0eWxlcy5jb250YWluZXJJbkZyb250LFxuICAgICAgICAgICAgY29udGFpbmVyU3R5bGVzLFxuICAgICAgICAgICAgY29udGVudENvbnRhaW5lclN0eWxlLFxuICAgICAgICAgIF19XG4gICAgICAgICAgaW1wb3J0YW50Rm9yQWNjZXNzaWJpbGl0eT17XG4gICAgICAgICAgICB0aGlzLmRyYXdlclNob3duID8gJ25vLWhpZGUtZGVzY2VuZGFudHMnIDogJ3llcydcbiAgICAgICAgICB9PlxuICAgICAgICAgIHt0eXBlb2YgdGhpcy5wcm9wcy5jaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgPyB0aGlzLnByb3BzLmNoaWxkcmVuKHRoaXMub3BlblZhbHVlKVxuICAgICAgICAgICAgOiB0aGlzLnByb3BzLmNoaWxkcmVufVxuICAgICAgICAgIHt0aGlzLnJlbmRlck92ZXJsYXkoKX1cbiAgICAgICAgPC9BbmltYXRlZC5WaWV3PlxuICAgICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICAgIHBvaW50ZXJFdmVudHM9XCJib3gtbm9uZVwiXG4gICAgICAgICAgcmVmPXt0aGlzLmFjY2Vzc2liaWxpdHlJc01vZGFsVmlld31cbiAgICAgICAgICBhY2Nlc3NpYmlsaXR5Vmlld0lzTW9kYWw9e3RoaXMuZHJhd2VyU2hvd259XG4gICAgICAgICAgc3R5bGU9e1tzdHlsZXMuZHJhd2VyQ29udGFpbmVyLCBkcmF3ZXJTdHlsZXMsIGRyYXdlckNvbnRhaW5lclN0eWxlXX0+XG4gICAgICAgICAgPFZpZXcgc3R5bGU9e2R5bmFtaWNEcmF3ZXJTdHlsZXN9PlxuICAgICAgICAgICAge3RoaXMucHJvcHMucmVuZGVyTmF2aWdhdGlvblZpZXcodGhpcy5vcGVuVmFsdWUgYXMgQW5pbWF0ZWQuVmFsdWUpfVxuICAgICAgICAgIDwvVmlldz5cbiAgICAgICAgPC9BbmltYXRlZC5WaWV3PlxuICAgICAgPC9BbmltYXRlZC5WaWV3PlxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSBzZXRQYW5HZXN0dXJlUmVmID0gKHJlZjogUGFuR2VzdHVyZUhhbmRsZXIpID0+IHtcbiAgICAvLyBUT0RPKFRTKTogbWFrZSBzdXJlIGl0IGlzIE9LXG4gICAgLy8gdGFrZW4gZnJvbSBodHRwczovL2dpdGh1Yi5jb20vRGVmaW5pdGVseVR5cGVkL0RlZmluaXRlbHlUeXBlZC9pc3N1ZXMvMzEwNjUjaXNzdWVjb21tZW50LTU5NjA4MTg0MlxuICAgICh0aGlzXG4gICAgICAucGFuR2VzdHVyZUhhbmRsZXIgYXMgUmVhY3QuTXV0YWJsZVJlZk9iamVjdDxQYW5HZXN0dXJlSGFuZGxlcj4pLmN1cnJlbnQgPSByZWY7XG4gICAgdGhpcy5wcm9wcy5vbkdlc3R1cmVSZWY/LihyZWYpO1xuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBkcmF3ZXJQb3NpdGlvbixcbiAgICAgIGRyYXdlckxvY2tNb2RlLFxuICAgICAgZWRnZVdpZHRoLFxuICAgICAgbWluU3dpcGVEaXN0YW5jZSxcbiAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgIGNvbnN0IGZyb21MZWZ0ID0gZHJhd2VyUG9zaXRpb24gPT09ICdsZWZ0JztcblxuICAgIC8vIGdlc3R1cmVPcmllbnRhdGlvbiBpcyAxIGlmIHRoZSBleHBlY3RlZCBnZXN0dXJlIGlzIGZyb20gbGVmdCB0byByaWdodCBhbmQgLTEgb3RoZXJ3aXNlXG4gICAgLy8gZS5nLiB3aGVuIGRyYXdlciBpcyBvbiB0aGUgbGVmdCBhbmQgaXMgY2xvc2VkIHdlIGV4cGVjdCBsZWZ0IHRvIHJpZ2h0IGdlc3R1cmUsIHRodXNcbiAgICAvLyBvcmllbnRhdGlvbiB3aWxsIGJlIDEuXG4gICAgY29uc3QgZ2VzdHVyZU9yaWVudGF0aW9uID1cbiAgICAgIChmcm9tTGVmdCA/IDEgOiAtMSkgKiAodGhpcy5kcmF3ZXJTaG93biA/IC0xIDogMSk7XG5cbiAgICAvLyBXaGVuIGRyYXdlciBpcyBjbG9zZWQgd2Ugd2FudCB0aGUgaGl0U2xvcCB0byBiZSBob3Jpem9udGFsbHkgc2hvcnRlclxuICAgIC8vIHRoYW4gdGhlIGNvbnRhaW5lciBzaXplIGJ5IHRoZSB2YWx1ZSBvZiBTTE9QLiBUaGlzIHdpbGwgbWFrZSBpdCBvbmx5XG4gICAgLy8gYWN0aXZhdGUgd2hlbiBnZXN0dXJlIGhhcHBlbnMgbm90IGZ1cnRoZXIgdGhhbiBTTE9QIGF3YXkgZnJvbSB0aGUgZWRnZVxuICAgIGNvbnN0IGhpdFNsb3AgPSBmcm9tTGVmdFxuICAgICAgPyB7IGxlZnQ6IDAsIHdpZHRoOiB0aGlzLmRyYXdlclNob3duID8gdW5kZWZpbmVkIDogZWRnZVdpZHRoIH1cbiAgICAgIDogeyByaWdodDogMCwgd2lkdGg6IHRoaXMuZHJhd2VyU2hvd24gPyB1bmRlZmluZWQgOiBlZGdlV2lkdGggfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8UGFuR2VzdHVyZUhhbmRsZXJcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBjb3VsZCBiZSBmaXhlZCBpbiBoYW5kbGVyIHR5cGVzXG4gICAgICAgIHJlZj17dGhpcy5zZXRQYW5HZXN0dXJlUmVmfVxuICAgICAgICBoaXRTbG9wPXtoaXRTbG9wfVxuICAgICAgICBhY3RpdmVPZmZzZXRYPXtnZXN0dXJlT3JpZW50YXRpb24gKiBtaW5Td2lwZURpc3RhbmNlIX1cbiAgICAgICAgZmFpbE9mZnNldFk9e1stMTUsIDE1XX1cbiAgICAgICAgb25HZXN0dXJlRXZlbnQ9e3RoaXMub25HZXN0dXJlRXZlbnR9XG4gICAgICAgIG9uSGFuZGxlclN0YXRlQ2hhbmdlPXt0aGlzLm9wZW5pbmdIYW5kbGVyU3RhdGVDaGFuZ2V9XG4gICAgICAgIGVuYWJsZVRyYWNrcGFkVHdvRmluZ2VyR2VzdHVyZT17XG4gICAgICAgICAgdGhpcy5wcm9wcy5lbmFibGVUcmFja3BhZFR3b0Zpbmdlckdlc3R1cmVcbiAgICAgICAgfVxuICAgICAgICBlbmFibGVkPXtcbiAgICAgICAgICBkcmF3ZXJMb2NrTW9kZSAhPT0gJ2xvY2tlZC1jbG9zZWQnICYmIGRyYXdlckxvY2tNb2RlICE9PSAnbG9ja2VkLW9wZW4nXG4gICAgICAgIH0+XG4gICAgICAgIHt0aGlzLnJlbmRlckRyYXdlcigpfVxuICAgICAgPC9QYW5HZXN0dXJlSGFuZGxlcj5cbiAgICApO1xuICB9XG59XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgZHJhd2VyQ29udGFpbmVyOiB7XG4gICAgLi4uU3R5bGVTaGVldC5hYnNvbHV0ZUZpbGxPYmplY3QsXG4gICAgekluZGV4OiAxMDAxLFxuICAgIGZsZXhEaXJlY3Rpb246ICdyb3cnLFxuICB9LFxuICBjb250YWluZXJJbkZyb250OiB7XG4gICAgLi4uU3R5bGVTaGVldC5hYnNvbHV0ZUZpbGxPYmplY3QsXG4gICAgekluZGV4OiAxMDAyLFxuICB9LFxuICBjb250YWluZXJPbkJhY2s6IHtcbiAgICAuLi5TdHlsZVNoZWV0LmFic29sdXRlRmlsbE9iamVjdCxcbiAgfSxcbiAgbWFpbjoge1xuICAgIGZsZXg6IDEsXG4gICAgekluZGV4OiAwLFxuICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgfSxcbiAgb3ZlcmxheToge1xuICAgIC4uLlN0eWxlU2hlZXQuYWJzb2x1dGVGaWxsT2JqZWN0LFxuICAgIHpJbmRleDogMTAwMCxcbiAgfSxcbn0pO1xuIl19