7cb063061b0e82f8476478fb83ba12da
var _cloneRegExp = require("./_cloneRegExp");

var type = require("../type");

function _clone(value, refFrom, refTo, deep) {
  var copy = function copy(copiedValue) {
    var len = refFrom.length;
    var idx = 0;

    while (idx < len) {
      if (value === refFrom[idx]) {
        return refTo[idx];
      }

      idx += 1;
    }

    refFrom[idx + 1] = value;
    refTo[idx + 1] = copiedValue;

    for (var key in value) {
      copiedValue[key] = deep ? _clone(value[key], refFrom, refTo, true) : value[key];
    }

    return copiedValue;
  };

  switch (type(value)) {
    case 'Object':
      return copy({});

    case 'Array':
      return copy([]);

    case 'Date':
      return new Date(value.valueOf());

    case 'RegExp':
      return _cloneRegExp(value);

    default:
      return value;
  }
}

module.exports = _clone;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9jbG9uZS5qcyJdLCJuYW1lcyI6WyJfY2xvbmVSZWdFeHAiLCJyZXF1aXJlIiwidHlwZSIsIl9jbG9uZSIsInZhbHVlIiwicmVmRnJvbSIsInJlZlRvIiwiZGVlcCIsImNvcHkiLCJjb3BpZWRWYWx1ZSIsImxlbiIsImxlbmd0aCIsImlkeCIsImtleSIsIkRhdGUiLCJ2YWx1ZU9mIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsWUFBWSxHQUVoQkMsT0FBTyxDQUFDLGdCQUFELENBRlA7O0FBSUEsSUFBSUMsSUFBSSxHQUVSRCxPQUFPLENBQUMsU0FBRCxDQUZQOztBQWVBLFNBQVNFLE1BQVQsQ0FBZ0JDLEtBQWhCLEVBQXVCQyxPQUF2QixFQUFnQ0MsS0FBaEMsRUFBdUNDLElBQXZDLEVBQTZDO0FBQzNDLE1BQUlDLElBQUksR0FBRyxTQUFTQSxJQUFULENBQWNDLFdBQWQsRUFBMkI7QUFDcEMsUUFBSUMsR0FBRyxHQUFHTCxPQUFPLENBQUNNLE1BQWxCO0FBQ0EsUUFBSUMsR0FBRyxHQUFHLENBQVY7O0FBRUEsV0FBT0EsR0FBRyxHQUFHRixHQUFiLEVBQWtCO0FBQ2hCLFVBQUlOLEtBQUssS0FBS0MsT0FBTyxDQUFDTyxHQUFELENBQXJCLEVBQTRCO0FBQzFCLGVBQU9OLEtBQUssQ0FBQ00sR0FBRCxDQUFaO0FBQ0Q7O0FBRURBLE1BQUFBLEdBQUcsSUFBSSxDQUFQO0FBQ0Q7O0FBRURQLElBQUFBLE9BQU8sQ0FBQ08sR0FBRyxHQUFHLENBQVAsQ0FBUCxHQUFtQlIsS0FBbkI7QUFDQUUsSUFBQUEsS0FBSyxDQUFDTSxHQUFHLEdBQUcsQ0FBUCxDQUFMLEdBQWlCSCxXQUFqQjs7QUFFQSxTQUFLLElBQUlJLEdBQVQsSUFBZ0JULEtBQWhCLEVBQXVCO0FBQ3JCSyxNQUFBQSxXQUFXLENBQUNJLEdBQUQsQ0FBWCxHQUFtQk4sSUFBSSxHQUFHSixNQUFNLENBQUNDLEtBQUssQ0FBQ1MsR0FBRCxDQUFOLEVBQWFSLE9BQWIsRUFBc0JDLEtBQXRCLEVBQTZCLElBQTdCLENBQVQsR0FBOENGLEtBQUssQ0FBQ1MsR0FBRCxDQUExRTtBQUNEOztBQUVELFdBQU9KLFdBQVA7QUFDRCxHQXBCRDs7QUFzQkEsVUFBUVAsSUFBSSxDQUFDRSxLQUFELENBQVo7QUFDRSxTQUFLLFFBQUw7QUFDRSxhQUFPSSxJQUFJLENBQUMsRUFBRCxDQUFYOztBQUVGLFNBQUssT0FBTDtBQUNFLGFBQU9BLElBQUksQ0FBQyxFQUFELENBQVg7O0FBRUYsU0FBSyxNQUFMO0FBQ0UsYUFBTyxJQUFJTSxJQUFKLENBQVNWLEtBQUssQ0FBQ1csT0FBTixFQUFULENBQVA7O0FBRUYsU0FBSyxRQUFMO0FBQ0UsYUFBT2YsWUFBWSxDQUFDSSxLQUFELENBQW5COztBQUVGO0FBQ0UsYUFBT0EsS0FBUDtBQWRKO0FBZ0JEOztBQUVEWSxNQUFNLENBQUNDLE9BQVAsR0FBaUJkLE1BQWpCIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9jbG9uZVJlZ0V4cCA9XG4vKiNfX1BVUkVfXyovXG5yZXF1aXJlKFwiLi9fY2xvbmVSZWdFeHBcIik7XG5cbnZhciB0eXBlID1cbi8qI19fUFVSRV9fKi9cbnJlcXVpcmUoXCIuLi90eXBlXCIpO1xuLyoqXG4gKiBDb3BpZXMgYW4gb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBiZSBjb3BpZWRcbiAqIEBwYXJhbSB7QXJyYXl9IHJlZkZyb20gQXJyYXkgY29udGFpbmluZyB0aGUgc291cmNlIHJlZmVyZW5jZXNcbiAqIEBwYXJhbSB7QXJyYXl9IHJlZlRvIEFycmF5IGNvbnRhaW5pbmcgdGhlIGNvcGllZCBzb3VyY2UgcmVmZXJlbmNlc1xuICogQHBhcmFtIHtCb29sZWFufSBkZWVwIFdoZXRoZXIgb3Igbm90IHRvIHBlcmZvcm0gZGVlcCBjbG9uaW5nLlxuICogQHJldHVybiB7Kn0gVGhlIGNvcGllZCB2YWx1ZS5cbiAqL1xuXG5cbmZ1bmN0aW9uIF9jbG9uZSh2YWx1ZSwgcmVmRnJvbSwgcmVmVG8sIGRlZXApIHtcbiAgdmFyIGNvcHkgPSBmdW5jdGlvbiBjb3B5KGNvcGllZFZhbHVlKSB7XG4gICAgdmFyIGxlbiA9IHJlZkZyb20ubGVuZ3RoO1xuICAgIHZhciBpZHggPSAwO1xuXG4gICAgd2hpbGUgKGlkeCA8IGxlbikge1xuICAgICAgaWYgKHZhbHVlID09PSByZWZGcm9tW2lkeF0pIHtcbiAgICAgICAgcmV0dXJuIHJlZlRvW2lkeF07XG4gICAgICB9XG5cbiAgICAgIGlkeCArPSAxO1xuICAgIH1cblxuICAgIHJlZkZyb21baWR4ICsgMV0gPSB2YWx1ZTtcbiAgICByZWZUb1tpZHggKyAxXSA9IGNvcGllZFZhbHVlO1xuXG4gICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgICBjb3BpZWRWYWx1ZVtrZXldID0gZGVlcCA/IF9jbG9uZSh2YWx1ZVtrZXldLCByZWZGcm9tLCByZWZUbywgdHJ1ZSkgOiB2YWx1ZVtrZXldO1xuICAgIH1cblxuICAgIHJldHVybiBjb3BpZWRWYWx1ZTtcbiAgfTtcblxuICBzd2l0Y2ggKHR5cGUodmFsdWUpKSB7XG4gICAgY2FzZSAnT2JqZWN0JzpcbiAgICAgIHJldHVybiBjb3B5KHt9KTtcblxuICAgIGNhc2UgJ0FycmF5JzpcbiAgICAgIHJldHVybiBjb3B5KFtdKTtcblxuICAgIGNhc2UgJ0RhdGUnOlxuICAgICAgcmV0dXJuIG5ldyBEYXRlKHZhbHVlLnZhbHVlT2YoKSk7XG5cbiAgICBjYXNlICdSZWdFeHAnOlxuICAgICAgcmV0dXJuIF9jbG9uZVJlZ0V4cCh2YWx1ZSk7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gX2Nsb25lOyJdfQ==