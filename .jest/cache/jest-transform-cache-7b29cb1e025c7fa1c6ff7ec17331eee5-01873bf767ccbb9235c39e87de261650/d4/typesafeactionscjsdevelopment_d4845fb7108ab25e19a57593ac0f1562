e0d13d8a8269d790d14a76bff20a0276
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _extends2 = _interopRequireDefault(require("@babel/runtime/helpers/extends"));

function checkIsEmpty(arg) {
  return arg == null;
}

function throwIsEmpty(argPosition) {
  throw new Error("Argument " + argPosition + " is empty.");
}

function checkValidActionCreator(arg) {
  return typeof arg === 'function' && 'getType' in arg;
}

function checkInvalidActionCreator(arg) {
  return !checkValidActionCreator(arg);
}

function throwInvalidActionCreator(argPosition) {
  throw new Error("Argument " + argPosition + " is invalid, it should be an action-creator instance from \"typesafe-actions\"");
}

function checkInvalidActionCreatorInArray(arg, idx) {
  if (arg == null) {
    throw new Error("Argument contains array with empty element at index " + idx);
  } else if (arg.getType == null) {
    throw new Error("Argument contains array with invalid element at index " + idx + ", it should be an action-creator instance from \"typesafe-actions\"");
  }
}

function checkValidActionType(arg) {
  return typeof arg === 'string' || typeof arg === 'symbol';
}

function checkInvalidActionType(arg) {
  return !checkValidActionType(arg);
}

function throwInvalidActionType(argPosition) {
  throw new Error("Argument " + argPosition + " is invalid, it should be an action type of type: string | symbol");
}

function checkInvalidActionTypeInArray(arg, idx) {
  if (arg == null) {
    throw new Error("Argument contains array with empty element at index " + idx);
  } else if (typeof arg !== 'string' && typeof arg !== 'symbol') {
    throw new Error("Argument contains array with invalid element at index " + idx + ", it should be of type: string | symbol");
  }
}

function throwInvalidActionTypeOrActionCreator(argPosition) {
  throw new Error("Argument " + argPosition + " is invalid, it should be an action-creator instance from \"typesafe-actions\" or action type of type: string | symbol");
}

function action(type, payload, meta, error) {
  if (checkIsEmpty(type)) {
    throwIsEmpty(1);
  }

  if (checkInvalidActionType(type)) {
    throwInvalidActionCreator(1);
  }

  return {
    type: type,
    payload: payload,
    meta: meta,
    error: error
  };
}

function createCustomAction(type, createHandler) {
  if (checkIsEmpty(type)) {
    throwIsEmpty(1);
  }

  if (checkInvalidActionType(type)) {
    throwInvalidActionType(1);
  }

  var actionCreator = function actionCreator() {
    var customProps = createHandler != null ? createHandler.apply(void 0, arguments) : undefined;
    return (0, _extends2.default)({
      type: type
    }, customProps);
  };

  var typeMeta = {
    getType: function getType() {
      return type;
    },
    toString: function toString() {
      return type;
    }
  };
  return (0, _extends2.default)(actionCreator, typeMeta);
}

function createAction(type, payloadCreator, metaCreator) {
  if (checkIsEmpty(type)) {
    throwIsEmpty(1);
  }

  if (checkInvalidActionType(type)) {
    throwInvalidActionType(1);
  }

  return function () {
    return createCustomAction(type, function () {
      var payload = arguments.length <= 0 ? undefined : arguments[0];
      var meta = arguments.length <= 1 ? undefined : arguments[1];

      if (payloadCreator != null || metaCreator != null) {
        payload = payloadCreator != null ? payloadCreator.apply(void 0, arguments) : undefined;
        meta = metaCreator != null ? metaCreator.apply(void 0, arguments) : undefined;
      }

      return (0, _extends2.default)({}, payload !== undefined && {
        payload: payload
      }, {}, meta !== undefined && {
        meta: meta
      });
    });
  };
}

function throwInvalidAsyncActionArgument(argPosition) {
  throw new Error("Argument " + argPosition + " is invalid, it should be an action type of \"string | symbol\" or a tuple of \"[string | symbol, Function, Function?]\"");
}

function createAsyncAction(requestArg, successArg, failureArg, cancelArg) {
  var constructor = function constructor() {
    var results = [requestArg, successArg, failureArg, cancelArg].map(function (arg, index) {
      if (Array.isArray(arg)) {
        return createAction(arg[0], arg[1], arg[2])();
      } else if (typeof arg === 'string' || typeof arg === 'symbol') {
        return createAction(arg)();
      } else if (index < 3) {
        throwInvalidAsyncActionArgument(index);
      }
    });
    var request = results[0],
        success = results[1],
        failure = results[2],
        cancel = results[3];
    return {
      request: request,
      success: success,
      failure: failure,
      cancel: cancel
    };
  };

  return constructor;
}

function getType(actionCreator) {
  if (checkIsEmpty(actionCreator)) {
    throwIsEmpty(1);
  }

  if (checkInvalidActionCreator(actionCreator)) {
    throwInvalidActionCreator(1);
  }

  return actionCreator.getType();
}

function createReducer(initialState, initialHandlers) {
  if (initialHandlers === void 0) {
    initialHandlers = {};
  }

  var handlers = (0, _extends2.default)({}, initialHandlers);

  var rootReducer = function rootReducer(state, action) {
    if (state === void 0) {
      state = initialState;
    }

    if (handlers.hasOwnProperty(action.type)) {
      var reducer = handlers[action.type];

      if (typeof reducer !== 'function') {
        throw Error("Reducer under \"" + action.type + "\" key is not a valid reducer");
      }

      return reducer(state, action);
    } else {
      return state;
    }
  };

  var reducerHandler = function reducerHandler(singleOrMultipleCreatorsAndTypes, reducer) {
    var creatorsAndTypes = Array.isArray(singleOrMultipleCreatorsAndTypes) ? singleOrMultipleCreatorsAndTypes : [singleOrMultipleCreatorsAndTypes];
    var newHandlers = {};
    creatorsAndTypes.map(function (acOrType, index) {
      return checkValidActionCreator(acOrType) ? getType(acOrType) : checkValidActionType(acOrType) ? acOrType : throwInvalidActionTypeOrActionCreator(index + 1);
    }).forEach(function (type) {
      return newHandlers[type] = reducer;
    });
    return createReducer(initialState, (0, _extends2.default)({}, handlers, {}, newHandlers));
  };

  var chainApi = (0, _extends2.default)(rootReducer, {
    handlers: (0, _extends2.default)({}, handlers),
    handleAction: reducerHandler,
    handleType: reducerHandler
  });
  return chainApi;
}

function isOfType(actionTypeOrTypes, action) {
  if (checkIsEmpty(actionTypeOrTypes)) {
    throwIsEmpty(1);
  }

  var actionTypes = Array.isArray(actionTypeOrTypes) ? actionTypeOrTypes : [actionTypeOrTypes];
  actionTypes.forEach(checkInvalidActionTypeInArray);

  var assertFn = function assertFn(_action) {
    return actionTypes.includes(_action.type);
  };

  if (action === undefined) {
    return assertFn;
  }

  return assertFn(action);
}

function isActionOf(actionCreatorOrCreators, action) {
  if (checkIsEmpty(actionCreatorOrCreators)) {
    throwIsEmpty(1);
  }

  var actionCreators = Array.isArray(actionCreatorOrCreators) ? actionCreatorOrCreators : [actionCreatorOrCreators];
  actionCreators.forEach(checkInvalidActionCreatorInArray);

  var assertFn = function assertFn(_action) {
    return actionCreators.some(function (actionCreator) {
      return _action.type === actionCreator.getType();
    });
  };

  if (action === undefined) {
    return assertFn;
  }

  return assertFn(action);
}

function createAction$1(type, createHandler) {
  var actionCreator = createHandler == null ? function () {
    return action(type);
  } : createHandler(action.bind(null, type));
  return (0, _extends2.default)(actionCreator, {
    getType: function getType() {
      return type;
    },
    toString: function toString() {
      return type;
    }
  });
}

function createCustomAction$1(type, createHandler) {
  if (checkIsEmpty(type)) {
    throwIsEmpty(1);
  }

  if (checkInvalidActionType(type)) {
    throwInvalidActionType(1);
  }

  var actionCreator = createHandler != null ? createHandler(type) : function () {
    return {
      type: type
    };
  };
  return (0, _extends2.default)(actionCreator, {
    getType: function getType() {
      return type;
    },
    toString: function toString() {
      return type;
    }
  });
}

function createStandardAction(type) {
  if (checkIsEmpty(type)) {
    throwIsEmpty(1);
  }

  if (checkInvalidActionType(type)) {
    throwInvalidActionType(1);
  }

  function constructor() {
    return createCustomAction$1(type, function (_type) {
      return function (payload, meta) {
        return {
          type: _type,
          payload: payload,
          meta: meta
        };
      };
    });
  }

  function map(fn) {
    return createCustomAction$1(type, function (_type) {
      return function (payload, meta) {
        return (0, _extends2.default)(fn(payload, meta), {
          type: _type
        });
      };
    });
  }

  return (0, _extends2.default)(constructor, {
    map: map
  });
}

var index = {
  createAction: createAction$1,
  createCustomAction: createCustomAction$1,
  createStandardAction: createStandardAction
};
exports.action = action;
exports.createAction = createAction;
exports.createAsyncAction = createAsyncAction;
exports.createCustomAction = createCustomAction;
exports.createReducer = createReducer;
exports.deprecated = index;
exports.getType = getType;
exports.isActionOf = isActionOf;
exports.isOfType = isOfType;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy91dGlscy92YWxpZGF0aW9uLnRzIiwiLi4vc3JjL2FjdGlvbi50cyIsIi4uL3NyYy9jcmVhdGUtY3VzdG9tLWFjdGlvbi50cyIsIi4uL3NyYy9jcmVhdGUtYWN0aW9uLnRzIiwiLi4vc3JjL2NyZWF0ZS1hc3luYy1hY3Rpb24udHMiLCIuLi9zcmMvZ2V0LXR5cGUudHMiLCIuLi9zcmMvY3JlYXRlLXJlZHVjZXIudHMiLCIuLi9zcmMvaXMtb2YtdHlwZS50cyIsIi4uL3NyYy9pcy1hY3Rpb24tb2YudHMiLCIuLi9zcmMvZGVwcmVjYXRlZC9jcmVhdGUtYWN0aW9uLnRzIiwiLi4vc3JjL2RlcHJlY2F0ZWQvY3JlYXRlLWN1c3RvbS1hY3Rpb24udHMiLCIuLi9zcmMvZGVwcmVjYXRlZC9jcmVhdGUtc3RhbmRhcmQtYWN0aW9uLnRzIiwiLi4vc3JjL2RlcHJlY2F0ZWQvaW5kZXgudHMiXSwibmFtZXMiOlsiY2hlY2tJc0VtcHR5IiwiYXJnIiwidGhyb3dJc0VtcHR5IiwiYXJnUG9zaXRpb24iLCJjaGVja1ZhbGlkQWN0aW9uQ3JlYXRvciIsImNoZWNrSW52YWxpZEFjdGlvbkNyZWF0b3IiLCJ0aHJvd0ludmFsaWRBY3Rpb25DcmVhdG9yIiwiY2hlY2tJbnZhbGlkQWN0aW9uQ3JlYXRvckluQXJyYXkiLCJpZHgiLCJjaGVja1ZhbGlkQWN0aW9uVHlwZSIsImNoZWNrSW52YWxpZEFjdGlvblR5cGUiLCJ0aHJvd0ludmFsaWRBY3Rpb25UeXBlIiwiY2hlY2tJbnZhbGlkQWN0aW9uVHlwZUluQXJyYXkiLCJ0aHJvd0ludmFsaWRBY3Rpb25UeXBlT3JBY3Rpb25DcmVhdG9yIiwiYWN0aW9uIiwidHlwZSIsInBheWxvYWQiLCJtZXRhIiwiZXJyb3IiLCJjcmVhdGVDdXN0b21BY3Rpb24iLCJjcmVhdGVIYW5kbGVyIiwiYWN0aW9uQ3JlYXRvciIsImN1c3RvbVByb3BzIiwidHlwZU1ldGEiLCJnZXRUeXBlIiwidG9TdHJpbmciLCJPYmplY3QiLCJjcmVhdGVBY3Rpb24iLCJwYXlsb2FkQ3JlYXRvciIsIm1ldGFDcmVhdG9yIiwidGhyb3dJbnZhbGlkQXN5bmNBY3Rpb25Bcmd1bWVudCIsImNyZWF0ZUFzeW5jQWN0aW9uIiwicmVxdWVzdEFyZyIsInN1Y2Nlc3NBcmciLCJmYWlsdXJlQXJnIiwiY2FuY2VsQXJnIiwiY29uc3RydWN0b3IiLCJyZXN1bHRzIiwiQXJyYXkiLCJpbmRleCIsInJlcXVlc3QiLCJzdWNjZXNzIiwiZmFpbHVyZSIsImNhbmNlbCIsImNyZWF0ZVJlZHVjZXIiLCJpbml0aWFsU3RhdGUiLCJpbml0aWFsSGFuZGxlcnMiLCJoYW5kbGVycyIsInJvb3RSZWR1Y2VyIiwic3RhdGUiLCJyZWR1Y2VyIiwiRXJyb3IiLCJyZWR1Y2VySGFuZGxlciIsImNyZWF0b3JzQW5kVHlwZXMiLCJuZXdIYW5kbGVycyIsImNoYWluQXBpIiwiaGFuZGxlQWN0aW9uIiwiaGFuZGxlVHlwZSIsImlzT2ZUeXBlIiwiYWN0aW9uVHlwZU9yVHlwZXMiLCJhY3Rpb25UeXBlcyIsImFzc2VydEZuIiwiX2FjdGlvbiIsImlzQWN0aW9uT2YiLCJhY3Rpb25DcmVhdG9yT3JDcmVhdG9ycyIsImFjdGlvbkNyZWF0b3JzIiwiY3JlYXRlU3RhbmRhcmRBY3Rpb24iLCJmbiIsIl90eXBlIiwibWFwIl0sIm1hcHBpbmdzIjoiOzs7Ozs7U0FNZ0JBLFksQ0FBYUMsRyxFQUFBQTtTQUNwQkEsR0FBRyxJQUFWLEk7OztBQUdGLFNBQWdCQyxZQUFoQixDQUE2QkMsV0FBN0IsRUFBNkJBO1FBQ3JCLElBQUEsS0FBQSxDQUFBLGNBQUEsV0FBQSxHQUFOLFlBQU0sQzs7O0FBR1IsU0FBZ0JDLHVCQUFoQixDQUNFSCxHQURGLEVBQ0VBO1NBRU8sT0FBQSxHQUFBLEtBQUEsVUFBQSxJQUE2QixhQUFwQyxHOzs7QUFHRixTQUFnQkkseUJBQWhCLENBQTBDSixHQUExQyxFQUEwQ0E7U0FDakMsQ0FBQ0csdUJBQXVCLENBQS9CLEdBQStCLEM7OztBQUdqQyxTQUFnQkUseUJBQWhCLENBQTBDSCxX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LFFBQVEsRUFBRSxTQUFBLFFBQUEsR0FBQTthQUFBLEk7O0FBSHdCLEdBQTdCLEM7OztTQ0tPeUMsb0IsQ0FDZG5ELEksRUFBQUE7TUFFSWYsWUFBWSxDQUFoQixJQUFnQixDLEVBQVE7QUFDdEJFLElBQUFBLFlBQVksQ0FBWkEsQ0FBWSxDQUFaQTs7O01BR0VRLHNCQUFzQixDQUExQixJQUEwQixDLEVBQVE7QUFDaENDLElBQUFBLHNCQUFzQixDQUF0QkEsQ0FBc0IsQ0FBdEJBOzs7V0FHRixXLEdBQUE7V0FDU1Esb0JBQWtCLENBQUEsSUFBQSxFQUFPLFVBQUEsS0FBQSxFQUFLO2FBQUksVUFBQSxPQUFBLEVBQUEsSUFBQSxFQUFBO2VBQTBCO0FBQ2pFSixVQUFBQSxJQUFJLEVBRDZELEtBQUE7QUFFakVDLFVBQUFBLE9BQU8sRUFGMEQsT0FBQTtBQUdqRUMsVUFBQUEsSUFBSSxFQUFKQTtBQUhpRSxTO0FBQTlCLE87QUFBckMsS0FBeUIsQzs7O1dBTzNCLEcsQ0FBQSxFLEVBQUE7V0FHU0Usb0JBQWtCLENBQUEsSUFBQSxFQUFPLFVBQUEsS0FBQSxFQUFLO2FBQUksVUFBQSxPQUFBLEVBQUEsSUFBQSxFQUFBO2VBQ3ZDLHVCQUFjZ0QsRUFBRSxDQUFBLE9BQUEsRUFBaEIsSUFBZ0IsQ0FBaEIsRUFBaUM7QUFBRXBELFVBQUFBLElBQUksRUFBRXFEO0FBQVIsU0FBakMsQztBQURtQyxPO0FBQXJDLEtBQXlCLEM7OztTQUtwQix1QkFBQSxXQUFBLEVBQTJCO0FBQUVDLElBQUFBLEdBQUcsRUFBSEE7QUFBRixHQUEzQixDOzs7QUN0RFQsSUFBQSxLQUFBLEdBQWU7QUFBRTFDLEVBQUFBLFlBQVksRUFBZCxjQUFBO0FBQWdCUixFQUFBQSxrQkFBa0IsRUFBbEMsb0JBQUE7QUFBb0MrQyxFQUFBQSxvQkFBb0IsRUFBcEJBO0FBQXBDLENBQWYiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBY3Rpb25DcmVhdG9yLFxuICBBY3Rpb25DcmVhdG9yVHlwZU1ldGFkYXRhLFxuICBUeXBlQ29uc3RhbnQsXG59IGZyb20gJy4uL3R5cGUtaGVscGVycyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0lzRW1wdHkoYXJnOiB1bmtub3duKSB7XG4gIHJldHVybiBhcmcgPT0gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRocm93SXNFbXB0eShhcmdQb3NpdGlvbjogbnVtYmVyKTogbmV2ZXIge1xuICB0aHJvdyBuZXcgRXJyb3IoYEFyZ3VtZW50ICR7YXJnUG9zaXRpb259IGlzIGVtcHR5LmApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tWYWxpZEFjdGlvbkNyZWF0b3IoXG4gIGFyZzogdW5rbm93blxuKTogYXJnIGlzIEFjdGlvbkNyZWF0b3I8VHlwZUNvbnN0YW50PiB7XG4gIHJldHVybiB0eXBlb2YgYXJnID09PSAnZnVuY3Rpb24nICYmICdnZXRUeXBlJyBpbiBhcmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0ludmFsaWRBY3Rpb25DcmVhdG9yKGFyZzogdW5rbm93bikge1xuICByZXR1cm4gIWNoZWNrVmFsaWRBY3Rpb25DcmVhdG9yKGFyZyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aHJvd0ludmFsaWRBY3Rpb25DcmVhdG9yKGFyZ1Bvc2l0aW9uOiBudW1iZXIpOiBuZXZlciB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBgQXJndW1lbnQgJHthcmdQb3NpdGlvbn0gaXMgaW52YWxpZCwgaXQgc2hvdWxkIGJlIGFuIGFjdGlvbi1jcmVhdG9yIGluc3RhbmNlIGZyb20gXCJ0eXBlc2FmZS1hY3Rpb25zXCJgXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0ludmFsaWRBY3Rpb25DcmVhdG9ySW5BcnJheShcbiAgYXJnOiBBY3Rpb25DcmVhdG9yPFR5cGVDb25zdGFudD4gJiBBY3Rpb25DcmVhdG9yVHlwZU1ldGFkYXRhPFR5cGVDb25zdGFudD4sXG4gIGlkeDogbnVtYmVyXG4pOiB2b2lkIHwgbmV2ZXIge1xuICBpZiAoYXJnID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgQXJndW1lbnQgY29udGFpbnMgYXJyYXkgd2l0aCBlbXB0eSBlbGVtZW50IGF0IGluZGV4ICR7aWR4fWBcbiAgICApO1xuICB9IGVsc2UgaWYgKGFyZy5nZXRUeXBlID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG4gICAgICBgQXJndW1lbnQgY29udGFpbnMgYXJyYXkgd2l0aCBpbnZhbGlkIGVsZW1lbnQgYXQgaW5kZXggJHtpZHh9LCBpdCBzaG91bGQgYmUgYW4gYWN0aW9uLWNyZWF0b3IgaW5zdGFuY2UgZnJvbSBcInR5cGVzYWZlLWFjdGlvbnNcImBcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1ZhbGlkQWN0aW9uVHlwZShhcmc6IHVua25vd24pOiBhcmcgaXMgc3RyaW5nIHwgc3ltYm9sIHtcbiAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBhcmcgPT09ICdzeW1ib2wnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tJbnZhbGlkQWN0aW9uVHlwZShhcmc6IHVua25vd24pIHtcbiAgcmV0dXJuICFjaGVja1ZhbGlkQWN0aW9uVHlwZShhcmcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdGhyb3dJbnZhbGlkQWN0aW9uVHlwZShhcmdQb3NpdGlvbjogbnVtYmVyKTogbmV2ZXIge1xuICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgYEFyZ3VtZW50ICR7YXJnUG9zaXRpb259IGlzIGludmFsaWQsIGl0IHNob3VsZCBiZSBhbiBhY3Rpb24gdHlwZSBvZiB0eXBlOiBzdHJpbmcgfCBzeW1ib2xgXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja0ludmFsaWRBY3Rpb25UeXBlSW5BcnJheShcbiAgYXJnOiBUeXBlQ29uc3RhbnQsXG4gIGlkeDogbnVtYmVyXG4pOiB2b2lkIHwgbmV2ZXIge1xuICBpZiAoYXJnID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgQXJndW1lbnQgY29udGFpbnMgYXJyYXkgd2l0aCBlbXB0eSBlbGVtZW50IGF0IGluZGV4ICR7aWR4fWBcbiAgICApO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhcmcgIT09ICdzdHJpbmcnICYmIHR5cGVvZiBhcmcgIT09ICdzeW1ib2wnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYEFyZ3VtZW50IGNvbnRhaW5zIGFycmF5IHdpdGggaW52YWxpZCBlbGVtZW50IGF0IGluZGV4ICR7aWR4fSwgaXQgc2hvdWxkIGJlIG9mIHR5cGU6IHN0cmluZyB8IHN5bWJvbGBcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aHJvd0ludmFsaWRBY3Rpb25UeXBlT3JBY3Rpb25DcmVhdG9yKFxuICBhcmdQb3NpdGlvbjogbnVtYmVyXG4pOiBuZXZlciB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBgQXJndW1lbnQgJHthcmdQb3NpdGlvbn0gaXMgaW52YWxpZCwgaXQgc2hvdWxkIGJlIGFuIGFjdGlvbi1jcmVhdG9yIGluc3RhbmNlIGZyb20gXCJ0eXBlc2FmZS1hY3Rpb25zXCIgb3IgYWN0aW9uIHR5cGUgb2YgdHlwZTogc3RyaW5nIHwgc3ltYm9sYFxuICApO1xufVxuIiwiaW1wb3J0IHsgVHlwZUNvbnN0YW50IH0gZnJvbSAnLi90eXBlLWhlbHBlcnMnO1xuaW1wb3J0IHtcbiAgY2hlY2tJc0VtcHR5LFxuICB0aHJvd0lzRW1wdHksXG4gIGNoZWNrSW52YWxpZEFjdGlvblR5cGUsXG4gIHRocm93SW52YWxpZEFjdGlvbkNyZWF0b3IsXG59IGZyb20gJy4vdXRpbHMvdmFsaWRhdGlvbic7XG5cbmV4cG9ydCBmdW5jdGlvbiBhY3Rpb248VCBleHRlbmRzIFR5cGVDb25zdGFudCwgRT4oXG4gIHR5cGU6IFQsXG4gIHBheWxvYWQ6IHVuZGVmaW5lZCxcbiAgbWV0YTogdW5kZWZpbmVkLFxuICBlcnJvcjogRVxuKTogeyB0eXBlOiBUOyBlcnJvcjogRSB9O1xuXG5leHBvcnQgZnVuY3Rpb24gYWN0aW9uPFQgZXh0ZW5kcyBUeXBlQ29uc3RhbnQsIE0sIEU+KFxuICB0eXBlOiBULFxuICBwYXlsb2FkOiB1bmRlZmluZWQsXG4gIG1ldGE6IE0sXG4gIGVycm9yOiBFXG4pOiB7IHR5cGU6IFQ7IG1ldGE6IE07IGVycm9yOiBFIH07XG5cbmV4cG9ydCBmdW5jdGlvbiBhY3Rpb248VCBleHRlbmRzIFR5cGVDb25zdGFudCwgUCwgRT4oXG4gIHR5cGU6IFQsXG4gIHBheWxvYWQ6IFAsXG4gIG1ldGE6IHVuZGVmaW5lZCxcbiAgZXJyb3I6IEVcbik6IHsgdHlwZTogVDsgcGF5bG9hZDogUDsgZXJyb3I6IEUgfTtcblxuZXhwb3J0IGZ1bmN0aW9uIGFjdGlvbjxUIGV4dGVuZHMgVHlwZUNvbnN0YW50LCBQLCBNLCBFPihcbiAgdHlwZTogVCxcbiAgcGF5bG9hZDogUCxcbiAgbWV0YTogTSxcbiAgZXJyb3I6IEVcbik6IHsgdHlwZTogVDsgcGF5bG9hZDogUDsgbWV0YTogTTsgZXJyb3I6IEUgfTtcblxuZXhwb3J0IGZ1bmN0aW9uIGFjdGlvbjxUIGV4dGVuZHMgVHlwZUNvbnN0YW50LCBNPihcbiAgdHlwZTogVCxcbiAgcGF5bG9hZDogdW5kZWZpbmVkLFxuICBtZXRhOiBNXG4pOiB7IHR5cGU6IFQ7IG1ldGE6IE0gfTtcblxuZXhwb3J0IGZ1bmN0aW9uIGFjdGlvbjxUIGV4dGVuZHMgVHlwZUNvbnN0YW50LCBQLCBNPihcbiAgdHlwZTogVCxcbiAgcGF5bG9hZDogUCxcbiAgbWV0YTogTVxuKTogeyB0eXBlOiBUOyBwYXlsb2FkOiBQOyBtZXRhOiBNIH07XG5cbmV4cG9ydCBmdW5jdGlvbiBhY3Rpb248VCBleHRlbmRzIFR5cGVDb25zdGFudCwgUD4oXG4gIHR5cGU6IFQsXG4gIHBheWxvYWQ6IFBcbik6IHsgdHlwZTogVDsgcGF5bG9hZDogUCB9O1xuXG5leHBvcnQgZnVuY3Rpb24gYWN0aW9uPFQgZXh0ZW5kcyBUeXBlQ29uc3RhbnQ+KHR5cGU6IFQpOiB7IHR5cGU6IFQgfTtcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gZmx1eCBzdGFuZGFyZCBhY3Rpb24gZmFjdG9yeVxuICogQGV4YW1wbGVcbiAqIGBgYFxuICogY29uc3QgYWRkID0gKGFtb3VudDogbnVtYmVyLCBtZXRhPzogTWV0YSwgZXJyb3I/OiBib29sZWFuKSA9PiBhY3Rpb24oJ0lOQ1JFTUVOVCcsIGFtb3VudCwgbWV0YSwgZXJyb3IpO1xuICogYGBgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhY3Rpb248XG4gIFQgZXh0ZW5kcyBUeXBlQ29uc3RhbnQsXG4gIFAgPSB1bmRlZmluZWQsXG4gIE0gPSB1bmRlZmluZWQsXG4gIEUgPSB1bmRlZmluZWRcbj4odHlwZTogVCwgcGF5bG9hZD86IFAsIG1ldGE/OiBNLCBlcnJvcj86IEUpIHtcbiAgaWYgKGNoZWNrSXNFbXB0eSh0eXBlKSkge1xuICAgIHRocm93SXNFbXB0eSgxKTtcbiAgfVxuXG4gIGlmIChjaGVja0ludmFsaWRBY3Rpb25UeXBlKHR5cGUpKSB7XG4gICAgdGhyb3dJbnZhbGlkQWN0aW9uQ3JlYXRvcigxKTtcbiAgfVxuXG4gIHJldHVybiB7IHR5cGUsIHBheWxvYWQsIG1ldGEsIGVycm9yIH0gYXMgYW55O1xufVxuIiwiaW1wb3J0IHtcbiAgVHlwZUNvbnN0YW50LFxuICBSZXNvbHZlVHlwZSxcbiAgQWN0aW9uQ3JlYXRvclR5cGVNZXRhZGF0YSxcbn0gZnJvbSAnLi90eXBlLWhlbHBlcnMnO1xuaW1wb3J0IHtcbiAgY2hlY2tJc0VtcHR5LFxuICB0aHJvd0lzRW1wdHksXG4gIGNoZWNrSW52YWxpZEFjdGlvblR5cGUsXG4gIHRocm93SW52YWxpZEFjdGlvblR5cGUsXG59IGZyb20gJy4vdXRpbHMvdmFsaWRhdGlvbic7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIGNyZWF0ZSBjdXN0b20gYWN0aW9uLWNyZWF0b3IgdXNpbmcgY29uc3RydWN0b3IgZnVuY3Rpb24gd2l0aCBpbmplY3RlZCB0eXBlIGFyZ3VtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDdXN0b21BY3Rpb248XG4gIFRUeXBlIGV4dGVuZHMgVHlwZUNvbnN0YW50LFxuICBUQXJncyBleHRlbmRzIGFueVtdID0gW10sXG4gIFRSZXR1cm4gZXh0ZW5kcyBhbnkgPSB7fVxuPihcbiAgdHlwZTogVFR5cGUsXG4gIGNyZWF0ZUhhbmRsZXI/OiAoLi4uYXJnczogVEFyZ3MpID0+IFRSZXR1cm5cbik6ICgoLi4uYXJnczogVEFyZ3MpID0+IFJlc29sdmVUeXBlPHsgdHlwZTogVFR5cGUgfSAmIFRSZXR1cm4+KSAmXG4gIEFjdGlvbkNyZWF0b3JUeXBlTWV0YWRhdGE8VFR5cGU+IHtcbiAgaWYgKGNoZWNrSXNFbXB0eSh0eXBlKSkge1xuICAgIHRocm93SXNFbXB0eSgxKTtcbiAgfVxuXG4gIGlmIChjaGVja0ludmFsaWRBY3Rpb25UeXBlKHR5cGUpKSB7XG4gICAgdGhyb3dJbnZhbGlkQWN0aW9uVHlwZSgxKTtcbiAgfVxuXG4gIGNvbnN0IGFjdGlvbkNyZWF0b3IgPSAoLi4uYXJnczogVEFyZ3MpID0+IHtcbiAgICBjb25zdCBjdXN0b21Qcm9wcyA9XG4gICAgICBjcmVhdGVIYW5kbGVyICE9IG51bGwgPyBjcmVhdGVIYW5kbGVyKC4uLmFyZ3MpIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiB7IHR5cGUsIC4uLmN1c3RvbVByb3BzIH0gYXMgUmVzb2x2ZVR5cGU8eyB0eXBlOiBUVHlwZSB9ICYgVFJldHVybj47XG4gIH07XG5cbiAgY29uc3QgdHlwZU1ldGEgPSB7XG4gICAgZ2V0VHlwZTogKCkgPT4gdHlwZSxcbiAgICAvLyByZWR1eC1hY3Rpb25zIGNvbXBhdGliaWxpdHlcbiAgICB0b1N0cmluZzogKCkgPT4gdHlwZSxcbiAgfSBhcyBBY3Rpb25DcmVhdG9yVHlwZU1ldGFkYXRhPFRUeXBlPjtcblxuICByZXR1cm4gT2JqZWN0LmFzc2lnbihhY3Rpb25DcmVhdG9yLCB0eXBlTWV0YSk7XG59XG4iLCJpbXBvcnQge1xuICBUeXBlQ29uc3RhbnQsXG4gIEFjdGlvbkNyZWF0b3JCdWlsZGVyLFxuICBBY3Rpb25DcmVhdG9yVHlwZU1ldGFkYXRhLFxuICBBY3Rpb25CdWlsZGVyLFxufSBmcm9tICcuL3R5cGUtaGVscGVycyc7XG5pbXBvcnQgeyBjcmVhdGVDdXN0b21BY3Rpb24gfSBmcm9tICcuL2NyZWF0ZS1jdXN0b20tYWN0aW9uJztcbmltcG9ydCB7XG4gIGNoZWNrSXNFbXB0eSxcbiAgdGhyb3dJc0VtcHR5LFxuICBjaGVja0ludmFsaWRBY3Rpb25UeXBlLFxuICB0aHJvd0ludmFsaWRBY3Rpb25UeXBlLFxufSBmcm9tICcuL3V0aWxzL3ZhbGlkYXRpb24nO1xuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQWN0aW9uPFRUeXBlIGV4dGVuZHMgVHlwZUNvbnN0YW50PihcbiAgdHlwZTogVFR5cGVcbik6IDxUUGF5bG9hZCA9IHVuZGVmaW5lZCwgVE1ldGEgPSB1bmRlZmluZWQ+KCkgPT4gQWN0aW9uQ3JlYXRvckJ1aWxkZXI8XG4gIFRUeXBlLFxuICBUUGF5bG9hZCxcbiAgVE1ldGFcbj47XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBY3Rpb248XG4gIFRUeXBlIGV4dGVuZHMgVHlwZUNvbnN0YW50LFxuICBUQ3JlYXRvclBheWxvYWQgZXh0ZW5kcyBhbnkgPSB1bmRlZmluZWQsXG4gIFRDcmVhdG9yTWV0YSBleHRlbmRzIGFueSA9IHVuZGVmaW5lZCxcbiAgVEFyZ3MgZXh0ZW5kcyBhbnlbXSA9IGFueVtdXG4+KFxuICB0eXBlOiBUVHlwZSxcbiAgcGF5bG9hZENyZWF0b3I6IHVuZGVmaW5lZCB8ICgoLi4uYXJnczogVEFyZ3MpID0+IFRDcmVhdG9yUGF5bG9hZCksXG4gIG1ldGFDcmVhdG9yPzogKC4uLmFyZ3M6IFRBcmdzKSA9PiBUQ3JlYXRvck1ldGFcbik6IDxcbiAgVFBheWxvYWQgZXh0ZW5kcyBUQ3JlYXRvclBheWxvYWQgPSBUQ3JlYXRvclBheWxvYWQsXG4gIFRNZXRhIGV4dGVuZHMgVENyZWF0b3JNZXRhID0gVENyZWF0b3JNZXRhXG4+KCkgPT4gKC4uLmFyZ3M6IFRBcmdzKSA9PiBBY3Rpb25CdWlsZGVyPFRUeXBlLCBUUGF5bG9hZCwgVE1ldGE+O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBjcmVhdGUgYW4gYWN0aW9uLWNyZWF0b3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFjdGlvbjxcbiAgVFR5cGUgZXh0ZW5kcyBUeXBlQ29uc3RhbnQsXG4gIFRDcmVhdG9yUGF5bG9hZCBleHRlbmRzIGFueSA9IHVuZGVmaW5lZCxcbiAgVENyZWF0b3JNZXRhIGV4dGVuZHMgYW55ID0gdW5kZWZpbmVkLFxuICBUQXJncyBleHRlbmRzIGFueVtdID0gYW55W11cbj4oXG4gIHR5cGU6IFRUeXBlLFxuICBwYXlsb2FkQ3JlYXRvcj86IHVuZGVmaW5lZCB8ICgoLi4uYXJnczogVEFyZ3MpID0+IFRDcmVhdG9yUGF5bG9hZCksXG4gIG1ldGFDcmVhdG9yPzogKC4uLmFyZ3M6IFRBcmdzKSA9PiBUQ3JlYXRvck1ldGFcbik6XG4gIHwgKDxcbiAgICAgIFRQYXlsb2FkIGV4dGVuZHMgVENyZWF0b3JQYXlsb2FkID0gVENyZWF0b3JQYXlsb2FkLFxuICAgICAgVE1ldGEgZXh0ZW5kcyBUQ3JlYXRvck1ldGEgPSBUQ3JlYXRvck1ldGFcbiAgICA+KCkgPT4gKC4uLmFyZ3M6IFRBcmdzKSA9PiBBY3Rpb25CdWlsZGVyPFRUeXBlLCBUUGF5bG9hZCwgVE1ldGE+KVxuICB8ICg8VFBheWxvYWQgPSB1bmRlZmluZWQsIFRNZXRhID0gdW5kZWZpbmVkPigpID0+IEFjdGlvbkNyZWF0b3JCdWlsZGVyPFxuICAgICAgVFR5cGUsXG4gICAgICBUUGF5bG9hZCxcbiAgICAgIFRNZXRhXG4gICAgPikge1xuICBpZiAoY2hlY2tJc0VtcHR5KHR5cGUpKSB7XG4gICAgdGhyb3dJc0VtcHR5KDEpO1xuICB9XG5cbiAgaWYgKGNoZWNrSW52YWxpZEFjdGlvblR5cGUodHlwZSkpIHtcbiAgICB0aHJvd0ludmFsaWRBY3Rpb25UeXBlKDEpO1xuICB9XG5cbiAgcmV0dXJuIDxUUGF5bG9hZCwgVE1ldGEgPSB1bmRlZmluZWQ+KCkgPT4ge1xuICAgIHJldHVybiBjcmVhdGVDdXN0b21BY3Rpb24odHlwZSwgKC4uLmFyZ3M6IFRBcmdzKSA9PiB7XG4gICAgICBsZXQgcGF5bG9hZCA9IGFyZ3NbMF07XG4gICAgICBsZXQgbWV0YSA9IGFyZ3NbMV07XG5cbiAgICAgIGlmIChwYXlsb2FkQ3JlYXRvciAhPSBudWxsIHx8IG1ldGFDcmVhdG9yICE9IG51bGwpIHtcbiAgICAgICAgcGF5bG9hZCA9IHBheWxvYWRDcmVhdG9yICE9IG51bGwgPyBwYXlsb2FkQ3JlYXRvciguLi5hcmdzKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgbWV0YSA9IG1ldGFDcmVhdG9yICE9IG51bGwgPyBtZXRhQ3JlYXRvciguLi5hcmdzKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uKHBheWxvYWQgIT09IHVuZGVmaW5lZCAmJiB7IHBheWxvYWQgfSksXG4gICAgICAgIC4uLihtZXRhICE9PSB1bmRlZmluZWQgJiYgeyBtZXRhIH0pLFxuICAgICAgfTtcbiAgICB9KSBhcyBBY3Rpb25DcmVhdG9yQnVpbGRlcjxUVHlwZSwgVFBheWxvYWQsIFRNZXRhPjtcbiAgfTtcbn1cbiIsImltcG9ydCB7XG4gIFR5cGVDb25zdGFudCxcbiAgQWN0aW9uQ3JlYXRvckJ1aWxkZXIsXG4gIEFjdGlvbkJ1aWxkZXIsXG59IGZyb20gJy4vdHlwZS1oZWxwZXJzJztcbmltcG9ydCB7IGNyZWF0ZUFjdGlvbiB9IGZyb20gJy4vY3JlYXRlLWFjdGlvbic7XG5cbmV4cG9ydCBmdW5jdGlvbiB0aHJvd0ludmFsaWRBc3luY0FjdGlvbkFyZ3VtZW50KGFyZ1Bvc2l0aW9uOiBudW1iZXIpOiBuZXZlciB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBgQXJndW1lbnQgJHthcmdQb3NpdGlvbn0gaXMgaW52YWxpZCwgaXQgc2hvdWxkIGJlIGFuIGFjdGlvbiB0eXBlIG9mIFwic3RyaW5nIHwgc3ltYm9sXCIgb3IgYSB0dXBsZSBvZiBcIltzdHJpbmcgfCBzeW1ib2wsIEZ1bmN0aW9uLCBGdW5jdGlvbj9dXCJgXG4gICk7XG59XG5cbnR5cGUgQXN5bmNBY3Rpb25IYW5kbGVyPFxuICBUVHlwZSBleHRlbmRzIFR5cGVDb25zdGFudCxcbiAgVEFyZ3MgZXh0ZW5kcyBhbnlbXSxcbiAgVFBheWxvYWRNZXRhXG4+ID0gW1RBcmdzXSBleHRlbmRzIFtuZXZlcl1cbiAgPyBBY3Rpb25DcmVhdG9yQnVpbGRlcjxcbiAgICAgIFRUeXBlLFxuICAgICAgdW5rbm93biBleHRlbmRzIFRQYXlsb2FkTWV0YVxuICAgICAgICA/IGFueVxuICAgICAgICA6IFtUUGF5bG9hZE1ldGFdIGV4dGVuZHMgW1tpbmZlciBULCBhbnldXVxuICAgICAgICA/IFRcbiAgICAgICAgOiBUUGF5bG9hZE1ldGEsXG4gICAgICB1bmtub3duIGV4dGVuZHMgVFBheWxvYWRNZXRhXG4gICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgIDogW1RQYXlsb2FkTWV0YV0gZXh0ZW5kcyBbW2FueSwgaW5mZXIgVF1dXG4gICAgICAgID8gVFxuICAgICAgICA6IHVuZGVmaW5lZFxuICAgID5cbiAgOiAoXG4gICAgICAuLi5hcmdzOiBUQXJnc1xuICAgICkgPT4gQWN0aW9uQnVpbGRlcjxcbiAgICAgIFRUeXBlLFxuICAgICAgW1RQYXlsb2FkTWV0YV0gZXh0ZW5kcyBbW2luZmVyIFQsIGFueV1dID8gVCA6IFRQYXlsb2FkTWV0YSxcbiAgICAgIFtUUGF5bG9hZE1ldGFdIGV4dGVuZHMgW1thbnksIGluZmVyIFRdXSA/IFQgOiB1bmRlZmluZWRcbiAgICA+O1xuXG5pbnRlcmZhY2UgQXN5bmNBY3Rpb248XG4gIFRUeXBlMSBleHRlbmRzIFR5cGVDb25zdGFudCxcbiAgVFBheWxvYWQxIGV4dGVuZHMgYW55LFxuICBUTWV0YTEgZXh0ZW5kcyBhbnksXG4gIFRBcmdzMSBleHRlbmRzIGFueVtdLFxuICBUVHlwZTIgZXh0ZW5kcyBUeXBlQ29uc3RhbnQsXG4gIFRQYXlsb2FkMiBleHRlbmRzIGFueSxcbiAgVE1ldGEyIGV4dGVuZHMgYW55LFxuICBUQXJnczIgZXh0ZW5kcyBhbnlbXSxcbiAgVFR5cGUzIGV4dGVuZHMgVHlwZUNvbnN0YW50LFxuICBUUGF5bG9hZDMgZXh0ZW5kcyBhbnksXG4gIFRNZXRhMyBleHRlbmRzIGFueSxcbiAgVEFyZ3MzIGV4dGVuZHMgYW55W10sXG4gIFRUeXBlNCBleHRlbmRzIFR5cGVDb25zdGFudCxcbiAgVFBheWxvYWQ0IGV4dGVuZHMgYW55LFxuICBUTWV0YTQgZXh0ZW5kcyBhbnksXG4gIFRBcmdzNCBleHRlbmRzIGFueVtdXG4+IHtcbiAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBjYWxsYWJsZS10eXBlc1xuICA8XG4gICAgVFBheWxvYWRNZXRhMSBleHRlbmRzXG4gICAgICB8IFRQYXlsb2FkMVxuICAgICAgfCBbVFBheWxvYWQxLCBUTWV0YTFdID0gVE1ldGExIGV4dGVuZHMgdW5kZWZpbmVkXG4gICAgICA/IFRQYXlsb2FkMVxuICAgICAgOiBbVFBheWxvYWQxLCBUTWV0YTFdLFxuICAgIFRQYXlsb2FkTWV0YTIgZXh0ZW5kc1xuICAgICAgfCBUUGF5bG9hZDJcbiAgICAgIHwgW1RQYXlsb2FkMiwgVE1ldGEyXSA9IFRNZXRhMiBleHRlbmRzIHVuZGVmaW5lZFxuICAgICAgPyBUUGF5bG9hZDJcbiAgICAgIDogW1RQYXlsb2FkMiwgVE1ldGEyXSxcbiAgICBUUGF5bG9hZE1ldGEzIGV4dGVuZHNcbiAgICAgIHwgVFBheWxvYWQzXG4gICAgICB8IFtUUGF5bG9hZDMsIFRNZXRhM10gPSBUTWV0YTMgZXh0ZW5kcyB1bmRlZmluZWRcbiAgICAgID8gVFBheWxvYWQzXG4gICAgICA6IFtUUGF5bG9hZDMsIFRNZXRhM10sXG4gICAgVFBheWxvYWRNZXRhNCBleHRlbmRzXG4gICAgICB8IFRQYXlsb2FkNFxuICAgICAgfCBbVFBheWxvYWQ0LCBUTWV0YTRdID0gVE1ldGEzIGV4dGVuZHMgdW5kZWZpbmVkXG4gICAgICA/IFRQYXlsb2FkNFxuICAgICAgOiBbVFBheWxvYWQ0LCBUTWV0YTRdXG4gID4oKTogW1RUeXBlNF0gZXh0ZW5kcyBbbmV2ZXJdXG4gICAgPyB7XG4gICAgICAgIHJlcXVlc3Q6IEFzeW5jQWN0aW9uSGFuZGxlcjxUVHlwZTEsIFRBcmdzMSwgVFBheWxvYWRNZXRhMT47XG4gICAgICAgIHN1Y2Nlc3M6IEFzeW5jQWN0aW9uSGFuZGxlcjxUVHlwZTIsIFRBcmdzMiwgVFBheWxvYWRNZXRhMj47XG4gICAgICAgIGZhaWx1cmU6IEFzeW5jQWN0aW9uSGFuZGxlcjxUVHlwZTMsIFRBcmdzMywgVFBheWxvYWRNZXRhMz47XG4gICAgICB9XG4gICAgOiB7XG4gICAgICAgIHJlcXVlc3Q6IEFzeW5jQWN0aW9uSGFuZGxlcjxUVHlwZTEsIFRBcmdzMSwgVFBheWxvYWRNZXRhMT47XG4gICAgICAgIHN1Y2Nlc3M6IEFzeW5jQWN0aW9uSGFuZGxlcjxUVHlwZTIsIFRBcmdzMiwgVFBheWxvYWRNZXRhMj47XG4gICAgICAgIGZhaWx1cmU6IEFzeW5jQWN0aW9uSGFuZGxlcjxUVHlwZTMsIFRBcmdzMywgVFBheWxvYWRNZXRhMz47XG4gICAgICAgIGNhbmNlbDogQXN5bmNBY3Rpb25IYW5kbGVyPFRUeXBlNCwgVEFyZ3M0LCBUUGF5bG9hZE1ldGE0PjtcbiAgICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBc3luY0FjdGlvbjxcbiAgVFR5cGUxIGV4dGVuZHMgVHlwZUNvbnN0YW50LFxuICBUVHlwZTIgZXh0ZW5kcyBUeXBlQ29uc3RhbnQsXG4gIFRUeXBlMyBleHRlbmRzIFR5cGVDb25zdGFudCxcbiAgVFR5cGU0IGV4dGVuZHMgVHlwZUNvbnN0YW50ID0gbmV2ZXJcbj4oXG4gIHJlcXVlc3RBcmc6IFRUeXBlMSxcbiAgc3VjY2Vzc0FyZzogVFR5cGUyLFxuICBmYWlsdXJlQXJnOiBUVHlwZTMsXG4gIGNhbmNlbEFyZz86IFRUeXBlNFxuKTogQXN5bmNBY3Rpb248XG4gIFRUeXBlMSxcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgbmV2ZXIsXG4gIFRUeXBlMixcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgbmV2ZXIsXG4gIFRUeXBlMyxcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgbmV2ZXIsXG4gIFRUeXBlNCxcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgbmV2ZXJcbj47XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBc3luY0FjdGlvbjxcbiAgVFR5cGUxIGV4dGVuZHMgVHlwZUNvbnN0YW50LFxuICBUVHlwZTIgZXh0ZW5kcyBUeXBlQ29uc3RhbnQsXG4gIFRUeXBlMyBleHRlbmRzIFR5cGVDb25zdGFudCxcbiAgVFR5cGU0IGV4dGVuZHMgVHlwZUNvbnN0YW50ID0gbmV2ZXIsXG4gIFRQYXlsb2FkQ3JlYXRvcjEgZXh0ZW5kc1xuICAgIHwgKCguLi5hcmdzOiBUQXJnczEpID0+IFRQYXlsb2FkMSlcbiAgICB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgVFBheWxvYWRDcmVhdG9yMiBleHRlbmRzXG4gICAgfCAoKC4uLmFyZ3M6IFRBcmdzMikgPT4gVFBheWxvYWQyKVxuICAgIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICBUUGF5bG9hZENyZWF0b3IzIGV4dGVuZHNcbiAgICB8ICgoLi4uYXJnczogVEFyZ3MzKSA9PiBUUGF5bG9hZDMpXG4gICAgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gIFRQYXlsb2FkQ3JlYXRvcjQgZXh0ZW5kc1xuICAgIHwgKCguLi5hcmdzOiBUQXJnczQpID0+IFRQYXlsb2FkNClcbiAgICB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgVE1ldGFDcmVhdG9yMSBleHRlbmRzICgoLi4uYXJnczogVEFyZ3MxKSA9PiBUTWV0YTEpIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICBUTWV0YUNyZWF0b3IyIGV4dGVuZHMgKCguLi5hcmdzOiBUQXJnczIpID0+IFRNZXRhMikgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gIFRNZXRhQ3JlYXRvcjMgZXh0ZW5kcyAoKC4uLmFyZ3M6IFRBcmdzMykgPT4gVE1ldGEzKSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgVE1ldGFDcmVhdG9yNCBleHRlbmRzICgoLi4uYXJnczogVEFyZ3M0KSA9PiBUTWV0YTQpIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICBUUGF5bG9hZDEgZXh0ZW5kcyBhbnkgPSBUUGF5bG9hZENyZWF0b3IxIGV4dGVuZHMgKCguLi5hcmdzOiBhbnlbXSkgPT4gaW5mZXIgVClcbiAgICA/IFRcbiAgICA6IHVuZGVmaW5lZCxcbiAgVE1ldGExIGV4dGVuZHMgYW55ID0gVE1ldGFDcmVhdG9yMSBleHRlbmRzICgoLi4uYXJnczogYW55W10pID0+IGluZmVyIFQpXG4gICAgPyBUXG4gICAgOiB1bmRlZmluZWQsXG4gIFRQYXlsb2FkMiBleHRlbmRzIGFueSA9IFRQYXlsb2FkQ3JlYXRvcjIgZXh0ZW5kcyAoKC4uLmFyZ3M6IGFueVtdKSA9PiBpbmZlciBUKVxuICAgID8gVFxuICAgIDogdW5kZWZpbmVkLFxuICBUTWV0YTIgZXh0ZW5kcyBhbnkgPSBUTWV0YUNyZWF0b3IyIGV4dGVuZHMgKCguLi5hcmdzOiBhbnlbXSkgPT4gaW5mZXIgVClcbiAgICA/IFRcbiAgICA6IHVuZGVmaW5lZCxcbiAgVFBheWxvYWQzIGV4dGVuZHMgYW55ID0gVFBheWxvYWRDcmVhdG9yMyBleHRlbmRzICgoLi4uYXJnczogYW55W10pID0+IGluZmVyIFQpXG4gICAgPyBUXG4gICAgOiB1bmRlZmluZWQsXG4gIFRNZXRhMyBleHRlbmRzIGFueSA9IFRNZXRhQ3JlYXRvcjMgZXh0ZW5kcyAoKC4uLmFyZ3M6IGFueVtdKSA9PiBpbmZlciBUKVxuICAgID8gVFxuICAgIDogdW5kZWZpbmVkLFxuICBUUGF5bG9hZDQgZXh0ZW5kcyBhbnkgPSBUUGF5bG9hZENyZWF0b3I0IGV4dGVuZHMgKCguLi5hcmdzOiBhbnlbXSkgPT4gaW5mZXIgVClcbiAgICA/IFRcbiAgICA6IHVuZGVmaW5lZCxcbiAgVE1ldGE0IGV4dGVuZHMgYW55ID0gVE1ldGFDcmVhdG9yNCBleHRlbmRzICgoLi4uYXJnczogYW55W10pID0+IGluZmVyIFQpXG4gICAgPyBUXG4gICAgOiB1bmRlZmluZWQsXG4gIFRBcmdzMSBleHRlbmRzIGFueVtdID0gVFBheWxvYWRDcmVhdG9yMSBleHRlbmRzICgoLi4uYXJnczogaW5mZXIgVCkgPT4gYW55KVxuICAgID8gVFxuICAgIDogVE1ldGFDcmVhdG9yMSBleHRlbmRzICgoLi4uYXJnczogaW5mZXIgVCkgPT4gYW55KVxuICAgID8gVFxuICAgIDogbmV2ZXIsXG4gIFRBcmdzMiBleHRlbmRzIGFueVtdID0gVFBheWxvYWRDcmVhdG9yMiBleHRlbmRzICgoLi4uYXJnczogaW5mZXIgVCkgPT4gYW55KVxuICAgID8gVFxuICAgIDogVE1ldGFDcmVhdG9yMiBleHRlbmRzICgoLi4uYXJnczogaW5mZXIgVCkgPT4gYW55KVxuICAgID8gVFxuICAgIDogbmV2ZXIsXG4gIFRBcmdzMyBleHRlbmRzIGFueVtdID0gVFBheWxvYWRDcmVhdG9yMyBleHRlbmRzICgoLi4uYXJnczogaW5mZXIgVCkgPT4gYW55KVxuICAgID8gVFxuICAgIDogVE1ldGFDcmVhdG9yMyBleHRlbmRzICgoLi4uYXJnczogaW5mZXIgVCkgPT4gYW55KVxuICAgID8gVFxuICAgIDogbmV2ZXIsXG4gIFRBcmdzNCBleHRlbmRzIGFueVtdID0gVFBheWxvYWRDcmVhdG9yNCBleHRlbmRzICgoLi4uYXJnczogaW5mZXIgVCkgPT4gYW55KVxuICAgID8gVFxuICAgIDogVE1ldGFDcmVhdG9yNCBleHRlbmRzICgoLi4uYXJnczogaW5mZXIgVCkgPT4gYW55KVxuICAgID8gVFxuICAgIDogbmV2ZXJcbj4oXG4gIHJlcXVlc3RBcmc6XG4gICAgfCBUVHlwZTFcbiAgICB8IFtUVHlwZTEsIFRQYXlsb2FkQ3JlYXRvcjFdXG4gICAgfCBbVFR5cGUxLCBUUGF5bG9hZENyZWF0b3IxLCBUTWV0YUNyZWF0b3IxXSxcbiAgc3VjY2Vzc0FyZzpcbiAgICB8IFRUeXBlMlxuICAgIHwgW1RUeXBlMiwgVFBheWxvYWRDcmVhdG9yMl1cbiAgICB8IFtUVHlwZTIsIFRQYXlsb2FkQ3JlYXRvcjIsIFRNZXRhQ3JlYXRvcjJdLFxuICBmYWlsdXJlQXJnOlxuICAgIHwgVFR5cGUzXG4gICAgfCBbVFR5cGUzLCBUUGF5bG9hZENyZWF0b3IzXVxuICAgIHwgW1RUeXBlMywgVFBheWxvYWRDcmVhdG9yMywgVE1ldGFDcmVhdG9yM10sXG4gIGNhbmNlbEFyZz86XG4gICAgfCBUVHlwZTRcbiAgICB8IFtUVHlwZTQsIFRQYXlsb2FkQ3JlYXRvcjRdXG4gICAgfCBbVFR5cGU0LCBUUGF5bG9hZENyZWF0b3I0LCBUTWV0YUNyZWF0b3I0XVxuKTogQXN5bmNBY3Rpb248XG4gIFRUeXBlMSxcbiAgVFBheWxvYWQxLFxuICBUTWV0YTEsXG4gIFRBcmdzMSxcbiAgVFR5cGUyLFxuICBUUGF5bG9hZDIsXG4gIFRNZXRhMixcbiAgVEFyZ3MyLFxuICBUVHlwZTMsXG4gIFRQYXlsb2FkMyxcbiAgVE1ldGEzLFxuICBUQXJnczMsXG4gIFRUeXBlNCxcbiAgVFBheWxvYWQ0LFxuICBUTWV0YTQsXG4gIFRBcmdzNFxuPjtcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gY3JlYXRlIGFuIGFzeW5jIGFjdGlvbi1jcmVhdG9yIG9iamVjdCB0aGF0IGNvbnRhaW5zIGByZXF1ZXN0YCwgYHN1Y2Nlc3NgIGFuZCBgZmFpbHVyZWAgYWN0aW9ucyBhcyBwcm9wc1xuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQXN5bmNBY3Rpb248XG4gIFRUeXBlMSBleHRlbmRzIFR5cGVDb25zdGFudCxcbiAgVFR5cGUyIGV4dGVuZHMgVHlwZUNvbnN0YW50LFxuICBUVHlwZTMgZXh0ZW5kcyBUeXBlQ29uc3RhbnQsXG4gIFRUeXBlNCBleHRlbmRzIFR5cGVDb25zdGFudCA9IG5ldmVyLFxuICBUUGF5bG9hZENyZWF0b3IxIGV4dGVuZHNcbiAgICB8ICgoLi4uYXJnczogVEFyZ3MxKSA9PiBUUGF5bG9hZDEpXG4gICAgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gIFRQYXlsb2FkQ3JlYXRvcjIgZXh0ZW5kc1xuICAgIHwgKCguLi5hcmdzOiBUQXJnczIpID0+IFRQYXlsb2FkMilcbiAgICB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgVFBheWxvYWRDcmVhdG9yMyBleHRlbmRzXG4gICAgfCAoKC4uLmFyZ3M6IFRBcmdzMykgPT4gVFBheWxvYWQzKVxuICAgIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICBUUGF5bG9hZENyZWF0b3I0IGV4dGVuZHNcbiAgICB8ICgoLi4uYXJnczogVEFyZ3M0KSA9PiBUUGF5bG9hZDQpXG4gICAgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gIFRNZXRhQ3JlYXRvcjEgZXh0ZW5kcyAoKC4uLmFyZ3M6IFRBcmdzMSkgPT4gVE1ldGExKSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgVE1ldGFDcmVhdG9yMiBleHRlbmRzICgoLi4uYXJnczogVEFyZ3MyKSA9PiBUTWV0YTIpIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkLFxuICBUTWV0YUNyZWF0b3IzIGV4dGVuZHMgKCguLi5hcmdzOiBUQXJnczMpID0+IFRNZXRhMykgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQsXG4gIFRNZXRhQ3JlYXRvcjQgZXh0ZW5kcyAoKC4uLmFyZ3M6IFRBcmdzNCkgPT4gVE1ldGE0KSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZCxcbiAgVFBheWxvYWQxIGV4dGVuZHMgYW55ID0gVFBheWxvYWRDcmVhdG9yMSBleHRlbmRzICgoLi4uYXJnczogYW55W10pID0+IGluZmVyIFQpXG4gICAgPyBUXG4gICAgOiB1bmRlZmluZWQsXG4gIFRNZXRhMSBleHRlbmRzIGFueSA9IFRNZXRhQ3JlYXRvcjEgZXh0ZW5kcyAoKC4uLmFyZ3M6IGFueVtdKSA9PiBpbmZlciBUKVxuICAgID8gVFxuICAgIDogdW5kZWZpbmVkLFxuICBUUGF5bG9hZDIgZXh0ZW5kcyBhbnkgPSBUUGF5bG9hZENyZWF0b3IyIGV4dGVuZHMgKCguLi5hcmdzOiBhbnlbXSkgPT4gaW5mZXIgVClcbiAgICA/IFRcbiAgICA6IHVuZGVmaW5lZCxcbiAgVE1ldGEyIGV4dGVuZHMgYW55ID0gVE1ldGFDcmVhdG9yMiBleHRlbmRzICgoLi4uYXJnczogYW55W10pID0+IGluZmVyIFQpXG4gICAgPyBUXG4gICAgOiB1bmRlZmluZWQsXG4gIFRQYXlsb2FkMyBleHRlbmRzIGFueSA9IFRQYXlsb2FkQ3JlYXRvcjMgZXh0ZW5kcyAoKC4uLmFyZ3M6IGFueVtdKSA9PiBpbmZlciBUKVxuICAgID8gVFxuICAgIDogdW5kZWZpbmVkLFxuICBUTWV0YTMgZXh0ZW5kcyBhbnkgPSBUTWV0YUNyZWF0b3IzIGV4dGVuZHMgKCguLi5hcmdzOiBhbnlbXSkgPT4gaW5mZXIgVClcbiAgICA/IFRcbiAgICA6IHVuZGVmaW5lZCxcbiAgVFBheWxvYWQ0IGV4dGVuZHMgYW55ID0gVFBheWxvYWRDcmVhdG9yNCBleHRlbmRzICgoLi4uYXJnczogYW55W10pID0+IGluZmVyIFQpXG4gICAgPyBUXG4gICAgOiB1bmRlZmluZWQsXG4gIFRNZXRhNCBleHRlbmRzIGFueSA9IFRNZXRhQ3JlYXRvcjQgZXh0ZW5kcyAoKC4uLmFyZ3M6IGFueVtdKSA9PiBpbmZlciBUKVxuICAgID8gVFxuICAgIDogdW5kZWZpbmVkLFxuICBUQXJnczEgZXh0ZW5kcyBhbnlbXSA9IFRQYXlsb2FkQ3JlYXRvcjEgZXh0ZW5kcyAoKC4uLmFyZ3M6IGluZmVyIFQpID0+IGFueSlcbiAgICA/IFRcbiAgICA6IFRNZXRhQ3JlYXRvcjEgZXh0ZW5kcyAoKC4uLmFyZ3M6IGluZmVyIFQpID0+IGFueSlcbiAgICA/IFRcbiAgICA6IG5ldmVyLFxuICBUQXJnczIgZXh0ZW5kcyBhbnlbXSA9IFRQYXlsb2FkQ3JlYXRvcjIgZXh0ZW5kcyAoKC4uLmFyZ3M6IGluZmVyIFQpID0+IGFueSlcbiAgICA/IFRcbiAgICA6IFRNZXRhQ3JlYXRvcjIgZXh0ZW5kcyAoKC4uLmFyZ3M6IGluZmVyIFQpID0+IGFueSlcbiAgICA/IFRcbiAgICA6IG5ldmVyLFxuICBUQXJnczMgZXh0ZW5kcyBhbnlbXSA9IFRQYXlsb2FkQ3JlYXRvcjMgZXh0ZW5kcyAoKC4uLmFyZ3M6IGluZmVyIFQpID0+IGFueSlcbiAgICA/IFRcbiAgICA6IFRNZXRhQ3JlYXRvcjMgZXh0ZW5kcyAoKC4uLmFyZ3M6IGluZmVyIFQpID0+IGFueSlcbiAgICA/IFRcbiAgICA6IG5ldmVyLFxuICBUQXJnczQgZXh0ZW5kcyBhbnlbXSA9IFRQYXlsb2FkQ3JlYXRvcjQgZXh0ZW5kcyAoKC4uLmFyZ3M6IGluZmVyIFQpID0+IGFueSlcbiAgICA/IFRcbiAgICA6IFRNZXRhQ3JlYXRvcjQgZXh0ZW5kcyAoKC4uLmFyZ3M6IGluZmVyIFQpID0+IGFueSlcbiAgICA/IFRcbiAgICA6IG5ldmVyXG4+KFxuICByZXF1ZXN0QXJnOlxuICAgIHwgVFR5cGUxXG4gICAgfCBbVFR5cGUxLCBUUGF5bG9hZENyZWF0b3IxXVxuICAgIHwgW1RUeXBlMSwgVFBheWxvYWRDcmVhdG9yMSwgVE1ldGFDcmVhdG9yMV0sXG4gIHN1Y2Nlc3NBcmc6XG4gICAgfCBUVHlwZTJcbiAgICB8IFtUVHlwZTIsIFRQYXlsb2FkQ3JlYXRvcjJdXG4gICAgfCBbVFR5cGUyLCBUUGF5bG9hZENyZWF0b3IyLCBUTWV0YUNyZWF0b3IyXSxcbiAgZmFpbHVyZUFyZzpcbiAgICB8IFRUeXBlM1xuICAgIHwgW1RUeXBlMywgVFBheWxvYWRDcmVhdG9yM11cbiAgICB8IFtUVHlwZTMsIFRQYXlsb2FkQ3JlYXRvcjMsIFRNZXRhQ3JlYXRvcjNdLFxuICBjYW5jZWxBcmc/OlxuICAgIHwgVFR5cGU0XG4gICAgfCBbVFR5cGU0LCBUUGF5bG9hZENyZWF0b3I0XVxuICAgIHwgW1RUeXBlNCwgVFBheWxvYWRDcmVhdG9yNCwgVE1ldGFDcmVhdG9yNF1cbik6IEFzeW5jQWN0aW9uPFxuICBUVHlwZTEsXG4gIFRQYXlsb2FkMSxcbiAgVE1ldGExLFxuICBUQXJnczEsXG4gIFRUeXBlMixcbiAgVFBheWxvYWQyLFxuICBUTWV0YTIsXG4gIFRBcmdzMixcbiAgVFR5cGUzLFxuICBUUGF5bG9hZDMsXG4gIFRNZXRhMyxcbiAgVEFyZ3MzLFxuICBUVHlwZTQsXG4gIFRQYXlsb2FkNCxcbiAgVE1ldGE0LFxuICBUQXJnczRcbj4ge1xuICBjb25zdCBjb25zdHJ1Y3RvciA9ICg8XG4gICAgVFAxID0gdW5kZWZpbmVkLFxuICAgIFRNMSA9IHVuZGVmaW5lZCxcbiAgICBUUDIgPSB1bmRlZmluZWQsXG4gICAgVE0yID0gdW5kZWZpbmVkLFxuICAgIFRQMyA9IHVuZGVmaW5lZCxcbiAgICBUTTMgPSB1bmRlZmluZWQsXG4gICAgVFA0ID0gdW5kZWZpbmVkLFxuICAgIFRNNCA9IHVuZGVmaW5lZFxuICA+KCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdHMgPSBbcmVxdWVzdEFyZywgc3VjY2Vzc0FyZywgZmFpbHVyZUFyZywgY2FuY2VsQXJnXS5tYXAoXG4gICAgICAoYXJnLCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmcpKSB7XG4gICAgICAgICAgcmV0dXJuIGNyZWF0ZUFjdGlvbihhcmdbMF0sIGFyZ1sxXSBhcyBhbnksIGFyZ1syXSBhcyBhbnkpKCk7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGFyZyA9PT0gJ3N5bWJvbCcpIHtcbiAgICAgICAgICByZXR1cm4gY3JlYXRlQWN0aW9uKGFyZyBhcyBzdHJpbmcpKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPCAzKSB7XG4gICAgICAgICAgdGhyb3dJbnZhbGlkQXN5bmNBY3Rpb25Bcmd1bWVudChpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuXG4gICAgY29uc3QgW3JlcXVlc3QsIHN1Y2Nlc3MsIGZhaWx1cmUsIGNhbmNlbF0gPSByZXN1bHRzO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHJlcXVlc3QsXG4gICAgICBzdWNjZXNzLFxuICAgICAgZmFpbHVyZSxcbiAgICAgIGNhbmNlbCxcbiAgICB9O1xuICB9KSBhcyBBc3luY0FjdGlvbjxcbiAgICBUVHlwZTEsXG4gICAgVFBheWxvYWQxLFxuICAgIFRNZXRhMSxcbiAgICBUQXJnczEsXG4gICAgVFR5cGUyLFxuICAgIFRQYXlsb2FkMixcbiAgICBUTWV0YTIsXG4gICAgVEFyZ3MyLFxuICAgIFRUeXBlMyxcbiAgICBUUGF5bG9hZDMsXG4gICAgVE1ldGEzLFxuICAgIFRBcmdzMyxcbiAgICBUVHlwZTQsXG4gICAgVFBheWxvYWQ0LFxuICAgIFRNZXRhNCxcbiAgICBUQXJnczRcbiAgPjtcblxuICByZXR1cm4gY29uc3RydWN0b3I7XG59XG4iLCJpbXBvcnQge1xuICBUeXBlQ29uc3RhbnQsXG4gIEFjdGlvbkNyZWF0b3IsXG4gIEFjdGlvbkNyZWF0b3JUeXBlTWV0YWRhdGEsXG59IGZyb20gJy4vdHlwZS1oZWxwZXJzJztcbmltcG9ydCB7XG4gIGNoZWNrSXNFbXB0eSxcbiAgdGhyb3dJc0VtcHR5LFxuICBjaGVja0ludmFsaWRBY3Rpb25DcmVhdG9yLFxuICB0aHJvd0ludmFsaWRBY3Rpb25DcmVhdG9yLFxufSBmcm9tICcuL3V0aWxzL3ZhbGlkYXRpb24nO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBnZXQgdGhlIFwidHlwZSBsaXRlcmFsXCIgb2YgYSBnaXZlbiBhY3Rpb24tY3JlYXRvclxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VHlwZTxUVHlwZSBleHRlbmRzIFR5cGVDb25zdGFudD4oXG4gIGFjdGlvbkNyZWF0b3I6IEFjdGlvbkNyZWF0b3I8VFR5cGU+ICYgQWN0aW9uQ3JlYXRvclR5cGVNZXRhZGF0YTxUVHlwZT5cbik6IFRUeXBlIHtcbiAgaWYgKGNoZWNrSXNFbXB0eShhY3Rpb25DcmVhdG9yKSkge1xuICAgIHRocm93SXNFbXB0eSgxKTtcbiAgfVxuXG4gIGlmIChjaGVja0ludmFsaWRBY3Rpb25DcmVhdG9yKGFjdGlvbkNyZWF0b3IpKSB7XG4gICAgdGhyb3dJbnZhbGlkQWN0aW9uQ3JlYXRvcigxKTtcbiAgfVxuXG4gIHJldHVybiBhY3Rpb25DcmVhdG9yLmdldFR5cGUhKCk7XG59XG4iLCJpbXBvcnQgeyBnZXRUeXBlIH0gZnJvbSAnLi9nZXQtdHlwZSc7XG5pbXBvcnQge1xuICBjaGVja1ZhbGlkQWN0aW9uQ3JlYXRvcixcbiAgY2hlY2tWYWxpZEFjdGlvblR5cGUsXG4gIHRocm93SW52YWxpZEFjdGlvblR5cGVPckFjdGlvbkNyZWF0b3IsXG59IGZyb20gJy4vdXRpbHMvdmFsaWRhdGlvbic7XG5pbXBvcnQgeyBSZWR1Y2VyLCBBY3Rpb24sIFR5cGVzIH0gZnJvbSAnLi90eXBlLWhlbHBlcnMnO1xuXG50eXBlIEhhbmRsZUFjdGlvbkNoYWluQXBpPFxuICBUU3RhdGUsXG4gIFRJbnB1dEFjdGlvbiBleHRlbmRzIEFjdGlvbixcbiAgVFJvb3RBY3Rpb24gZXh0ZW5kcyBBY3Rpb25cbj4gPSA8XG4gIFRBY3Rpb25DcmVhdG9yIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiBUSW5wdXRBY3Rpb24sXG4gIFRIYW5kbGVkQWN0aW9uIGV4dGVuZHMgUmV0dXJuVHlwZTxUQWN0aW9uQ3JlYXRvcj4sXG4gIFRPdXRwdXRBY3Rpb24gZXh0ZW5kcyBFeGNsdWRlPFRJbnB1dEFjdGlvbiwgVEhhbmRsZWRBY3Rpb24+XG4+KFxuICBzaW5nbGVPck11bHRpcGxlQ3JlYXRvcnNBbmRUeXBlczogVEFjdGlvbkNyZWF0b3IgfCBUQWN0aW9uQ3JlYXRvcltdLFxuICByZWR1Y2VyOiAoc3RhdGU6IFRTdGF0ZSwgYWN0aW9uOiBUSGFuZGxlZEFjdGlvbikgPT4gVFN0YXRlXG4pID0+IFtUT3V0cHV0QWN0aW9uXSBleHRlbmRzIFtBY3Rpb25dXG4gID8gUmVkdWNlcjxUU3RhdGUsIFRSb290QWN0aW9uPiAmIHtcbiAgICAgIGhhbmRsZXJzOiBSZWNvcmQ8XG4gICAgICAgIEV4Y2x1ZGU8VFJvb3RBY3Rpb24sIFRPdXRwdXRBY3Rpb24+Wyd0eXBlJ10sXG4gICAgICAgIChzdGF0ZTogVFN0YXRlLCBhY3Rpb246IFRSb290QWN0aW9uKSA9PiBUU3RhdGVcbiAgICAgID47XG4gICAgICBoYW5kbGVBY3Rpb246IEhhbmRsZUFjdGlvbkNoYWluQXBpPFRTdGF0ZSwgVE91dHB1dEFjdGlvbiwgVFJvb3RBY3Rpb24+O1xuICAgIH1cbiAgOiBSZWR1Y2VyPFRTdGF0ZSwgVFJvb3RBY3Rpb24+ICYge1xuICAgICAgaGFuZGxlcnM6IFJlY29yZDxcbiAgICAgICAgVFJvb3RBY3Rpb25bJ3R5cGUnXSxcbiAgICAgICAgKHN0YXRlOiBUU3RhdGUsIGFjdGlvbjogVFJvb3RBY3Rpb24pID0+IFRTdGF0ZVxuICAgICAgPjtcbiAgICB9O1xuXG50eXBlIEhhbmRsZVR5cGVDaGFpbkFwaTxcbiAgVFN0YXRlLFxuICBUSW5wdXRBY3Rpb24gZXh0ZW5kcyBBY3Rpb24sXG4gIFRSb290QWN0aW9uIGV4dGVuZHMgQWN0aW9uXG4+ID0gPFxuICBUVHlwZSBleHRlbmRzIFRJbnB1dEFjdGlvblsndHlwZSddLFxuICBUSGFuZGxlZEFjdGlvbiBleHRlbmRzIEV4dHJhY3Q8VElucHV0QWN0aW9uLCBBY3Rpb248VFR5cGU+PixcbiAgVE91dHB1dEFjdGlvbiBleHRlbmRzIEV4Y2x1ZGU8VElucHV0QWN0aW9uLCBUSGFuZGxlZEFjdGlvbj5cbj4oXG4gIHNpbmdsZU9yTXVsdGlwbGVDcmVhdG9yc0FuZFR5cGVzOiBUVHlwZSB8IFRUeXBlW10sXG4gIHJlZHVjZXI6IChzdGF0ZTogVFN0YXRlLCBhY3Rpb246IFRIYW5kbGVkQWN0aW9uKSA9PiBUU3RhdGVcbikgPT4gW1RPdXRwdXRBY3Rpb25dIGV4dGVuZHMgW0FjdGlvbl1cbiAgPyBSZWR1Y2VyPFRTdGF0ZSwgVFJvb3RBY3Rpb24+ICYge1xuICAgICAgaGFuZGxlcnM6IFJlY29yZDxcbiAgICAgICAgRXhjbHVkZTxUUm9vdEFjdGlvbiwgVE91dHB1dEFjdGlvbj5bJ3R5cGUnXSxcbiAgICAgICAgKHN0YXRlOiBUU3RhdGUsIGFjdGlvbjogVFJvb3RBY3Rpb24pID0+IFRTdGF0ZVxuICAgICAgPjtcbiAgICAgIGhhbmRsZVR5cGU6IEhhbmRsZVR5cGVDaGFpbkFwaTxUU3RhdGUsIFRPdXRwdXRBY3Rpb24sIFRSb290QWN0aW9uPjtcbiAgICB9XG4gIDogUmVkdWNlcjxUU3RhdGUsIFRSb290QWN0aW9uPiAmIHtcbiAgICAgIGhhbmRsZXJzOiBSZWNvcmQ8XG4gICAgICAgIFRSb290QWN0aW9uWyd0eXBlJ10sXG4gICAgICAgIChzdGF0ZTogVFN0YXRlLCBhY3Rpb246IFRSb290QWN0aW9uKSA9PiBUU3RhdGVcbiAgICAgID47XG4gICAgfTtcblxudHlwZSBHZXRBY3Rpb248XG4gIFRBY3Rpb24gZXh0ZW5kcyBBY3Rpb24sXG4gIFRUeXBlIGV4dGVuZHMgVEFjdGlvblsndHlwZSddXG4+ID0gVEFjdGlvbiBleHRlbmRzIEFjdGlvbjxUVHlwZT4gPyBUQWN0aW9uIDogbmV2ZXI7XG5cbnR5cGUgSW5pdGlhbEhhbmRsZXI8VFN0YXRlLCBUUm9vdEFjdGlvbiBleHRlbmRzIEFjdGlvbj4gPSB7XG4gIFtQIGluIFRSb290QWN0aW9uWyd0eXBlJ11dPzogKFxuICAgIHN0YXRlOiBUU3RhdGUsXG4gICAgYWN0aW9uOiBHZXRBY3Rpb248VFJvb3RBY3Rpb24sIFA+XG4gICkgPT4gVFN0YXRlO1xufTtcblxudHlwZSBSb290QWN0aW9uID0gVHlwZXMgZXh0ZW5kcyB7IFJvb3RBY3Rpb246IGluZmVyIFQgfSA/IFQgOiBhbnk7XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZWR1Y2VyPFRTdGF0ZSwgVFJvb3RBY3Rpb24gZXh0ZW5kcyBBY3Rpb24gPSBSb290QWN0aW9uPihcbiAgaW5pdGlhbFN0YXRlOiBUU3RhdGUsXG4gIGluaXRpYWxIYW5kbGVyczogSW5pdGlhbEhhbmRsZXI8VFN0YXRlLCBUUm9vdEFjdGlvbj4gPSB7fVxuKSB7XG4gIGNvbnN0IGhhbmRsZXJzOiBhbnkgPSB7XG4gICAgLi4uaW5pdGlhbEhhbmRsZXJzLFxuICB9O1xuXG4gIGNvbnN0IHJvb3RSZWR1Y2VyOiBSZWR1Y2VyPFRTdGF0ZSwgVFJvb3RBY3Rpb24+ID0gKFxuICAgIHN0YXRlID0gaW5pdGlhbFN0YXRlLFxuICAgIGFjdGlvbjogVFJvb3RBY3Rpb25cbiAgKSA9PiB7XG4gICAgaWYgKGhhbmRsZXJzLmhhc093blByb3BlcnR5KGFjdGlvbi50eXBlKSkge1xuICAgICAgY29uc3QgcmVkdWNlciA9IGhhbmRsZXJzW2FjdGlvbi50eXBlXTtcbiAgICAgIGlmICh0eXBlb2YgcmVkdWNlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBFcnJvcihcbiAgICAgICAgICBgUmVkdWNlciB1bmRlciBcIiR7YWN0aW9uLnR5cGV9XCIga2V5IGlzIG5vdCBhIHZhbGlkIHJlZHVjZXJgXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVkdWNlcihzdGF0ZSwgYWN0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCByZWR1Y2VySGFuZGxlciA9ICgoXG4gICAgc2luZ2xlT3JNdWx0aXBsZUNyZWF0b3JzQW5kVHlwZXM6IGFueSxcbiAgICByZWR1Y2VyOiBhbnlcbiAgKSA9PiB7XG4gICAgY29uc3QgY3JlYXRvcnNBbmRUeXBlcyA9IEFycmF5LmlzQXJyYXkoc2luZ2xlT3JNdWx0aXBsZUNyZWF0b3JzQW5kVHlwZXMpXG4gICAgICA/IHNpbmdsZU9yTXVsdGlwbGVDcmVhdG9yc0FuZFR5cGVzXG4gICAgICA6IFtzaW5nbGVPck11bHRpcGxlQ3JlYXRvcnNBbmRUeXBlc107XG5cbiAgICBjb25zdCBuZXdIYW5kbGVyczogdHlwZW9mIGhhbmRsZXJzID0ge307XG5cbiAgICBjcmVhdG9yc0FuZFR5cGVzXG4gICAgICAubWFwKFxuICAgICAgICAoXG4gICAgICAgICAgYWNPclR5cGU6IFRSb290QWN0aW9uWyd0eXBlJ10gfCAoKC4uLmFyZ3M6IGFueVtdKSA9PiBUUm9vdEFjdGlvbiksXG4gICAgICAgICAgaW5kZXhcbiAgICAgICAgKSA9PlxuICAgICAgICAgIGNoZWNrVmFsaWRBY3Rpb25DcmVhdG9yKGFjT3JUeXBlKVxuICAgICAgICAgICAgPyBnZXRUeXBlKGFjT3JUeXBlKVxuICAgICAgICAgICAgOiBjaGVja1ZhbGlkQWN0aW9uVHlwZShhY09yVHlwZSlcbiAgICAgICAgICAgID8gYWNPclR5cGVcbiAgICAgICAgICAgIDogdGhyb3dJbnZhbGlkQWN0aW9uVHlwZU9yQWN0aW9uQ3JlYXRvcihpbmRleCArIDEpXG4gICAgICApXG4gICAgICAuZm9yRWFjaCh0eXBlID0+IChuZXdIYW5kbGVyc1t0eXBlXSA9IHJlZHVjZXIpKTtcblxuICAgIHJldHVybiBjcmVhdGVSZWR1Y2VyPFRTdGF0ZSwgVFJvb3RBY3Rpb24+KGluaXRpYWxTdGF0ZSwge1xuICAgICAgLi4uaGFuZGxlcnMsXG4gICAgICAuLi5uZXdIYW5kbGVycyxcbiAgICB9KTtcbiAgfSkgYXNcbiAgICB8IEhhbmRsZUFjdGlvbkNoYWluQXBpPFRTdGF0ZSwgVFJvb3RBY3Rpb24sIFRSb290QWN0aW9uPlxuICAgIHwgSGFuZGxlVHlwZUNoYWluQXBpPFRTdGF0ZSwgVFJvb3RBY3Rpb24sIFRSb290QWN0aW9uPjtcblxuICBjb25zdCBjaGFpbkFwaSA9IE9iamVjdC5hc3NpZ24ocm9vdFJlZHVjZXIsIHtcbiAgICBoYW5kbGVyczogeyAuLi5oYW5kbGVycyB9LFxuICAgIGhhbmRsZUFjdGlvbjogcmVkdWNlckhhbmRsZXIsXG4gICAgaGFuZGxlVHlwZTogcmVkdWNlckhhbmRsZXIsXG4gIH0pIGFzIFJlZHVjZXI8VFN0YXRlLCBUUm9vdEFjdGlvbj4gJlxuICAgIFJlYWRvbmx5PHtcbiAgICAgIGhhbmRsZXJzOiBJbml0aWFsSGFuZGxlcjxUU3RhdGUsIFJvb3RBY3Rpb24+O1xuICAgICAgaGFuZGxlQWN0aW9uOiBbdW5rbm93bl0gZXh0ZW5kcyBbVFJvb3RBY3Rpb25dXG4gICAgICAgID8gYW55XG4gICAgICAgIDogSGFuZGxlQWN0aW9uQ2hhaW5BcGk8VFN0YXRlLCBUUm9vdEFjdGlvbiwgVFJvb3RBY3Rpb24+O1xuICAgICAgaGFuZGxlVHlwZTogW3Vua25vd25dIGV4dGVuZHMgW1RSb290QWN0aW9uXVxuICAgICAgICA/IGFueVxuICAgICAgICA6IEhhbmRsZVR5cGVDaGFpbkFwaTxUU3RhdGUsIFRSb290QWN0aW9uLCBUUm9vdEFjdGlvbj47XG4gICAgfT47XG5cbiAgcmV0dXJuIGNoYWluQXBpO1xufVxuIiwiaW1wb3J0IHtcbiAgY2hlY2tJbnZhbGlkQWN0aW9uVHlwZUluQXJyYXksXG4gIGNoZWNrSXNFbXB0eSxcbiAgdGhyb3dJc0VtcHR5LFxufSBmcm9tICcuL3V0aWxzL3ZhbGlkYXRpb24nO1xuLyoqXG4gKiBAZGVzY3JpcHRpb24gKGN1cnJpZWQgYXNzZXJ0IGZ1bmN0aW9uKSBjaGVjayBpZiBhY3Rpb24gdHlwZSBpcyBlcXVhbCBnaXZlbiB0eXBlLWNvbnN0YW50XG4gKiBAZGVzY3JpcHRpb24gaXQgd29ya3Mgd2l0aCBkaXNjcmltaW5hdGVkIHVuaW9uIHR5cGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09mVHlwZTxUIGV4dGVuZHMgc3RyaW5nLCBBIGV4dGVuZHMgeyB0eXBlOiBzdHJpbmcgfT4oXG4gIHR5cGU6IFQgfCBUW10sXG4gIGFjdGlvbjogQVxuKTogYWN0aW9uIGlzIEEgZXh0ZW5kcyB7IHR5cGU6IFQgfSA/IEEgOiBuZXZlcjtcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gKGN1cnJpZWQgYXNzZXJ0IGZ1bmN0aW9uKSBjaGVjayBpZiBhY3Rpb24gdHlwZSBpcyBlcXVhbCBnaXZlbiB0eXBlLWNvbnN0YW50XG4gKiBAZGVzY3JpcHRpb24gaXQgd29ya3Mgd2l0aCBkaXNjcmltaW5hdGVkIHVuaW9uIHR5cGVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09mVHlwZTxUIGV4dGVuZHMgc3RyaW5nPihcbiAgdHlwZTogVCB8IFRbXVxuKTogPEEgZXh0ZW5kcyB7IHR5cGU6IHN0cmluZyB9PihcbiAgYWN0aW9uOiBBXG4pID0+IGFjdGlvbiBpcyBBIGV4dGVuZHMgeyB0eXBlOiBUIH0gPyBBIDogbmV2ZXI7XG5cbi8qKlxuICogaW1wbGVtZW50YXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2ZUeXBlPFQgZXh0ZW5kcyBzdHJpbmcsIEEgZXh0ZW5kcyB7IHR5cGU6IFQgfT4oXG4gIGFjdGlvblR5cGVPclR5cGVzOiBUIHwgVFtdLFxuICBhY3Rpb24/OiBBXG4pIHtcbiAgaWYgKGNoZWNrSXNFbXB0eShhY3Rpb25UeXBlT3JUeXBlcykpIHtcbiAgICB0aHJvd0lzRW1wdHkoMSk7XG4gIH1cblxuICBjb25zdCBhY3Rpb25UeXBlcyA9IEFycmF5LmlzQXJyYXkoYWN0aW9uVHlwZU9yVHlwZXMpXG4gICAgPyBhY3Rpb25UeXBlT3JUeXBlc1xuICAgIDogW2FjdGlvblR5cGVPclR5cGVzXTtcblxuICBhY3Rpb25UeXBlcy5mb3JFYWNoKGNoZWNrSW52YWxpZEFjdGlvblR5cGVJbkFycmF5KTtcblxuICBjb25zdCBhc3NlcnRGbiA9IChfYWN0aW9uOiBBKSA9PiBhY3Rpb25UeXBlcy5pbmNsdWRlcyhfYWN0aW9uLnR5cGUpO1xuXG4gIC8vIDEgYXJnIGNhc2UgPT4gcmV0dXJuIGN1cnJpZWQgdmVyc2lvblxuICBpZiAoYWN0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gYXNzZXJ0Rm47XG4gIH1cbiAgLy8gMiBhcmdzIGNhc2UgPT4gaW52b2tlIGFzc2VydEZuIGFuZCByZXR1cm4gdGhlIHJlc3VsdFxuICByZXR1cm4gYXNzZXJ0Rm4oYWN0aW9uKTtcbn1cbiIsImltcG9ydCB7IEFjdGlvbkNyZWF0b3JUeXBlTWV0YWRhdGEgfSBmcm9tICcuL3R5cGUtaGVscGVycyc7XG5pbXBvcnQge1xuICBjaGVja0ludmFsaWRBY3Rpb25DcmVhdG9ySW5BcnJheSxcbiAgY2hlY2tJc0VtcHR5LFxuICB0aHJvd0lzRW1wdHksXG59IGZyb20gJy4vdXRpbHMvdmFsaWRhdGlvbic7XG5cbmV4cG9ydCB0eXBlIEFjdGlvbkNyZWF0b3I8VCBleHRlbmRzIHsgdHlwZTogc3RyaW5nIH0+ID0gKChcbiAgLi4uYXJnczogYW55W11cbikgPT4gVCkgJlxuICBBY3Rpb25DcmVhdG9yVHlwZU1ldGFkYXRhPFRbJ3R5cGUnXT47XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIChjdXJyaWVkIGFzc2VydCBmdW5jdGlvbikgY2hlY2sgaWYgYW4gYWN0aW9uIGlzIHRoZSBpbnN0YW5jZSBvZiBnaXZlbiBhY3Rpb24tY3JlYXRvcihzKVxuICogQGRlc2NyaXB0aW9uIGl0IHdvcmtzIHdpdGggZGlzY3JpbWluYXRlZCB1bmlvbiB0eXBlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gaXNBY3Rpb25PZjxBQyBleHRlbmRzIEFjdGlvbkNyZWF0b3I8eyB0eXBlOiBzdHJpbmcgfT4+KFxuICBhY3Rpb25DcmVhdG9yOiBBQyB8IEFDW10sXG4gIGFjdGlvbjogeyB0eXBlOiBzdHJpbmcgfVxuKTogYWN0aW9uIGlzIFJldHVyblR5cGU8QUM+O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiAoY3VycmllZCBhc3NlcnQgZnVuY3Rpb24pIGNoZWNrIGlmIGFuIGFjdGlvbiBpcyB0aGUgaW5zdGFuY2Ugb2YgZ2l2ZW4gYWN0aW9uLWNyZWF0b3IocylcbiAqIEBkZXNjcmlwdGlvbiBpdCB3b3JrcyB3aXRoIGRpc2NyaW1pbmF0ZWQgdW5pb24gdHlwZXNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQWN0aW9uT2Y8QUMgZXh0ZW5kcyBBY3Rpb25DcmVhdG9yPHsgdHlwZTogc3RyaW5nIH0+PihcbiAgYWN0aW9uQ3JlYXRvcjogQUMgfCBBQ1tdXG4pOiAoYWN0aW9uOiB7IHR5cGU6IHN0cmluZyB9KSA9PiBhY3Rpb24gaXMgUmV0dXJuVHlwZTxBQz47XG5cbi8qKlxuICogaW1wbGVtZW50YXRpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQWN0aW9uT2Y8QUMgZXh0ZW5kcyBBY3Rpb25DcmVhdG9yPHsgdHlwZTogc3RyaW5nIH0+PihcbiAgYWN0aW9uQ3JlYXRvck9yQ3JlYXRvcnM6IEFDIHwgQUNbXSxcbiAgYWN0aW9uPzogeyB0eXBlOiBzdHJpbmcgfVxuKSB7XG4gIGlmIChjaGVja0lzRW1wdHkoYWN0aW9uQ3JlYXRvck9yQ3JlYXRvcnMpKSB7XG4gICAgdGhyb3dJc0VtcHR5KDEpO1xuICB9XG5cbiAgY29uc3QgYWN0aW9uQ3JlYXRvcnMgPSBBcnJheS5pc0FycmF5KGFjdGlvbkNyZWF0b3JPckNyZWF0b3JzKVxuICAgID8gYWN0aW9uQ3JlYXRvck9yQ3JlYXRvcnNcbiAgICA6IFthY3Rpb25DcmVhdG9yT3JDcmVhdG9yc107XG5cbiAgYWN0aW9uQ3JlYXRvcnMuZm9yRWFjaChjaGVja0ludmFsaWRBY3Rpb25DcmVhdG9ySW5BcnJheSk7XG5cbiAgY29uc3QgYXNzZXJ0Rm4gPSAoX2FjdGlvbjogeyB0eXBlOiBzdHJpbmcgfSkgPT5cbiAgICBhY3Rpb25DcmVhdG9ycy5zb21lKFxuICAgICAgYWN0aW9uQ3JlYXRvciA9PiBfYWN0aW9uLnR5cGUgPT09IGFjdGlvbkNyZWF0b3IuZ2V0VHlwZSEoKVxuICAgICk7XG5cbiAgLy8gMSBhcmcgY2FzZSA9PiByZXR1cm4gY3VycmllZCB2ZXJzaW9uXG4gIGlmIChhY3Rpb24gPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiBhc3NlcnRGbjtcbiAgfVxuICAvLyAyIGFyZ3MgY2FzZSA9PiBpbnZva2UgYXNzZXJ0Rm4gYW5kIHJldHVybiB0aGUgcmVzdWx0XG4gIHJldHVybiBhc3NlcnRGbihhY3Rpb24pO1xufVxuIiwiaW1wb3J0IHsgVHlwZUNvbnN0YW50LCBBY3Rpb25DcmVhdG9yIH0gZnJvbSAnLi4vdHlwZS1oZWxwZXJzJztcbmltcG9ydCB7IGFjdGlvbiB9IGZyb20gJy4uL2FjdGlvbic7XG5cbmV4cG9ydCB0eXBlIFBheWxvYWRNZXRhQWN0aW9uPFxuICBUIGV4dGVuZHMgVHlwZUNvbnN0YW50LFxuICBQLFxuICBNXG4+ID0gUCBleHRlbmRzIHVuZGVmaW5lZFxuICA/IE0gZXh0ZW5kcyB1bmRlZmluZWRcbiAgICA/IHsgdHlwZTogVCB9XG4gICAgOiB7IHR5cGU6IFQ7IG1ldGE6IE0gfVxuICA6IE0gZXh0ZW5kcyB1bmRlZmluZWRcbiAgPyB7IHR5cGU6IFQ7IHBheWxvYWQ6IFAgfVxuICA6IHsgdHlwZTogVDsgcGF5bG9hZDogUDsgbWV0YTogTSB9O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiB0eXBlc2FmZSBhY3Rpb24tY3JlYXRvciBmYWN0b3J5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBY3Rpb248XG4gIFQgZXh0ZW5kcyBUeXBlQ29uc3RhbnQsXG4gIEFDIGV4dGVuZHMgQWN0aW9uQ3JlYXRvcjxUPiA9ICgpID0+IHsgdHlwZTogVCB9XG4+KFxuICB0eXBlOiBULFxuICBjcmVhdGVIYW5kbGVyPzogKFxuICAgIGFjdGlvbkNhbGxiYWNrOiA8UCA9IHVuZGVmaW5lZCwgTSA9IHVuZGVmaW5lZD4oXG4gICAgICBwYXlsb2FkPzogUCxcbiAgICAgIG1ldGE/OiBNXG4gICAgKSA9PiBQYXlsb2FkTWV0YUFjdGlvbjxULCBQLCBNPlxuICApID0+IEFDXG4pOiBBQyB7XG4gIC8vIHZhbGlkYXRpb24gaXMgYWxyZWFkeSBkb25lIGluIGFjdGlvbiBmdW5jdGlvblxuXG4gIGNvbnN0IGFjdGlvbkNyZWF0b3I6IEFDID1cbiAgICBjcmVhdGVIYW5kbGVyID09IG51bGxcbiAgICAgID8gKCgoKSA9PiBhY3Rpb24odHlwZSkpIGFzIEFDKVxuICAgICAgOiBjcmVhdGVIYW5kbGVyKGFjdGlvbi5iaW5kKG51bGwsIHR5cGUpIGFzIFBhcmFtZXRlcnM8XG4gICAgICAgICAgdHlwZW9mIGNyZWF0ZUhhbmRsZXJcbiAgICAgICAgPlswXSk7XG5cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oYWN0aW9uQ3JlYXRvciwge1xuICAgIGdldFR5cGU6ICgpID0+IHR5cGUsXG4gICAgLy8gcmVkdXgtYWN0aW9ucyBjb21wYXRpYmlsaXR5XG4gICAgdG9TdHJpbmc6ICgpID0+IHR5cGUsXG4gIH0pO1xufVxuIiwiaW1wb3J0IHsgQWN0aW9uQ3JlYXRvciwgVHlwZUNvbnN0YW50IH0gZnJvbSAnLi4vdHlwZS1oZWxwZXJzJztcbmltcG9ydCB7XG4gIGNoZWNrSXNFbXB0eSxcbiAgdGhyb3dJc0VtcHR5LFxuICBjaGVja0ludmFsaWRBY3Rpb25UeXBlLFxuICB0aHJvd0ludmFsaWRBY3Rpb25UeXBlLFxufSBmcm9tICcuLi91dGlscy92YWxpZGF0aW9uJztcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gY3JlYXRlIGN1c3RvbSBhY3Rpb24tY3JlYXRvciB1c2luZyBjb25zdHJ1Y3RvciBmdW5jdGlvbiB3aXRoIGluamVjdGVkIHR5cGUgYXJndW1lbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUN1c3RvbUFjdGlvbjxcbiAgVCBleHRlbmRzIFR5cGVDb25zdGFudCxcbiAgQUMgZXh0ZW5kcyBBY3Rpb25DcmVhdG9yPFQ+ID0gKCkgPT4geyB0eXBlOiBUIH1cbj4odHlwZTogVCwgY3JlYXRlSGFuZGxlcj86ICh0eXBlOiBUKSA9PiBBQyk6IEFDIHtcbiAgaWYgKGNoZWNrSXNFbXB0eSh0eXBlKSkge1xuICAgIHRocm93SXNFbXB0eSgxKTtcbiAgfVxuXG4gIGlmIChjaGVja0ludmFsaWRBY3Rpb25UeXBlKHR5cGUpKSB7XG4gICAgdGhyb3dJbnZhbGlkQWN0aW9uVHlwZSgxKTtcbiAgfVxuXG4gIGNvbnN0IGFjdGlvbkNyZWF0b3I6IEFDID1cbiAgICBjcmVhdGVIYW5kbGVyICE9IG51bGwgPyBjcmVhdGVIYW5kbGVyKHR5cGUpIDogKCgoKSA9PiAoeyB0eXBlIH0pKSBhcyBBQyk7XG5cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oYWN0aW9uQ3JlYXRvciwge1xuICAgIGdldFR5cGU6ICgpID0+IHR5cGUsXG4gICAgLy8gcmVkdXgtYWN0aW9ucyBjb21wYXRpYmlsaXR5XG4gICAgdG9TdHJpbmc6ICgpID0+IHR5cGUsXG4gIH0pO1xufVxuIiwiaW1wb3J0IHsgVHlwZUNvbnN0YW50LCBBY3Rpb25DcmVhdG9yQnVpbGRlciB9IGZyb20gJy4uL3R5cGUtaGVscGVycyc7XG5pbXBvcnQge1xuICBjaGVja0lzRW1wdHksXG4gIHRocm93SXNFbXB0eSxcbiAgY2hlY2tJbnZhbGlkQWN0aW9uVHlwZSxcbiAgdGhyb3dJbnZhbGlkQWN0aW9uVHlwZSxcbn0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdGlvbic7XG5pbXBvcnQgeyBjcmVhdGVDdXN0b21BY3Rpb24gfSBmcm9tICcuL2NyZWF0ZS1jdXN0b20tYWN0aW9uJztcblxuLyoqIEBwcml2YXRlICovXG5leHBvcnQgdHlwZSBBY3Rpb25CdWlsZGVyTWFwPFxuICBUVHlwZSBleHRlbmRzIFR5cGVDb25zdGFudCxcbiAgVEFjdGlvblByb3BzIGV4dGVuZHMgYW55LFxuICBUUGF5bG9hZEFyZyBleHRlbmRzIGFueSA9IHVuZGVmaW5lZCxcbiAgVE1ldGFBcmcgZXh0ZW5kcyBhbnkgPSB1bmRlZmluZWRcbj4gPSBbVE1ldGFBcmddIGV4dGVuZHMgW3VuZGVmaW5lZF1cbiAgPyBbVFBheWxvYWRBcmddIGV4dGVuZHMgW3VuZGVmaW5lZF1cbiAgICA/ICgpID0+IHsgdHlwZTogVFR5cGUgfSAmIFRBY3Rpb25Qcm9wc1xuICAgIDogKHBheWxvYWQ6IFRQYXlsb2FkQXJnKSA9PiB7IHR5cGU6IFRUeXBlIH0gJiBUQWN0aW9uUHJvcHNcbiAgOiAocGF5bG9hZDogVFBheWxvYWRBcmcsIG1ldGE6IFRNZXRhQXJnKSA9PiB7IHR5cGU6IFRUeXBlIH0gJiBUQWN0aW9uUHJvcHM7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWN0aW9uQnVpbGRlcjxUIGV4dGVuZHMgVHlwZUNvbnN0YW50PiB7XG4gIDxQID0gdW5kZWZpbmVkLCBNID0gdW5kZWZpbmVkPigpOiBBY3Rpb25DcmVhdG9yQnVpbGRlcjxULCBQLCBNPjtcbiAgbWFwPFIsIFAgPSB1bmRlZmluZWQsIE0gPSB1bmRlZmluZWQ+KFxuICAgIGZuOiAocGF5bG9hZDogUCwgbWV0YTogTSkgPT4gUlxuICApOiBBY3Rpb25CdWlsZGVyTWFwPFQsIFIsIFAsIE0+O1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBjcmVhdGUgYW4gYWN0aW9uLWNyZWF0b3Igb2YgYSBnaXZlbiBmdW5jdGlvbiB0aGF0IGNvbnRhaW5zIGhpZGRlbiBcInR5cGVcIiBtZXRhZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU3RhbmRhcmRBY3Rpb248VCBleHRlbmRzIFR5cGVDb25zdGFudD4oXG4gIHR5cGU6IFRcbik6IEFjdGlvbkJ1aWxkZXI8VD4ge1xuICBpZiAoY2hlY2tJc0VtcHR5KHR5cGUpKSB7XG4gICAgdGhyb3dJc0VtcHR5KDEpO1xuICB9XG5cbiAgaWYgKGNoZWNrSW52YWxpZEFjdGlvblR5cGUodHlwZSkpIHtcbiAgICB0aHJvd0ludmFsaWRBY3Rpb25UeXBlKDEpO1xuICB9XG5cbiAgZnVuY3Rpb24gY29uc3RydWN0b3I8UCwgTSA9IHVuZGVmaW5lZD4oKTogQWN0aW9uQ3JlYXRvckJ1aWxkZXI8VCwgUCwgTT4ge1xuICAgIHJldHVybiBjcmVhdGVDdXN0b21BY3Rpb24odHlwZSwgX3R5cGUgPT4gKHBheWxvYWQ6IFAsIG1ldGE6IE0pID0+ICh7XG4gICAgICB0eXBlOiBfdHlwZSxcbiAgICAgIHBheWxvYWQsXG4gICAgICBtZXRhLFxuICAgIH0pKSBhcyBBY3Rpb25DcmVhdG9yQnVpbGRlcjxULCBQLCBNPjtcbiAgfVxuXG4gIGZ1bmN0aW9uIG1hcDxSLCBQLCBNPihcbiAgICBmbjogKHBheWxvYWQ6IFAsIG1ldGE6IE0pID0+IFJcbiAgKTogQWN0aW9uQnVpbGRlck1hcDxULCBSLCBQLCBNPiB7XG4gICAgcmV0dXJuIGNyZWF0ZUN1c3RvbUFjdGlvbih0eXBlLCBfdHlwZSA9PiAocGF5bG9hZDogUCwgbWV0YTogTSkgPT5cbiAgICAgIE9iamVjdC5hc3NpZ24oZm4ocGF5bG9hZCwgbWV0YSksIHsgdHlwZTogX3R5cGUgfSlcbiAgICApIGFzIEFjdGlvbkJ1aWxkZXJNYXA8VCwgUiwgUCwgTT47XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmFzc2lnbihjb25zdHJ1Y3RvciwgeyBtYXAgfSk7XG59XG4iLCJpbXBvcnQgeyBjcmVhdGVBY3Rpb24gfSBmcm9tICcuL2NyZWF0ZS1hY3Rpb24nO1xuaW1wb3J0IHsgY3JlYXRlQ3VzdG9tQWN0aW9uIH0gZnJvbSAnLi9jcmVhdGUtY3VzdG9tLWFjdGlvbic7XG5pbXBvcnQgeyBjcmVhdGVTdGFuZGFyZEFjdGlvbiB9IGZyb20gJy4vY3JlYXRlLXN0YW5kYXJkLWFjdGlvbic7XG5cbmV4cG9ydCBkZWZhdWx0IHsgY3JlYXRlQWN0aW9uLCBjcmVhdGVDdXN0b21BY3Rpb24sIGNyZWF0ZVN0YW5kYXJkQWN0aW9uIH07XG4iXX0=