83fc362544ef002e252575724f5dba4b
"use strict";

exports.__esModule = true;
exports["default"] = void 0;

var _ramda = require("ramda");

var _resolveP = _interopRequireDefault(require("./resolveP"));

var _rejectP = _interopRequireDefault(require("./rejectP"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

var async = (0, _ramda.curryN)(1, function (generatorFn) {
  function asyncWrapper() {
    var iterator = (0, _ramda.bind)(generatorFn, this).apply(void 0, arguments);

    var handle = function handle(result) {
      var resolved = (0, _resolveP["default"])(result.value);
      return result.done ? resolved : resolved.then(function (value) {
        return handle(iterator.next(value));
      }, function (error) {
        return handle(iterator["throw"](error));
      });
    };

    try {
      return handle(iterator.next());
    } catch (error) {
      return (0, _rejectP["default"])(error);
    }
  }

  if (generatorFn.length > 0) {
    return (0, _ramda.curryN)(generatorFn.length, asyncWrapper);
  }

  return asyncWrapper;
});
var _default = async;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jLmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJfX2VzTW9kdWxlIiwiX3JhbWRhIiwicmVxdWlyZSIsIl9yZXNvbHZlUCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfcmVqZWN0UCIsIm9iaiIsImFzeW5jIiwiY3VycnlOIiwiZ2VuZXJhdG9yRm4iLCJhc3luY1dyYXBwZXIiLCJpdGVyYXRvciIsImJpbmQiLCJhcHBseSIsImFyZ3VtZW50cyIsImhhbmRsZSIsInJlc3VsdCIsInJlc29sdmVkIiwidmFsdWUiLCJkb25lIiwidGhlbiIsIm5leHQiLCJlcnJvciIsImxlbmd0aCIsIl9kZWZhdWx0Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsT0FBTyxDQUFDQyxVQUFSLEdBQXFCLElBQXJCO0FBQ0FELE9BQU8sQ0FBQyxTQUFELENBQVAsR0FBcUIsS0FBSyxDQUExQjs7QUFFQSxJQUFJRSxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxPQUFELENBQXBCOztBQUVBLElBQUlDLFNBQVMsR0FBR0Msc0JBQXNCLENBQUNGLE9BQU8sQ0FBQyxZQUFELENBQVIsQ0FBdEM7O0FBRUEsSUFBSUcsUUFBUSxHQUFHRCxzQkFBc0IsQ0FBQ0YsT0FBTyxDQUFDLFdBQUQsQ0FBUixDQUFyQzs7QUFFQSxTQUFTRSxzQkFBVCxDQUFnQ0UsR0FBaEMsRUFBcUM7QUFBRSxTQUFPQSxHQUFHLElBQUlBLEdBQUcsQ0FBQ04sVUFBWCxHQUF3Qk0sR0FBeEIsR0FBOEI7QUFBRSxlQUFXQTtBQUFiLEdBQXJDO0FBQTBEOztBQTRCakcsSUFBSUMsS0FBSyxHQUFHLENBQUMsR0FBR04sTUFBTSxDQUFDTyxNQUFYLEVBQW1CLENBQW5CLEVBQXNCLFVBQVVDLFdBQVYsRUFBdUI7QUFDdkQsV0FBU0MsWUFBVCxHQUF3QjtBQUN0QixRQUFJQyxRQUFRLEdBQUcsQ0FBQyxHQUFHVixNQUFNLENBQUNXLElBQVgsRUFBaUJILFdBQWpCLEVBQThCLElBQTlCLEVBQW9DSSxLQUFwQyxDQUEwQyxLQUFLLENBQS9DLEVBQWtEQyxTQUFsRCxDQUFmOztBQUVBLFFBQUlDLE1BQU0sR0FBRyxTQUFTQSxNQUFULENBQWdCQyxNQUFoQixFQUF3QjtBQUNuQyxVQUFJQyxRQUFRLEdBQUcsQ0FBQyxHQUFHZCxTQUFTLENBQUMsU0FBRCxDQUFiLEVBQTBCYSxNQUFNLENBQUNFLEtBQWpDLENBQWY7QUFDQSxhQUFPRixNQUFNLENBQUNHLElBQVAsR0FBY0YsUUFBZCxHQUF5QkEsUUFBUSxDQUFDRyxJQUFULENBQWMsVUFBVUYsS0FBVixFQUFpQjtBQUM3RCxlQUFPSCxNQUFNLENBQUNKLFFBQVEsQ0FBQ1UsSUFBVCxDQUFjSCxLQUFkLENBQUQsQ0FBYjtBQUNELE9BRitCLEVBRTdCLFVBQVVJLEtBQVYsRUFBaUI7QUFDbEIsZUFBT1AsTUFBTSxDQUFDSixRQUFRLENBQUMsT0FBRCxDQUFSLENBQWtCVyxLQUFsQixDQUFELENBQWI7QUFDRCxPQUorQixDQUFoQztBQUtELEtBUEQ7O0FBU0EsUUFBSTtBQUNGLGFBQU9QLE1BQU0sQ0FBQ0osUUFBUSxDQUFDVSxJQUFULEVBQUQsQ0FBYjtBQUNELEtBRkQsQ0FFRSxPQUFPQyxLQUFQLEVBQWM7QUFDZCxhQUFPLENBQUMsR0FBR2pCLFFBQVEsQ0FBQyxTQUFELENBQVosRUFBeUJpQixLQUF6QixDQUFQO0FBQ0Q7QUFDRjs7QUFFRCxNQUFJYixXQUFXLENBQUNjLE1BQVosR0FBcUIsQ0FBekIsRUFBNEI7QUFDMUIsV0FBTyxDQUFDLEdBQUd0QixNQUFNLENBQUNPLE1BQVgsRUFBbUJDLFdBQVcsQ0FBQ2MsTUFBL0IsRUFBdUNiLFlBQXZDLENBQVA7QUFDRDs7QUFFRCxTQUFPQSxZQUFQO0FBQ0QsQ0F6QlcsQ0FBWjtBQTBCQSxJQUFJYyxRQUFRLEdBQUdqQixLQUFmO0FBQ0FSLE9BQU8sQ0FBQyxTQUFELENBQVAsR0FBcUJ5QixRQUFyQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB2b2lkIDA7XG5cbnZhciBfcmFtZGEgPSByZXF1aXJlKFwicmFtZGFcIik7XG5cbnZhciBfcmVzb2x2ZVAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuL3Jlc29sdmVQXCIpKTtcblxudmFyIF9yZWplY3RQID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9yZWplY3RQXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9XG5cbi8qKlxuICogVGFrZXMgYSBnZW5lcmF0b3IgZnVuY3Rpb24gYW5kIHJldHVybnMgYW4gYXN5bmMgZnVuY3Rpb24uXG4gKiBUaGUgYXN5bmMgZnVuY3Rpb24gcmV0dXJuZWQgaXMgYSBjdXJyaWVkIGZ1bmN0aW9uIHdob3NlIGFyaXR5IG1hdGNoZXMgdGhhdCBvZiB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uLlxuICpcbiAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gaXMgaGFuZHkgZm9yIGVudmlyb25tZW50cyB0aGF0IGRvZXMgc3VwcG9ydCBnZW5lcmF0b3JzIGJ1dCBkb2Vzbid0IHN1cHBvcnQgYXN5bmMvYXdhaXQuXG4gKlxuICogQGZ1bmMgYXN5bmNcbiAqIEBtZW1iZXJPZiBSQVxuICogQHNpbmNlIHtAbGluayBodHRwczovL2NoYXIwbi5naXRodWIuaW8vcmFtZGEtYWRqdW5jdC8yLjE2LjB8djIuMTYuMH1cbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHNpZyBQcm9taXNlIGMgPT4gKGEsIGIsIC4uLikgLT4gYSAtPiBiIC0+IC4uLiAtPiBjXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBnZW5lcmF0b3JGbiBUaGUgZ2VuZXJhdG9yIGZ1bmN0aW9uXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gQ3VycmllZCBhc3luYyBmdW5jdGlvblxuICogQHNlZSB7QGxpbmsgaHR0cHM6Ly93d3cucHJvbWlzZWpzLm9yZy9nZW5lcmF0b3JzL31cbiAqIEBleGFtcGxlXG4gKlxuICogY29uc3QgYXN5bmNGbiA9IFJBLmFzeW5jKGZ1bmN0aW9uKiBnZW5lcmF0b3IodmFsMSwgdmFsMikge1xuICogICBjb25zdCBhID0geWllbGQgUHJvbWlzZS5yZXNvbHZlKHZhbDEpO1xuICogICBjb25zdCBiID0geWllbGQgUHJvbWlzZS5yZXNvbHZlKHZhbDIpO1xuICpcbiAqICAgcmV0dXJuIGEgKyBiO1xuICogfSk7XG4gKlxuICogYXN5bmNGbigxLCAyKTsgLy89PiBQcm9taXNlKDMpXG4gKlxuICovXG52YXIgYXN5bmMgPSAoMCwgX3JhbWRhLmN1cnJ5TikoMSwgZnVuY3Rpb24gKGdlbmVyYXRvckZuKSB7XG4gIGZ1bmN0aW9uIGFzeW5jV3JhcHBlcigpIHtcbiAgICB2YXIgaXRlcmF0b3IgPSAoMCwgX3JhbWRhLmJpbmQpKGdlbmVyYXRvckZuLCB0aGlzKS5hcHBseSh2b2lkIDAsIGFyZ3VtZW50cyk7XG5cbiAgICB2YXIgaGFuZGxlID0gZnVuY3Rpb24gaGFuZGxlKHJlc3VsdCkge1xuICAgICAgdmFyIHJlc29sdmVkID0gKDAsIF9yZXNvbHZlUFtcImRlZmF1bHRcIl0pKHJlc3VsdC52YWx1ZSk7XG4gICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXNvbHZlZCA6IHJlc29sdmVkLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGUoaXRlcmF0b3IubmV4dCh2YWx1ZSkpO1xuICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBoYW5kbGUoaXRlcmF0b3JbXCJ0aHJvd1wiXShlcnJvcikpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gaGFuZGxlKGl0ZXJhdG9yLm5leHQoKSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiAoMCwgX3JlamVjdFBbXCJkZWZhdWx0XCJdKShlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgaWYgKGdlbmVyYXRvckZuLmxlbmd0aCA+IDApIHtcbiAgICByZXR1cm4gKDAsIF9yYW1kYS5jdXJyeU4pKGdlbmVyYXRvckZuLmxlbmd0aCwgYXN5bmNXcmFwcGVyKTtcbiAgfVxuXG4gIHJldHVybiBhc3luY1dyYXBwZXI7XG59KTtcbnZhciBfZGVmYXVsdCA9IGFzeW5jO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBfZGVmYXVsdDsiXX0=