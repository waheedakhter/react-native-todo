{"version":3,"sources":["async.js"],"names":["exports","__esModule","_ramda","require","_resolveP","_interopRequireDefault","_rejectP","obj","async","curryN","generatorFn","asyncWrapper","iterator","bind","apply","arguments","handle","result","resolved","value","done","then","next","error","length","_default"],"mappings":"AAAA;;AAEAA,OAAO,CAACC,UAAR,GAAqB,IAArB;AACAD,OAAO,CAAC,SAAD,CAAP,GAAqB,KAAK,CAA1B;;AAEA,IAAIE,MAAM,GAAGC,OAAO,CAAC,OAAD,CAApB;;AAEA,IAAIC,SAAS,GAAGC,sBAAsB,CAACF,OAAO,CAAC,YAAD,CAAR,CAAtC;;AAEA,IAAIG,QAAQ,GAAGD,sBAAsB,CAACF,OAAO,CAAC,WAAD,CAAR,CAArC;;AAEA,SAASE,sBAAT,CAAgCE,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACN,UAAX,GAAwBM,GAAxB,GAA8B;AAAE,eAAWA;AAAb,GAArC;AAA0D;;AA4BjG,IAAIC,KAAK,GAAG,CAAC,GAAGN,MAAM,CAACO,MAAX,EAAmB,CAAnB,EAAsB,UAAUC,WAAV,EAAuB;AACvD,WAASC,YAAT,GAAwB;AACtB,QAAIC,QAAQ,GAAG,CAAC,GAAGV,MAAM,CAACW,IAAX,EAAiBH,WAAjB,EAA8B,IAA9B,EAAoCI,KAApC,CAA0C,KAAK,CAA/C,EAAkDC,SAAlD,CAAf;;AAEA,QAAIC,MAAM,GAAG,SAASA,MAAT,CAAgBC,MAAhB,EAAwB;AACnC,UAAIC,QAAQ,GAAG,CAAC,GAAGd,SAAS,CAAC,SAAD,CAAb,EAA0Ba,MAAM,CAACE,KAAjC,CAAf;AACA,aAAOF,MAAM,CAACG,IAAP,GAAcF,QAAd,GAAyBA,QAAQ,CAACG,IAAT,CAAc,UAAUF,KAAV,EAAiB;AAC7D,eAAOH,MAAM,CAACJ,QAAQ,CAACU,IAAT,CAAcH,KAAd,CAAD,CAAb;AACD,OAF+B,EAE7B,UAAUI,KAAV,EAAiB;AAClB,eAAOP,MAAM,CAACJ,QAAQ,CAAC,OAAD,CAAR,CAAkBW,KAAlB,CAAD,CAAb;AACD,OAJ+B,CAAhC;AAKD,KAPD;;AASA,QAAI;AACF,aAAOP,MAAM,CAACJ,QAAQ,CAACU,IAAT,EAAD,CAAb;AACD,KAFD,CAEE,OAAOC,KAAP,EAAc;AACd,aAAO,CAAC,GAAGjB,QAAQ,CAAC,SAAD,CAAZ,EAAyBiB,KAAzB,CAAP;AACD;AACF;;AAED,MAAIb,WAAW,CAACc,MAAZ,GAAqB,CAAzB,EAA4B;AAC1B,WAAO,CAAC,GAAGtB,MAAM,CAACO,MAAX,EAAmBC,WAAW,CAACc,MAA/B,EAAuCb,YAAvC,CAAP;AACD;;AAED,SAAOA,YAAP;AACD,CAzBW,CAAZ;AA0BA,IAAIc,QAAQ,GAAGjB,KAAf;AACAR,OAAO,CAAC,SAAD,CAAP,GAAqByB,QAArB","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar _ramda = require(\"ramda\");\n\nvar _resolveP = _interopRequireDefault(require(\"./resolveP\"));\n\nvar _rejectP = _interopRequireDefault(require(\"./rejectP\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/**\n * Takes a generator function and returns an async function.\n * The async function returned is a curried function whose arity matches that of the generator function.\n *\n * Note: This function is handy for environments that does support generators but doesn't support async/await.\n *\n * @func async\n * @memberOf RA\n * @since {@link https://char0n.github.io/ramda-adjunct/2.16.0|v2.16.0}\n * @category Function\n * @sig Promise c => (a, b, ...) -> a -> b -> ... -> c\n * @param {Function} generatorFn The generator function\n * @return {Function} Curried async function\n * @see {@link https://www.promisejs.org/generators/}\n * @example\n *\n * const asyncFn = RA.async(function* generator(val1, val2) {\n *   const a = yield Promise.resolve(val1);\n *   const b = yield Promise.resolve(val2);\n *\n *   return a + b;\n * });\n *\n * asyncFn(1, 2); //=> Promise(3)\n *\n */\nvar async = (0, _ramda.curryN)(1, function (generatorFn) {\n  function asyncWrapper() {\n    var iterator = (0, _ramda.bind)(generatorFn, this).apply(void 0, arguments);\n\n    var handle = function handle(result) {\n      var resolved = (0, _resolveP[\"default\"])(result.value);\n      return result.done ? resolved : resolved.then(function (value) {\n        return handle(iterator.next(value));\n      }, function (error) {\n        return handle(iterator[\"throw\"](error));\n      });\n    };\n\n    try {\n      return handle(iterator.next());\n    } catch (error) {\n      return (0, _rejectP[\"default\"])(error);\n    }\n  }\n\n  if (generatorFn.length > 0) {\n    return (0, _ramda.curryN)(generatorFn.length, asyncWrapper);\n  }\n\n  return asyncWrapper;\n});\nvar _default = async;\nexports[\"default\"] = _default;"]}