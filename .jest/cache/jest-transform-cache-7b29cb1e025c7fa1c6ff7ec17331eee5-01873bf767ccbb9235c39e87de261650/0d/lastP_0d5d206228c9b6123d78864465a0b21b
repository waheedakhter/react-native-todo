4a72339514475b58d4eb693e72f492ea
"use strict";

exports.__esModule = true;
exports["default"] = void 0;

var _ramda = require("ramda");

var _allP = _interopRequireDefault(require("./allP"));

var _lengthEq = _interopRequireDefault(require("./lengthEq"));

var _lengthGte = _interopRequireDefault(require("./lengthGte"));

var _rejectP = _interopRequireDefault(require("./rejectP"));

var _resolveP = _interopRequireDefault(require("./resolveP"));

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(o);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

var lastP = (0, _ramda.curryN)(1, function (iterable) {
  var fulfilled = [];
  var rejected = [];
  var onFulfill = (0, _ramda.bind)(fulfilled.push, fulfilled);
  var onReject = (0, _ramda.bind)(rejected.push, rejected);
  var listOfPromises = (0, _ramda.map)(function (p) {
    return (0, _resolveP["default"])(p).then(onFulfill)["catch"](onReject);
  }, _toConsumableArray(iterable));
  return (0, _allP["default"])(listOfPromises).then(function () {
    if ((0, _lengthEq["default"])(0, fulfilled) && (0, _lengthEq["default"])(0, rejected)) {
      return undefined;
    }

    if ((0, _lengthGte["default"])(1, fulfilled)) {
      return (0, _ramda.last)(fulfilled);
    }

    return (0, _rejectP["default"])(rejected);
  });
});
var _default = lastP;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxhc3RQLmpzIl0sIm5hbWVzIjpbImV4cG9ydHMiLCJfX2VzTW9kdWxlIiwiX3JhbWRhIiwicmVxdWlyZSIsIl9hbGxQIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9sZW5ndGhFcSIsIl9sZW5ndGhHdGUiLCJfcmVqZWN0UCIsIl9yZXNvbHZlUCIsIm9iaiIsIl90b0NvbnN1bWFibGVBcnJheSIsImFyciIsIl9hcnJheVdpdGhvdXRIb2xlcyIsIl9pdGVyYWJsZVRvQXJyYXkiLCJfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJfbm9uSXRlcmFibGVTcHJlYWQiLCJUeXBlRXJyb3IiLCJvIiwibWluTGVuIiwiX2FycmF5TGlrZVRvQXJyYXkiLCJuIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwic2xpY2UiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJBcnJheSIsImZyb20iLCJ0ZXN0IiwiaXRlciIsIlN5bWJvbCIsIml0ZXJhdG9yIiwiaXNBcnJheSIsImxlbiIsImxlbmd0aCIsImkiLCJhcnIyIiwibGFzdFAiLCJjdXJyeU4iLCJpdGVyYWJsZSIsImZ1bGZpbGxlZCIsInJlamVjdGVkIiwib25GdWxmaWxsIiwiYmluZCIsInB1c2giLCJvblJlamVjdCIsImxpc3RPZlByb21pc2VzIiwibWFwIiwicCIsInRoZW4iLCJ1bmRlZmluZWQiLCJsYXN0IiwiX2RlZmF1bHQiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBQSxPQUFPLENBQUNDLFVBQVIsR0FBcUIsSUFBckI7QUFDQUQsT0FBTyxDQUFDLFNBQUQsQ0FBUCxHQUFxQixLQUFLLENBQTFCOztBQUVBLElBQUlFLE1BQU0sR0FBR0MsT0FBTyxDQUFDLE9BQUQsQ0FBcEI7O0FBRUEsSUFBSUMsS0FBSyxHQUFHQyxzQkFBc0IsQ0FBQ0YsT0FBTyxDQUFDLFFBQUQsQ0FBUixDQUFsQzs7QUFFQSxJQUFJRyxTQUFTLEdBQUdELHNCQUFzQixDQUFDRixPQUFPLENBQUMsWUFBRCxD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M0IsRUFBOEJvQyxTQUE5QixDQUFKLEVBQThDO0FBQzVDLGFBQU8sQ0FBQyxHQUFHekMsTUFBTSxDQUFDb0QsSUFBWCxFQUFpQlgsU0FBakIsQ0FBUDtBQUNEOztBQUVELFdBQU8sQ0FBQyxHQUFHbkMsUUFBUSxDQUFDLFNBQUQsQ0FBWixFQUF5Qm9DLFFBQXpCLENBQVA7QUFDRCxHQVZNLENBQVA7QUFXRCxDQW5CVyxDQUFaO0FBb0JBLElBQUlXLFFBQVEsR0FBR2YsS0FBZjtBQUNBeEMsT0FBTyxDQUFDLFNBQUQsQ0FBUCxHQUFxQnVELFFBQXJCIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IHZvaWQgMDtcblxudmFyIF9yYW1kYSA9IHJlcXVpcmUoXCJyYW1kYVwiKTtcblxudmFyIF9hbGxQID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9hbGxQXCIpKTtcblxudmFyIF9sZW5ndGhFcSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vbGVuZ3RoRXFcIikpO1xuXG52YXIgX2xlbmd0aEd0ZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vbGVuZ3RoR3RlXCIpKTtcblxudmFyIF9yZWplY3RQID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9yZWplY3RQXCIpKTtcblxudmFyIF9yZXNvbHZlUCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vcmVzb2x2ZVBcIikpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBcImRlZmF1bHRcIjogb2JqIH07IH1cblxuZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikgeyByZXR1cm4gX2FycmF5V2l0aG91dEhvbGVzKGFycikgfHwgX2l0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IF9ub25JdGVyYWJsZVNwcmVhZCgpOyB9XG5cbmZ1bmN0aW9uIF9ub25JdGVyYWJsZVNwcmVhZCgpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7IH1cblxuZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gXCJPYmplY3RcIiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gXCJNYXBcIiB8fCBuID09PSBcIlNldFwiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09IFwiQXJndW1lbnRzXCIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9XG5cbmZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikgeyBpZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBpdGVyW1N5bWJvbC5pdGVyYXRvcl0gIT0gbnVsbCB8fCBpdGVyW1wiQEBpdGVyYXRvclwiXSAhPSBudWxsKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTsgfVxuXG5mdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7IGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShhcnIpOyB9XG5cbmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHsgYXJyMltpXSA9IGFycltpXTsgfSByZXR1cm4gYXJyMjsgfVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIGJ5IHRoZSBsYXN0IGdpdmVuIHByb21pc2UgdG8gYmUgZnVsZmlsbGVkLFxuICogb3IgcmVqZWN0ZWQgd2l0aCBhbiBhcnJheSBvZiByZWplY3Rpb24gcmVhc29ucyBpZiBhbGwgb2YgdGhlIGdpdmVuIHByb21pc2VzIGFyZSByZWplY3RlZC5cbiAqXG4gKiBAZnVuYyBsYXN0UFxuICogQG1lbWJlck9mIFJBXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBzaW5jZSB7QGxpbmsgaHR0cHM6Ly9jaGFyMG4uZ2l0aHViLmlvL3JhbWRhLWFkanVuY3QvMi4yMy4wfHYyLjIzLjB9XG4gKiBAc2lnIFtQcm9taXNlIGFdIC0+IFByb21pc2UgYVxuICogQHBhcmFtIHtJdGVyYWJsZS48Kj59IGl0ZXJhYmxlIEFuIGl0ZXJhYmxlIG9iamVjdCBzdWNoIGFzIGFuIEFycmF5IG9yIFN0cmluZ1xuICogQHJldHVybiB7UHJvbWlzZX0gQSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIGJ5IHRoZSBsYXN0IGdpdmVuIHByb21pc2UgdG8gYmUgZnVsZmlsbGVkLCBvciByZWplY3RlZCB3aXRoIGFuIGFycmF5IG9mIHJlamVjdGlvbiByZWFzb25zIGlmIGFsbCBvZiB0aGUgZ2l2ZW4gcHJvbWlzZXMgYXJlIHJlamVjdGVkLlxuICogQHNlZSB7QGxpbmsgUkEuYW55UHxhbnlQfVxuICogQGV4YW1wbGVcbiAqXG4gKiBjb25zdCBkZWxheVAgPSB0aW1lb3V0ID0+IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKHRpbWVvdXQpLCB0aW1lb3V0KSk7XG4gKiBkZWxheVAucmVqZWN0ID0gdGltZW91dCA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBzZXRUaW1lb3V0KCgpID0+IHJlamVjdCh0aW1lb3V0KSwgdGltZW91dCkpO1xuICogUkEubGFzdFAoW1xuICogICAxLFxuICogICBkZWxheVAoMTApLFxuICogICBkZWxheVAoMTAwKSxcbiAqICAgZGVsYXlQLnJlamVjdCgxMDAwKSxcbiAqIF0pOyAvLz0+IFByb21pc2UoMTAwKVxuICovXG52YXIgbGFzdFAgPSAoMCwgX3JhbWRhLmN1cnJ5TikoMSwgZnVuY3Rpb24gKGl0ZXJhYmxlKSB7XG4gIHZhciBmdWxmaWxsZWQgPSBbXTtcbiAgdmFyIHJlamVjdGVkID0gW107XG4gIHZhciBvbkZ1bGZpbGwgPSAoMCwgX3JhbWRhLmJpbmQpKGZ1bGZpbGxlZC5wdXNoLCBmdWxmaWxsZWQpO1xuICB2YXIgb25SZWplY3QgPSAoMCwgX3JhbWRhLmJpbmQpKHJlamVjdGVkLnB1c2gsIHJlamVjdGVkKTtcbiAgdmFyIGxpc3RPZlByb21pc2VzID0gKDAsIF9yYW1kYS5tYXApKGZ1bmN0aW9uIChwKSB7XG4gICAgcmV0dXJuICgwLCBfcmVzb2x2ZVBbXCJkZWZhdWx0XCJdKShwKS50aGVuKG9uRnVsZmlsbClbXCJjYXRjaFwiXShvblJlamVjdCk7XG4gIH0sIF90b0NvbnN1bWFibGVBcnJheShpdGVyYWJsZSkpO1xuICByZXR1cm4gKDAsIF9hbGxQW1wiZGVmYXVsdFwiXSkobGlzdE9mUHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgIGlmICgoMCwgX2xlbmd0aEVxW1wiZGVmYXVsdFwiXSkoMCwgZnVsZmlsbGVkKSAmJiAoMCwgX2xlbmd0aEVxW1wiZGVmYXVsdFwiXSkoMCwgcmVqZWN0ZWQpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGlmICgoMCwgX2xlbmd0aEd0ZVtcImRlZmF1bHRcIl0pKDEsIGZ1bGZpbGxlZCkpIHtcbiAgICAgIHJldHVybiAoMCwgX3JhbWRhLmxhc3QpKGZ1bGZpbGxlZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuICgwLCBfcmVqZWN0UFtcImRlZmF1bHRcIl0pKHJlamVjdGVkKTtcbiAgfSk7XG59KTtcbnZhciBfZGVmYXVsdCA9IGxhc3RQO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBfZGVmYXVsdDsiXX0=