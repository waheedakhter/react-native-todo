129f30401302317f0c9a935ce09c0916
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) {
    return typeof obj;
  } : function (obj) {
    return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
  }, _typeof(obj);
}

exports.__esModule = true;
exports["default"] = void 0;

var _ramda = require("ramda");

var _isFunction = _interopRequireDefault(require("../isFunction"));

var fl = _interopRequireWildcard(require("../fantasy-land/mapping"));

function _getRequireWildcardCache(nodeInterop) {
  if (typeof WeakMap !== "function") return null;
  var cacheBabelInterop = new WeakMap();
  var cacheNodeInterop = new WeakMap();
  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {
    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;
  })(nodeInterop);
}

function _interopRequireWildcard(obj, nodeInterop) {
  if (!nodeInterop && obj && obj.__esModule) {
    return obj;
  }

  if (obj === null || _typeof(obj) !== "object" && typeof obj !== "function") {
    return {
      "default": obj
    };
  }

  var cache = _getRequireWildcardCache(nodeInterop);

  if (cache && cache.has(obj)) {
    return cache.get(obj);
  }

  var newObj = {};
  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;

  for (var key in obj) {
    if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) {
      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;

      if (desc && (desc.get || desc.set)) {
        Object.defineProperty(newObj, key, desc);
      } else {
        newObj[key] = obj[key];
      }
    }
  }

  newObj["default"] = obj;

  if (cache) {
    cache.set(obj, newObj);
  }

  return newObj;
}

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : {
    "default": obj
  };
}

var isFunctor = (0, _ramda.either)((0, _ramda.pathSatisfies)(_isFunction["default"], ['map']), (0, _ramda.pathSatisfies)(_isFunction["default"], [fl.map]));
var isApply = (0, _ramda.both)(isFunctor, (0, _ramda.either)((0, _ramda.pathSatisfies)(_isFunction["default"], ['ap']), (0, _ramda.pathSatisfies)(_isFunction["default"], [fl.ap])));
var ap = (0, _ramda.curryN)(2, function (applyF, applyX) {
  if (!isApply(applyF) || !isApply(applyX)) {
    return (0, _ramda.ap)(applyF, applyX);
  }

  try {
    return applyF.ap(applyX);
  } catch (e) {
    return applyX.ap(applyF);
  }
});
var _default = ap;
exports["default"] = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwLmpzIl0sIm5hbWVzIjpbIl90eXBlb2YiLCJvYmoiLCJTeW1ib2wiLCJpdGVyYXRvciIsImNvbnN0cnVjdG9yIiwicHJvdG90eXBlIiwiZXhwb3J0cyIsIl9fZXNNb2R1bGUiLCJfcmFtZGEiLCJyZXF1aXJlIiwiX2lzRnVuY3Rpb24iLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiZmwiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIl9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZSIsIm5vZGVJbnRlcm9wIiwiV2Vha01hcCIsImNhY2hlQmFiZWxJbnRlcm9wIiwiY2FjaGVOb2RlSW50ZXJvcCIsImNhY2hlIiwiaGFzIiwiZ2V0IiwibmV3T2JqIiwiaGFzUHJvcGVydHlEZXNjcmlwdG9yIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJkZXNjIiwic2V0IiwiaXNGdW5jdG9yIiwiZWl0aGVyIiwicGF0aFNhdGlzZmllcyIsIm1hcCIsImlzQXBwbHkiLCJib3RoIiwiYXAiLCJjdXJyeU4iLCJhcHBseUYiLCJhcHBseVgiLCJlIiwiX2RlZmF1bHQiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLFNBQVNBLE9BQVQsQ0FBaUJDLEdBQWpCLEVBQXNCO0FBQUU7O0FBQTJCLFNBQU9ELE9BQU8sR0FBRyxjQUFjLE9BQU9FLE1BQXJCLElBQStCLFlBQVksT0FBT0EsTUFBTSxDQUFDQyxRQUF6RCxHQUFvRSxVQUFVRixHQUFWLEVBQWU7QUFBRSxXQUFPLE9BQU9BLEdBQWQ7QUFBb0IsR0FBekcsR0FBNEcsVUFBVUEsR0FBVixFQUFlO0FBQUUsV0FBT0EsR0FBRyxJQUFJLGNBQWMsT0FBT0MsTUFBNUIsSUFBc0NELEdBQUcsQ0FBQ0csV0FBSixLQUFvQkYsTUFBMUQsSUFBb0VELEdBQUcsS0FBS0MsTUFBTSxDQUFDRyxTQUFuRixHQUErRixRQUEvRixHQUEwRyxP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LEVBQXVCQyxNQUF2QixDQUFQO0FBQ0Q7O0FBRUQsTUFBSTtBQUVGLFdBQU9ELE1BQU0sQ0FBQ0YsRUFBUCxDQUFVRyxNQUFWLENBQVA7QUFDRCxHQUhELENBR0UsT0FBT0MsQ0FBUCxFQUFVO0FBRVYsV0FBT0QsTUFBTSxDQUFDSCxFQUFQLENBQVVFLE1BQVYsQ0FBUDtBQUNEO0FBQ0YsQ0FiUSxDQUFUO0FBY0EsSUFBSUcsUUFBUSxHQUFHTCxFQUFmO0FBQ0FoQyxPQUFPLENBQUMsU0FBRCxDQUFQLEdBQXFCcUMsUUFBckIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiOyByZXR1cm4gX3R5cGVvZiA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgU3ltYm9sICYmIFwic3ltYm9sXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH0sIF90eXBlb2Yob2JqKTsgfVxuXG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSB2b2lkIDA7XG5cbnZhciBfcmFtZGEgPSByZXF1aXJlKFwicmFtZGFcIik7XG5cbnZhciBfaXNGdW5jdGlvbiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4uL2lzRnVuY3Rpb25cIikpO1xuXG52YXIgZmwgPSBfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZChyZXF1aXJlKFwiLi4vZmFudGFzeS1sYW5kL21hcHBpbmdcIikpO1xuXG5mdW5jdGlvbiBfZ2V0UmVxdWlyZVdpbGRjYXJkQ2FjaGUobm9kZUludGVyb3ApIHsgaWYgKHR5cGVvZiBXZWFrTWFwICE9PSBcImZ1bmN0aW9uXCIpIHJldHVybiBudWxsOyB2YXIgY2FjaGVCYWJlbEludGVyb3AgPSBuZXcgV2Vha01hcCgpOyB2YXIgY2FjaGVOb2RlSW50ZXJvcCA9IG5ldyBXZWFrTWFwKCk7IHJldHVybiAoX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlID0gZnVuY3Rpb24gX2dldFJlcXVpcmVXaWxkY2FyZENhY2hlKG5vZGVJbnRlcm9wKSB7IHJldHVybiBub2RlSW50ZXJvcCA/IGNhY2hlTm9kZUludGVyb3AgOiBjYWNoZUJhYmVsSW50ZXJvcDsgfSkobm9kZUludGVyb3ApOyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkKG9iaiwgbm9kZUludGVyb3ApIHsgaWYgKCFub2RlSW50ZXJvcCAmJiBvYmogJiYgb2JqLl9fZXNNb2R1bGUpIHsgcmV0dXJuIG9iajsgfSBpZiAob2JqID09PSBudWxsIHx8IF90eXBlb2Yob2JqKSAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygb2JqICE9PSBcImZ1bmN0aW9uXCIpIHsgcmV0dXJuIHsgXCJkZWZhdWx0XCI6IG9iaiB9OyB9IHZhciBjYWNoZSA9IF9nZXRSZXF1aXJlV2lsZGNhcmRDYWNoZShub2RlSW50ZXJvcCk7IGlmIChjYWNoZSAmJiBjYWNoZS5oYXMob2JqKSkgeyByZXR1cm4gY2FjaGUuZ2V0KG9iaik7IH0gdmFyIG5ld09iaiA9IHt9OyB2YXIgaGFzUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmRlZmluZVByb3BlcnR5ICYmIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7IGZvciAodmFyIGtleSBpbiBvYmopIHsgaWYgKGtleSAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkgeyB2YXIgZGVzYyA9IGhhc1Byb3BlcnR5RGVzY3JpcHRvciA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpIDogbnVsbDsgaWYgKGRlc2MgJiYgKGRlc2MuZ2V0IHx8IGRlc2Muc2V0KSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3T2JqLCBrZXksIGRlc2MpOyB9IGVsc2UgeyBuZXdPYmpba2V5XSA9IG9ialtrZXldOyB9IH0gfSBuZXdPYmpbXCJkZWZhdWx0XCJdID0gb2JqOyBpZiAoY2FjaGUpIHsgY2FjaGUuc2V0KG9iaiwgbmV3T2JqKTsgfSByZXR1cm4gbmV3T2JqOyB9XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IFwiZGVmYXVsdFwiOiBvYmogfTsgfVxuXG52YXIgaXNGdW5jdG9yID0gKDAsIF9yYW1kYS5laXRoZXIpKCgwLCBfcmFtZGEucGF0aFNhdGlzZmllcykoX2lzRnVuY3Rpb25bXCJkZWZhdWx0XCJdLCBbJ21hcCddKSwgKDAsIF9yYW1kYS5wYXRoU2F0aXNmaWVzKShfaXNGdW5jdGlvbltcImRlZmF1bHRcIl0sIFtmbC5tYXBdKSk7XG52YXIgaXNBcHBseSA9ICgwLCBfcmFtZGEuYm90aCkoaXNGdW5jdG9yLCAoMCwgX3JhbWRhLmVpdGhlcikoKDAsIF9yYW1kYS5wYXRoU2F0aXNmaWVzKShfaXNGdW5jdGlvbltcImRlZmF1bHRcIl0sIFsnYXAnXSksICgwLCBfcmFtZGEucGF0aFNhdGlzZmllcykoX2lzRnVuY3Rpb25bXCJkZWZhdWx0XCJdLCBbZmwuYXBdKSkpO1xudmFyIGFwID0gKDAsIF9yYW1kYS5jdXJyeU4pKDIsIGZ1bmN0aW9uIChhcHBseUYsIGFwcGx5WCkge1xuICAvLyByZXR1cm4gb3JpZ2luYWwgcmFtZGEgYGFwYCBpZiBub3QgQXBwbHkgc3BlY1xuICBpZiAoIWlzQXBwbHkoYXBwbHlGKSB8fCAhaXNBcHBseShhcHBseVgpKSB7XG4gICAgcmV0dXJuICgwLCBfcmFtZGEuYXApKGFwcGx5RiwgYXBwbHlYKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gbmV3IHZlcnNpb24gb2YgYGFwYCBzdGFydGluZyBmcm9tIHJhbWRhIHZlcnNpb24gPiAwLjIzLjBcbiAgICByZXR1cm4gYXBwbHlGLmFwKGFwcGx5WCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBvbGQgdmVyc2lvbiBvZiBgYXBgIHRpbGwgcmFtZGEgdmVyc2lvbiA8PSAwLjIzLjBcbiAgICByZXR1cm4gYXBwbHlYLmFwKGFwcGx5Rik7XG4gIH1cbn0pO1xudmFyIF9kZWZhdWx0ID0gYXA7XG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IF9kZWZhdWx0OyJdfQ==