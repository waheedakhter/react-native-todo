{"version":3,"sources":["TouchableOpacity.tsx"],"names":["TouchableOpacity","Component","GenericTouchable","activeOpacity","childStyle","StyleSheet","Animated","toValue","duration","easing","Easing","useNativeDriver","to","TOUCHABLE_STATE","render","style","rest","opacity","onStateChange"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,YAAA,GAAA,OAAA,CAAA,cAAA,CAAA;;AAOA,IAAA,iBAAA,GAAA,uBAAA,CAAA,OAAA,CAAA,oBAAA,CAAA,CAAA;;AAIA,IAAA,KAAA,GAAA,uBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAMe,gB;;;;;AAEb,8BAAA;AAAA;;AAAA;;AAAA,sCAAA,IAAA;AAAA,MAAA,IAAA;AAAA;;AAAA,oDAAA,IAAA;;AAAA,IAAA,eAAA,8CAAA,iCAAA,EAOkC,YAAM;AACtC,UAAMI,UAAU,GAAGC,YAAAA,CAAAA,UAAAA,CAAAA,OAAAA,CAAmB,MAAA,KAAA,CAAnBA,KAAAA,KAAnB,EAAA;AACA,aAAOD,UAAU,CAAVA,OAAAA,IAAAA,IAAAA,GAAAA,CAAAA,GAAiCA,UAAU,CAAlD,OAAA;AATF,KAAA,CAAA;;AAAA,IAAA,eAAA,8CAAA,SAAA,EAYU,IAAIE,YAAAA,CAAAA,QAAAA,CAAJ,KAAA,CAAmB,MAZ7B,+BAY6B,EAAnB,CAZV,CAAA;;AAAA,IAAA,eAAA,8CAAA,cAAA,EAce,UAAA,KAAA,EAAA,QAAA,EAAqC;AAClDA,MAAAA,YAAAA,CAAAA,QAAAA,CAAAA,MAAAA,CAAgB,MAAhBA,OAAAA,EAA8B;AAC5BC,QAAAA,OAAO,EADqB,KAAA;AAE5BC,QAAAA,QAAQ,EAFoB,QAAA;AAG5BC,QAAAA,MAAM,EAAEC,YAAAA,CAAAA,MAAAA,CAAAA,KAAAA,CAAaA,YAAAA,CAAAA,MAAAA,CAHO,IAGpBA,CAHoB;AAI5BC,QAAAA,eAAe,EAAE;AAJW,OAA9BL,EAAAA,KAAAA;AAfF,KAAA,CAAA;;AAAA,IAAA,eAAA,8CAAA,eAAA,EAuBgB,UAAA,KAAA,EAAA,EAAA,EAA+B;AAC7C,UAAIM,EAAE,KAAKC,iBAAAA,CAAAA,eAAAA,CAAX,KAAA,EAAkC;AAChC,cAAA,YAAA,CAAkB,MAAA,KAAA,CAAlB,aAAA,EAAA,CAAA;AADF,OAAA,MAEO,IACLD,EAAE,KAAKC,iBAAAA,CAAAA,eAAAA,CAAPD,YAAAA,IACAA,EAAE,KAAKC,iBAAAA,CAAAA,eAAAA,CAFF,aAAA,EAGL;AACA,cAAA,YAAA,CAAkB,MAAlB,+BAAkB,EAAlB,EAAA,GAAA;AACD;AA/BH,KAAA,CAAA;;AAAA;AAAA;;;;WAkCAC,kBAAS;AACP,wBAAgC,KAAhC,KAAA;AAAA,0CAAQC,KAAR;AAAA,UAAQA,KAAR,kCAAM,EAAN;AAAA,UAAuBC,IAAvB;AACA,aACE,KAAA,CAAA,aAAA,CAAC,iBAAA,CAAD,OAAA,EAAA,QAAA,CAAA,EAAA,EAAA,IAAA,EAAA;AAEE,QAAA,KAAK,EAAE,CAAA,KAAA,EAEL;AACEC,UAAAA,OAAO,EAAG,KADZ;AAAA,SAFK,CAFT;AAQE,QAAA,aAAa,EAAE,KAAKC;AARtB,OAAA,CAAA,EASG,KAAA,KAAA,CAAA,QAAA,GAAsB,KAAA,KAAA,CAAtB,QAAA,GAA4C,KAAA,CAAA,aAAA,CAAC,YAAA,CAAD,IAAA,EAVjD,IAUiD,CAT/C,CADF;AAaD;;;EAnD2CjB,KAAAA,CAA/B,S;;;;gBAAMD,gB,EAGG,c,6BACjBE,iBAAAA,CAAAA,OAAAA,CADiB,Y;AAEpBC,EAAAA,aAAa,EAAE","sourcesContent":["import {\n  Animated,\n  Easing,\n  StyleSheet,\n  View,\n  TouchableOpacityProps,\n} from 'react-native';\nimport GenericTouchable, {\n  TOUCHABLE_STATE,\n  GenericTouchableProps,\n} from './GenericTouchable';\nimport * as React from 'react';\nimport { Component } from 'react';\n\n/**\n * TouchableOpacity bases on timing animation which has been used in RN's core\n */\nexport default class TouchableOpacity extends Component<\n  TouchableOpacityProps & GenericTouchableProps\n> {\n  static defaultProps = {\n    ...GenericTouchable.defaultProps,\n    activeOpacity: 0.2,\n  };\n\n  // opacity is 1 one by default but could be overwritten\n  getChildStyleOpacityWithDefault = () => {\n    const childStyle = StyleSheet.flatten(this.props.style) || {};\n    return childStyle.opacity == null ? 1 : childStyle.opacity;\n  };\n\n  opacity = new Animated.Value(this.getChildStyleOpacityWithDefault());\n\n  setOpacityTo = (value: number, duration: number) => {\n    Animated.timing(this.opacity, {\n      toValue: value,\n      duration: duration,\n      easing: Easing.inOut(Easing.quad),\n      useNativeDriver: true,\n    }).start();\n  };\n\n  onStateChange = (_from: number, to: number) => {\n    if (to === TOUCHABLE_STATE.BEGAN) {\n      this.setOpacityTo(this.props.activeOpacity!, 0);\n    } else if (\n      to === TOUCHABLE_STATE.UNDETERMINED ||\n      to === TOUCHABLE_STATE.MOVED_OUTSIDE\n    ) {\n      this.setOpacityTo(this.getChildStyleOpacityWithDefault(), 150);\n    }\n  };\n\n  render() {\n    const { style = {}, ...rest } = this.props;\n    return (\n      <GenericTouchable\n        {...rest}\n        style={[\n          style,\n          {\n            opacity: (this.opacity as unknown) as number, // TODO: fix this\n          },\n        ]}\n        onStateChange={this.onStateChange}>\n        {this.props.children ? this.props.children : <View />}\n      </GenericTouchable>\n    );\n  }\n}\n"]}