a06f674c58d87a9fb46a7c7f70c8f3d4
var _curry2 = require("./_curry2");

var _xfBase = require("./_xfBase");

var XDropRepeatsWith = function () {
  function XDropRepeatsWith(pred, xf) {
    this.xf = xf;
    this.pred = pred;
    this.lastValue = undefined;
    this.seenFirstValue = false;
  }

  XDropRepeatsWith.prototype['@@transducer/init'] = _xfBase.init;
  XDropRepeatsWith.prototype['@@transducer/result'] = _xfBase.result;

  XDropRepeatsWith.prototype['@@transducer/step'] = function (result, input) {
    var sameAsLast = false;

    if (!this.seenFirstValue) {
      this.seenFirstValue = true;
    } else if (this.pred(this.lastValue, input)) {
      sameAsLast = true;
    }

    this.lastValue = input;
    return sameAsLast ? result : this.xf['@@transducer/step'](result, input);
  };

  return XDropRepeatsWith;
}();

var _xdropRepeatsWith = _curry2(function _xdropRepeatsWith(pred, xf) {
  return new XDropRepeatsWith(pred, xf);
});

module.exports = _xdropRepeatsWith;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl94ZHJvcFJlcGVhdHNXaXRoLmpzIl0sIm5hbWVzIjpbIl9jdXJyeTIiLCJyZXF1aXJlIiwiX3hmQmFzZSIsIlhEcm9wUmVwZWF0c1dpdGgiLCJwcmVkIiwieGYiLCJsYXN0VmFsdWUiLCJ1bmRlZmluZWQiLCJzZWVuRmlyc3RWYWx1ZSIsInByb3RvdHlwZSIsImluaXQiLCJyZXN1bHQiLCJpbnB1dCIsInNhbWVBc0xhc3QiLCJfeGRyb3BSZXBlYXRzV2l0aCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLE9BQU8sR0FFWEMsT0FBTyxDQUFDLFdBQUQsQ0FGUDs7QUFJQSxJQUFJQyxPQUFPLEdBRVhELE9BQU8sQ0FBQyxXQUFELENBRlA7O0FBSUEsSUFBSUUsZ0JBQWdCLEdBRXBCLFlBQVk7QUFDVixXQUFTQSxnQkFBVCxDQUEwQkMsSUFBMUIsRUFBZ0NDLEVBQWhDLEVBQW9DO0FBQ2xDLFNBQUtBLEVBQUwsR0FBVUEsRUFBVjtBQUNBLFNBQUtELElBQUwsR0FBWUEsSUFBWjtBQUNBLFNBQUtFLFNBQUwsR0FBaUJDLFNBQWpCO0FBQ0EsU0FBS0MsY0FBTCxHQUFzQixLQUF0QjtBQUNEOztBQUVETCxFQUFBQSxnQkFBZ0IsQ0FBQ00sU0FBakIsQ0FBMkIsbUJBQTNCLElBQWtEUCxPQUFPLENBQUNRLElBQTFEO0FBQ0FQLEVBQUFBLGdCQUFnQixDQUFDTSxTQUFqQixDQUEyQixxQkFBM0IsSUFBb0RQLE9BQU8sQ0FBQ1MsTUFBNUQ7O0FBRUFSLEVBQUFBLGdCQUFnQixDQUFDTSxTQUFqQixDQUEyQixtQkFBM0IsSUFBa0QsVUFBVUUsTUFBVixFQUFrQkMsS0FBbEIsRUFBeUI7QUFDekUsUUFBSUMsVUFBVSxHQUFHLEtBQWpCOztBQUVBLFFBQUksQ0FBQyxLQUFLTCxjQUFWLEVBQTBCO0FBQ3hCLFdBQUtBLGNBQUwsR0FBc0IsSUFBdEI7QUFDRCxLQUZELE1BRU8sSUFBSSxLQUFLSixJQUFMLENBQVUsS0FBS0UsU0FBZixFQUEwQk0sS0FBMUIsQ0FBSixFQUFzQztBQUMzQ0MsTUFBQUEsVUFBVSxHQUFHLElBQWI7QUFDRDs7QUFFRCxTQUFLUCxTQUFMLEdBQWlCTSxLQUFqQjtBQUNBLFdBQU9DLFVBQVUsR0FBR0YsTUFBSCxHQUFZLEtBQUtOLEVBQUwsQ0FBUSxtQkFBUixFQUE2Qk0sTUFBN0IsRUFBcUNDLEtBQXJDLENBQTdCO0FBQ0QsR0FYRDs7QUFhQSxTQUFPVCxnQkFBUDtBQUNELENBekJELEVBRkE7O0FBNkJBLElBQUlXLGlCQUFpQixHQUVyQmQsT0FBTyxDQUFDLFNBQVNjLGlCQUFULENBQTJCVixJQUEzQixFQUFpQ0MsRUFBakMsRUFBcUM7QUFDM0MsU0FBTyxJQUFJRixnQkFBSixDQUFxQkMsSUFBckIsRUFBMkJDLEVBQTNCLENBQVA7QUFDRCxDQUZNLENBRlA7O0FBTUFVLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQkYsaUJBQWpCIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9jdXJyeTIgPVxuLyojX19QVVJFX18qL1xucmVxdWlyZShcIi4vX2N1cnJ5MlwiKTtcblxudmFyIF94ZkJhc2UgPVxuLyojX19QVVJFX18qL1xucmVxdWlyZShcIi4vX3hmQmFzZVwiKTtcblxudmFyIFhEcm9wUmVwZWF0c1dpdGggPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBYRHJvcFJlcGVhdHNXaXRoKHByZWQsIHhmKSB7XG4gICAgdGhpcy54ZiA9IHhmO1xuICAgIHRoaXMucHJlZCA9IHByZWQ7XG4gICAgdGhpcy5sYXN0VmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zZWVuRmlyc3RWYWx1ZSA9IGZhbHNlO1xuICB9XG5cbiAgWERyb3BSZXBlYXRzV2l0aC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9pbml0J10gPSBfeGZCYXNlLmluaXQ7XG4gIFhEcm9wUmVwZWF0c1dpdGgucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvcmVzdWx0J10gPSBfeGZCYXNlLnJlc3VsdDtcblxuICBYRHJvcFJlcGVhdHNXaXRoLnByb3RvdHlwZVsnQEB0cmFuc2R1Y2VyL3N0ZXAnXSA9IGZ1bmN0aW9uIChyZXN1bHQsIGlucHV0KSB7XG4gICAgdmFyIHNhbWVBc0xhc3QgPSBmYWxzZTtcblxuICAgIGlmICghdGhpcy5zZWVuRmlyc3RWYWx1ZSkge1xuICAgICAgdGhpcy5zZWVuRmlyc3RWYWx1ZSA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLnByZWQodGhpcy5sYXN0VmFsdWUsIGlucHV0KSkge1xuICAgICAgc2FtZUFzTGFzdCA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5sYXN0VmFsdWUgPSBpbnB1dDtcbiAgICByZXR1cm4gc2FtZUFzTGFzdCA/IHJlc3VsdCA6IHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCBpbnB1dCk7XG4gIH07XG5cbiAgcmV0dXJuIFhEcm9wUmVwZWF0c1dpdGg7XG59KCk7XG5cbnZhciBfeGRyb3BSZXBlYXRzV2l0aCA9XG4vKiNfX1BVUkVfXyovXG5fY3VycnkyKGZ1bmN0aW9uIF94ZHJvcFJlcGVhdHNXaXRoKHByZWQsIHhmKSB7XG4gIHJldHVybiBuZXcgWERyb3BSZXBlYXRzV2l0aChwcmVkLCB4Zik7XG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBfeGRyb3BSZXBlYXRzV2l0aDsiXX0=