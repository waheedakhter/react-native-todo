e723cbae5b0993075a06039c64e83b57
var _curry2 = require("./_curry2");

var _xfBase = require("./_xfBase");

var XDropLast = function () {
  function XDropLast(n, xf) {
    this.xf = xf;
    this.pos = 0;
    this.full = false;
    this.acc = new Array(n);
  }

  XDropLast.prototype['@@transducer/init'] = _xfBase.init;

  XDropLast.prototype['@@transducer/result'] = function (result) {
    this.acc = null;
    return this.xf['@@transducer/result'](result);
  };

  XDropLast.prototype['@@transducer/step'] = function (result, input) {
    if (this.full) {
      result = this.xf['@@transducer/step'](result, this.acc[this.pos]);
    }

    this.store(input);
    return result;
  };

  XDropLast.prototype.store = function (input) {
    this.acc[this.pos] = input;
    this.pos += 1;

    if (this.pos === this.acc.length) {
      this.pos = 0;
      this.full = true;
    }
  };

  return XDropLast;
}();

var _xdropLast = _curry2(function _xdropLast(n, xf) {
  return new XDropLast(n, xf);
});

module.exports = _xdropLast;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl94ZHJvcExhc3QuanMiXSwibmFtZXMiOlsiX2N1cnJ5MiIsInJlcXVpcmUiLCJfeGZCYXNlIiwiWERyb3BMYXN0IiwibiIsInhmIiwicG9zIiwiZnVsbCIsImFjYyIsIkFycmF5IiwicHJvdG90eXBlIiwiaW5pdCIsInJlc3VsdCIsImlucHV0Iiwic3RvcmUiLCJsZW5ndGgiLCJfeGRyb3BMYXN0IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSUEsT0FBTyxHQUVYQyxPQUFPLENBQUMsV0FBRCxDQUZQOztBQUlBLElBQUlDLE9BQU8sR0FFWEQsT0FBTyxDQUFDLFdBQUQsQ0FGUDs7QUFJQSxJQUFJRSxTQUFTLEdBRWIsWUFBWTtBQUNWLFdBQVNBLFNBQVQsQ0FBbUJDLENBQW5CLEVBQXNCQyxFQUF0QixFQUEwQjtBQUN4QixTQUFLQSxFQUFMLEdBQVVBLEVBQVY7QUFDQSxTQUFLQyxHQUFMLEdBQVcsQ0FBWDtBQUNBLFNBQUtDLElBQUwsR0FBWSxLQUFaO0FBQ0EsU0FBS0MsR0FBTCxHQUFXLElBQUlDLEtBQUosQ0FBVUwsQ0FBVixDQUFYO0FBQ0Q7O0FBRURELEVBQUFBLFNBQVMsQ0FBQ08sU0FBVixDQUFvQixtQkFBcEIsSUFBMkNSLE9BQU8sQ0FBQ1MsSUFBbkQ7O0FBRUFSLEVBQUFBLFNBQVMsQ0FBQ08sU0FBVixDQUFvQixxQkFBcEIsSUFBNkMsVUFBVUUsTUFBVixFQUFrQjtBQUM3RCxTQUFLSixHQUFMLEdBQVcsSUFBWDtBQUNBLFdBQU8sS0FBS0gsRUFBTCxDQUFRLHFCQUFSLEVBQStCTyxNQUEvQixDQUFQO0FBQ0QsR0FIRDs7QUFLQVQsRUFBQUEsU0FBUyxDQUFDTyxTQUFWLENBQW9CLG1CQUFwQixJQUEyQyxVQUFVRSxNQUFWLEVBQWtCQyxLQUFsQixFQUF5QjtBQUNsRSxRQUFJLEtBQUtOLElBQVQsRUFBZTtBQUNiSyxNQUFBQSxNQUFNLEdBQUcsS0FBS1AsRUFBTCxDQUFRLG1CQUFSLEVBQTZCTyxNQUE3QixFQUFxQyxLQUFLSixHQUFMLENBQVMsS0FBS0YsR0FBZCxDQUFyQyxDQUFUO0FBQ0Q7O0FBRUQsU0FBS1EsS0FBTCxDQUFXRCxLQUFYO0FBQ0EsV0FBT0QsTUFBUDtBQUNELEdBUEQ7O0FBU0FULEVBQUFBLFNBQVMsQ0FBQ08sU0FBVixDQUFvQkksS0FBcEIsR0FBNEIsVUFBVUQsS0FBVixFQUFpQjtBQUMzQyxTQUFLTCxHQUFMLENBQVMsS0FBS0YsR0FBZCxJQUFxQk8sS0FBckI7QUFDQSxTQUFLUCxHQUFMLElBQVksQ0FBWjs7QUFFQSxRQUFJLEtBQUtBLEdBQUwsS0FBYSxLQUFLRSxHQUFMLENBQVNPLE1BQTFCLEVBQWtDO0FBQ2hDLFdBQUtULEdBQUwsR0FBVyxDQUFYO0FBQ0EsV0FBS0MsSUFBTCxHQUFZLElBQVo7QUFDRDtBQUNGLEdBUkQ7O0FBVUEsU0FBT0osU0FBUDtBQUNELENBbkNELEVBRkE7O0FBdUNBLElBQUlhLFVBQVUsR0FFZGhCLE9BQU8sQ0FBQyxTQUFTZ0IsVUFBVCxDQUFvQlosQ0FBcEIsRUFBdUJDLEVBQXZCLEVBQTJCO0FBQ2pDLFNBQU8sSUFBSUYsU0FBSixDQUFjQyxDQUFkLEVBQWlCQyxFQUFqQixDQUFQO0FBQ0QsQ0FGTSxDQUZQOztBQU1BWSxNQUFNLENBQUNDLE9BQVAsR0FBaUJGLFVBQWpCIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9jdXJyeTIgPVxuLyojX19QVVJFX18qL1xucmVxdWlyZShcIi4vX2N1cnJ5MlwiKTtcblxudmFyIF94ZkJhc2UgPVxuLyojX19QVVJFX18qL1xucmVxdWlyZShcIi4vX3hmQmFzZVwiKTtcblxudmFyIFhEcm9wTGFzdCA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFhEcm9wTGFzdChuLCB4Zikge1xuICAgIHRoaXMueGYgPSB4ZjtcbiAgICB0aGlzLnBvcyA9IDA7XG4gICAgdGhpcy5mdWxsID0gZmFsc2U7XG4gICAgdGhpcy5hY2MgPSBuZXcgQXJyYXkobik7XG4gIH1cblxuICBYRHJvcExhc3QucHJvdG90eXBlWydAQHRyYW5zZHVjZXIvaW5pdCddID0gX3hmQmFzZS5pbml0O1xuXG4gIFhEcm9wTGFzdC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXSA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICB0aGlzLmFjYyA9IG51bGw7XG4gICAgcmV0dXJuIHRoaXMueGZbJ0BAdHJhbnNkdWNlci9yZXN1bHQnXShyZXN1bHQpO1xuICB9O1xuXG4gIFhEcm9wTGFzdC5wcm90b3R5cGVbJ0BAdHJhbnNkdWNlci9zdGVwJ10gPSBmdW5jdGlvbiAocmVzdWx0LCBpbnB1dCkge1xuICAgIGlmICh0aGlzLmZ1bGwpIHtcbiAgICAgIHJlc3VsdCA9IHRoaXMueGZbJ0BAdHJhbnNkdWNlci9zdGVwJ10ocmVzdWx0LCB0aGlzLmFjY1t0aGlzLnBvc10pO1xuICAgIH1cblxuICAgIHRoaXMuc3RvcmUoaW5wdXQpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgWERyb3BMYXN0LnByb3RvdHlwZS5zdG9yZSA9IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHRoaXMuYWNjW3RoaXMucG9zXSA9IGlucHV0O1xuICAgIHRoaXMucG9zICs9IDE7XG5cbiAgICBpZiAodGhpcy5wb3MgPT09IHRoaXMuYWNjLmxlbmd0aCkge1xuICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgdGhpcy5mdWxsID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFhEcm9wTGFzdDtcbn0oKTtcblxudmFyIF94ZHJvcExhc3QgPVxuLyojX19QVVJFX18qL1xuX2N1cnJ5MihmdW5jdGlvbiBfeGRyb3BMYXN0KG4sIHhmKSB7XG4gIHJldHVybiBuZXcgWERyb3BMYXN0KG4sIHhmKTtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IF94ZHJvcExhc3Q7Il19