{"version":3,"sources":["AnimatedOperator.js"],"names":["input","fn","OPERATIONS","add","reduce","a","sub","multiply","divide","pow","Math","modulo","sqrt","single","log","sin","cos","tan","acos","asin","atan","exp","round","abs","ceil","floor","max","min","and","reduceFrom","or","not","defined","isNaN","lessThan","infix","eq","greaterThan","lessOrEq","greaterOrEq","neq","AnimatedNode","constructor","el","type","op","toString","__onEvaluate","args","adapt"],"mappings":"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","sourcesContent":["import AnimatedNode from './AnimatedNode';\nimport { val } from '../val';\n\nimport invariant from 'fbjs/lib/invariant';\nimport { adapt } from '../core/AnimatedBlock';\n\nfunction reduce(fn) {\n  return input => input.reduce((a, b) => fn(val(a), val(b)));\n}\n\nfunction reduceFrom(fn, initialValue) {\n  return input => input.reduce((a, b) => fn(val(a), val(b)), initialValue);\n}\n\nfunction infix(fn) {\n  return input => fn(val(input[0]), val(input[1]));\n}\n\nfunction single(fn) {\n  return input => fn(val(input[0]));\n}\n\nconst OPERATIONS = {\n  // arithmetic\n  add: reduce((a, b) => a + b),\n  sub: reduce((a, b) => a - b),\n  multiply: reduce((a, b) => a * b),\n  divide: reduce((a, b) => a / b),\n  pow: reduce((a, b) => Math.pow(a, b)),\n  modulo: reduce((a, b) => ((a % b) + b) % b),\n  sqrt: single(a => Math.sqrt(a)),\n  log: single(a => Math.log(a)),\n  sin: single(a => Math.sin(a)),\n  cos: single(a => Math.cos(a)),\n  tan: single(a => Math.tan(a)),\n  acos: single(a => Math.acos(a)),\n  asin: single(a => Math.asin(a)),\n  atan: single(a => Math.atan(a)),\n  exp: single(a => Math.exp(a)),\n  round: single(a => Math.round(a)),\n  abs: single(a => Math.abs(a)),\n  ceil: single(a => Math.ceil(a)),\n  floor: single(a => Math.floor(a)),\n  max: reduce((a,b) => Math.max(a, b)),\n  min: reduce((a,b) => Math.min(a, b)),\n\n  // logical\n  and: reduceFrom((a, b) => a && b, true),\n  or: reduceFrom((a, b) => a || b, false),\n  not: single(a => !a),\n  defined: single(a => a !== null && a !== undefined && !isNaN(a)),\n\n  // comparing\n  lessThan: infix((a, b) => a < b),\n  /* eslint-disable-next-line eqeqeq */\n  eq: infix((a, b) => a == b),\n  greaterThan: infix((a, b) => a > b),\n  lessOrEq: infix((a, b) => a <= b),\n  greaterOrEq: infix((a, b) => a >= b),\n  /* eslint-disable-next-line eqeqeq */\n  neq: infix((a, b) => a != b),\n};\n\nclass AnimatedOperator extends AnimatedNode {\n  _input;\n  _op;\n  _operation;\n\n  constructor(operator, input) {\n    invariant(\n      typeof operator === 'string',\n      `Reanimated: Animated.operator node first argument should be of type String, but got: ${operator}`\n    );\n    invariant(\n      input.every(\n        el =>\n          el instanceof AnimatedNode ||\n          typeof el === 'string' ||\n          typeof el === 'number'\n      ),\n      `Reanimated: Animated.operator node second argument should be one or more of type AnimatedNode, String or Number but got ${input}`\n    );\n    super(\n      { type: 'op', op: operator, input },\n      input\n    );\n    this._op = operator;\n    this._input = input;\n  }\n\n  toString() {\n    return `AnimatedOperator, id: ${this.__nodeID}`;\n  }\n\n  __onEvaluate() {\n    if (!this._operation) {\n      this._operation = OPERATIONS[this._op];\n      invariant(this._operation, `Illegal operator '%s'`, this._op);\n    }\n    return this._operation(this._input);\n  }\n}\n\nexport function createAnimatedOperator(name) {\n  return (...args) => new AnimatedOperator(name, args.map(adapt));\n}\n"]}